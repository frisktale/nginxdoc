import{r as n,c as s,a as e,b as t,F as r,d as o,e as d,o as p}from"./app.138b5321.js";import{_ as c}from"./plugin-vue_export-helper.5a098b48.js";const i={},l=o(`<h1 id="ngx-http-headers-module" tabindex="-1"><a class="header-anchor" href="#ngx-http-headers-module" aria-hidden="true">#</a> ngx_http_headers_module</h1><ul><li><a href="#directives">\u6307\u4EE4</a><ul><li><a href="#gzadd_headerip">add_header</a></li><li><a href="#add_trailer">add_trailer</a></li><li><a href="#expires">expires</a></li></ul></li></ul><p><code>ngx_http_headers_module</code> \u6A21\u5757\u5141\u8BB8\u5C06 <code>Expires</code> \u548C <code>Cache-Control</code> \u5934\u5B57\u6BB5\u4EE5\u53CA\u4EFB\u610F\u5B57\u6BB5\u6DFB\u52A0\u5230\u54CD\u5E94\u5934\u4E2D\u3002</p><p><a id="example_configuration"></a></p><h2 id="\u793A\u4F8B\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u793A\u4F8B\u914D\u7F6E" aria-hidden="true">#</a> \u793A\u4F8B\u914D\u7F6E</h2><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">expires</span>    <span class="token number">24h</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">expires</span>    modified +24h</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">expires</span>    @24h</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">expires</span>    <span class="token number">0</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">expires</span>    -1</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">expires</span>    epoch</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">expires</span>    <span class="token variable">$expires</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">add_header</span> Cache-Control private</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><a id="directives"></a></p><h2 id="\u6307\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u6307\u4EE4" aria-hidden="true">#</a> \u6307\u4EE4</h2><h3 id="add-header" tabindex="-1"><a class="header-anchor" href="#add-header" aria-hidden="true">#</a> add_header</h3><table><thead><tr><th style="text-align:right;">-</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:right;"><strong>\u8BED\u6CD5</strong></td><td><strong>add_header</strong> <code>name value [always]</code>;</td></tr><tr><td style="text-align:right;"><strong>\u9ED8\u8BA4</strong></td><td>\u2014\u2014</td></tr><tr><td style="text-align:right;"><strong>\u4E0A\u4E0B\u6587</strong></td><td>http\u3001server\u3001location\u3001location \u4E2D\u7684 if</td></tr></tbody></table><p>\u5982\u679C\u54CD\u5E94\u4EE3\u7801\u7B49\u4E8E 200\u3001201\uFF081.3.10\uFF09\u3001204\u3001206\u3001301\u3001302\u3001303\u3001304\u3001307\uFF081.1.16\u30011.0.13\uFF09\u6216 308\uFF081.13.0\uFF09\uFF0C\u5219\u5C06\u6307\u5B9A\u7684\u5B57\u6BB5\u6DFB\u52A0\u5230\u54CD\u5E94\u62A5\u5934\u4E2D\u3002\u8BE5\u503C\u53EF\u4EE5\u5305\u542B\u53D8\u91CF\u3002</p><p>\u53EF\u4EE5\u5B58\u5728\u51E0\u4E2A <code>add_header</code> \u6307\u4EE4\u3002\u5F53\u4E14\u4EC5\u5F53\u5728\u5F53\u524D\u7EA7\u522B\u4E0A\u6CA1\u6709\u5B9A\u4E49 <code>add_header</code> \u6307\u4EE4\u65F6\uFF0C\u8FD9\u4E9B\u6307\u4EE4\u624D\u4ECE\u4E0A\u4E00\u7EA7\u7EE7\u627F\u3002</p><p>\u5982\u679C\u6307\u5B9A\u4E86 <code>always</code> \u53C2\u6570\uFF081.7.5\uFF09\uFF0C\u5219\u65E0\u8BBA\u54CD\u5E94\u4EE3\u7801\u4E3A\u4F55\u503C\uFF0C\u5934\u5B57\u6BB5\u90FD\u5C06\u88AB\u6DFB\u52A0\u3002</p><h3 id="add-trailer" tabindex="-1"><a class="header-anchor" href="#add-trailer" aria-hidden="true">#</a> add_trailer</h3><table><thead><tr><th style="text-align:right;">-</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:right;"><strong>\u8BED\u6CD5</strong></td><td><strong>add_trailer</strong> <code>number size</code>;</td></tr><tr><td style="text-align:right;"><strong>\u9ED8\u8BA4</strong></td><td>\u2014\u2014</td></tr><tr><td style="text-align:right;"><strong>\u4E0A\u4E0B\u6587</strong></td><td>http\u3001server\u3001location\u3001location \u4E2D\u7684 if</td></tr><tr><td style="text-align:right;"><strong>\u63D0\u793A</strong></td><td>\u8BE5\u6307\u4EE4\u5728 1.13.2 \u7248\u672C\u4E2D\u51FA\u73B0</td></tr></tbody></table><p>\u5982\u679C\u54CD\u5E94\u4EE3\u7801\u7B49\u4E8E 200\u3001201\u3001206\u3001301\u3001302\u3001303\u3001307 \u6216 308\uFF0C\u5219\u5C06\u6307\u5B9A\u7684\u5B57\u6BB5\u6DFB\u52A0\u5230\u54CD\u5E94\u7684\u672B\u5C3E\u3002\u8BE5\u503C\u53EF\u4EE5\u5305\u542B\u53D8\u91CF\u3002</p><p>\u53EF\u4EE5\u5B58\u5728\u591A\u4E2A <code>add_trailer</code> \u6307\u4EE4\u3002\u5F53\u4E14\u4EC5\u5F53\u5728\u5F53\u524D\u7EA7\u522B\u4E0A\u6CA1\u6709\u5B9A\u4E49 <code>add_trailer</code> \u6307\u4EE4\u65F6\uFF0C\u8FD9\u4E9B\u6307\u4EE4\u624D\u4ECE\u4E0A\u4E00\u7EA7\u7EE7\u627F\u3002</p><p>\u5982\u679C\u6307\u5B9A <code>always</code> \u53C2\u6570\uFF0C\u5219\u65E0\u8BBA\u54CD\u5E94\u4EE3\u7801\u4E3A\u4F55\u503C\uFF0C\u90FD\u4F1A\u6DFB\u52A0\u6307\u5B9A\u7684\u5B57\u6BB5\u3002</p><h3 id="expires" tabindex="-1"><a class="header-anchor" href="#expires" aria-hidden="true">#</a> expires</h3><table><thead><tr><th style="text-align:right;">-</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:right;"><strong>\u8BED\u6CD5</strong></td><td><strong>expires</strong> <code>[modified] time</code>; <br> <strong>expires</strong> <code>epoch</code> |<code>max</code> | <code>off</code>;</td></tr><tr><td style="text-align:right;"><strong>\u9ED8\u8BA4</strong></td><td>expires off;</td></tr><tr><td style="text-align:right;"><strong>\u4E0A\u4E0B\u6587</strong></td><td>http\u3001server\u3001location\u3001location \u4E2D\u7684 if</td></tr></tbody></table><p>\u5982\u679C\u54CD\u5E94\u4EE3\u7801\u7B49\u4E8E 200\u3001201\uFF081.3.10\uFF09\u3001204\u3001206\u3001301\u3001302\u3001303\u3001304 307\uFF081.1.16\u30011.0.13\uFF09\u6216 308\uFF081.13.0\uFF09\uFF0C\u5219\u542F\u7528\u6216\u7981\u7528\u6DFB\u52A0\u6216\u4FEE\u6539 <code>Expires</code> \u548C <code>Cache-Control</code> \u54CD\u5E94\u5934\u5B57\u6BB5\u3002\u53C2\u6570\u53EF\u4EE5\u662F\u6B63\u503C\u6216\u8D1F\u503C\u3002</p><p>\`\`Expires<code>\u5B57\u6BB5\u4E2D\u7684\u65F6\u95F4\u8BA1\u7B97\u4E3A\u6307\u4EE4\u4E2D\u6307\u5B9A\u7684</code>time<code>\u548C\u5F53\u524D\u65F6\u95F4\u7684\u603B\u548C\u3002\u5982\u679C\u4F7F\u7528</code>modified<code>\u53C2\u6570\uFF080.7.0\u30010.6.32\uFF09\uFF0C\u5219\u8BA1\u7B97\u65F6\u95F4\u4E3A\u6587\u4EF6\u4FEE\u6539\u65F6\u95F4\u4E0E\u6307\u4EE4\u4E2D\u6307\u5B9A\u7684</code>time\` \u4E4B\u548C\u3002</p><p>\u53E6\u5916\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>@</code> \u524D\u7F00\u6307\u5B9A\u4E00\u5929\u7684\u65F6\u95F4\uFF080.7.9\u30010.6.34\uFF09\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">expires</span> @15h30m</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><code>epoch</code> \u53C2\u6570\u5BF9\u5E94\u4E8E\u7EDD\u5BF9\u65F6\u95F4 <strong>Thu, 01 Jan 1970 00:00:01 GMT</strong>\u3002<code>Cache-Control</code> \u5B57\u6BB5\u7684\u5185\u5BB9\u53D6\u51B3\u4E8E\u6307\u5B9A\u65F6\u95F4\u7684\u7B26\u53F7\uFF1A</p><ul><li>\u65F6\u95F4\u4E3A\u8D1F\u503C \u2014 <code>Cache-Control:no-cache</code></li><li>\u65F6\u95F4\u4E3A\u6B63\u503C\u6216\u4E3A\u96F6 \u2014 <code>Cache-Control:max-age=t</code>\uFF0C\u5176\u4E2D <code>t</code> \u662F\u6307\u4EE4\u4E2D\u6307\u5B9A\u7684\u65F6\u95F4\uFF0C\u5355\u4F4D\u4E3A\u79D2</li></ul><p><code>max</code> \u53C2\u6570\u5C06 <code>Expires</code> \u7684\u503C\u8BBE\u4E3A <code>Thu, 2037 Dec 23:55:55 GMT</code>\uFF0C<code>Cache-Control</code> \u8BBE\u7F6E\u4E3A 10 \u5E74\u3002</p><p><code>off</code> \u53C2\u6570\u7981\u6B62\u6DFB\u52A0\u6216\u4FEE\u6539 <code>Expires</code> \u548C <code>Cache-Control</code> \u54CD\u5E94\u5934\u5B57\u6BB5\u3002</p><p>\u6700\u540E\u4E00\u4E2A\u53C2\u6570\u503C\u53EF\u4EE5\u5305\u542B\u53D8\u91CF\uFF081.7.9\uFF09\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">map</span> <span class="token variable">$sent_http_content_type</span> <span class="token variable">$expires</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">default</span>         <span class="token boolean">off</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">application/pdf</span> <span class="token number">42d</span></span><span class="token punctuation">;</span>
    ~image/         <span class="token directive"><span class="token keyword">max</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">expires</span> <span class="token variable">$expires</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="\u539F\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u539F\u6587\u6863" aria-hidden="true">#</a> \u539F\u6587\u6863</h2>`,31),h={href:"http://nginx.org/en/docs/http/ngx_http_headers_module.html",target:"_blank",rel:"noopener noreferrer"},u=d("http://nginx.org/en/docs/http/ngx_http_headers_module.html");function g(x,b){const a=n("OutboundLink");return p(),s(r,null,[l,e("p",null,[e("a",h,[u,t(a)])])],64)}var _=c(i,[["render",g]]);export{_ as default};
