import{r as o,c as r,a as s,b as e,w as l,F as c,d as t,e as n,o as i}from"./app.af3e3276.js";import{_ as d}from"./plugin-vue_export-helper.5a098b48.js";const u={},_=t('<h1 id="\u670D\u52A1\u5668\u540D\u79F0" tabindex="-1"><a class="header-anchor" href="#\u670D\u52A1\u5668\u540D\u79F0" aria-hidden="true">#</a> \u670D\u52A1\u5668\u540D\u79F0</h1><ul><li><a href="#%E9%80%9A%E9%85%8D%E7%AC%A6%E5%90%8D%E7%A7%B0">\u901A\u914D\u7B26\u540D\u79F0</a></li><li><a href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%90%8D%E7%A7%B0">\u6B63\u5219\u8868\u8FBE\u5F0F\u540D\u79F0</a></li><li><a href="#%E5%85%B6%E4%BB%96%E5%90%8D%E7%A7%B0">\u5176\u4ED6\u540D\u79F0</a></li><li><a href="#%E5%9B%BD%E9%99%85%E5%8C%96%E5%90%8D%E7%A7%B0">\u56FD\u9645\u5316\u540D\u79F0</a></li></ul>',2),m=n("\u670D\u52A1\u5668\u540D\u79F0\u662F\u4F7F\u7528 "),b={href:"http://nginx.org/en/docs/http/ngx_http_core_module.html#server_name",target:"_blank",rel:"noopener noreferrer"},h=n("server_name"),k=n(" \u6307\u4EE4\u5B9A\u4E49\u7684\uFF0C\u5B83\u786E\u5B9A\u4E86\u54EA\u4E00\u4E2A "),g={href:"http://nginx.org/en/docs/http/ngx_http_core_module.html#server",target:"_blank",rel:"noopener noreferrer"},v=n("server"),x=n(" \u5757\u88AB\u7ED9\u5B9A\u7684\u8BF7\u6C42\u6240\u4F7F\u7528\u3002\u53E6\u8BF7\u53C2\u89C1 "),w=s("a",{href:"nginx%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82"},"nginx \u5982\u4F55\u5904\u7406\u8BF7\u6C42",-1),f=n("\u3002\u53EF\u4EE5\u4F7F\u7528\u7CBE\u786E\u7684\u540D\u79F0\u3001\u901A\u914D\u7B26\u6216\u8005\u6B63\u5219\u8868\u8FBE\u5F0F\u6765\u5B9A\u4E49\u4ED6\u4EEC\uFF1A"),y=t(`<div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span>  example.org  www.example.org</span><span class="token punctuation">;</span>
    ...
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span>  *.example.org</span><span class="token punctuation">;</span>
    ...
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span>  mail.*</span><span class="token punctuation">;</span>
    ...
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span>  ~^(?&lt;user&gt;.+)\\.example\\.net$</span><span class="token punctuation">;</span>
    ...
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>\u5F53\u901A\u8FC7\u540D\u79F0\u641C\u7D22\u865A\u62DF\u670D\u52A1\u5668\u65F6\uFF0C\u5982\u679C\u540D\u79F0\u4E0E\u591A\u4E2A\u6307\u5B9A\u7684\u53D8\u4F53\u5339\u914D\uFF0C\u4F8B\u5982\u901A\u914D\u7B26\u548C\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u5219\u5C06\u6309\u7167\u4F18\u5148\u987A\u5E8F\u9009\u62E9\u7B2C\u4E00\u4E2A\u5339\u914D\u7684\u53D8\u4F53\uFF1A</p><ol><li>\u7CBE\u786E\u7684\u540D\u79F0</li><li>\u4EE5\u661F\u53F7\u5F00\u5934\u7684\u6700\u957F\u7684\u901A\u914D\u7B26\u540D\u79F0\uFF0C\u4F8B\u5982 <code>*.example.org</code></li><li>\u4EE5\u661F\u53F7\u7ED3\u5C3E\u7684\u6700\u957F\u7684\u901A\u914D\u7B26\u540D\u79F0\uFF0C\u4F8B\u5982 <code>mail.*</code></li><li>\u7B2C\u4E00\u4E2A\u5339\u914D\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\uFF08\u6309\u7167\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u51FA\u73B0\u7684\u987A\u5E8F\uFF09</li></ol><h2 id="\u901A\u914D\u7B26\u540D\u79F0" tabindex="-1"><a class="header-anchor" href="#\u901A\u914D\u7B26\u540D\u79F0" aria-hidden="true">#</a> \u901A\u914D\u7B26\u540D\u79F0</h2><p>\u901A\u914D\u7B26\u540D\u79F0\u53EA\u80FD\u5728\u540D\u79F0\u7684\u5F00\u5934\u6216\u8005\u7ED3\u5C3E\u5305\u542B\u4E00\u4E2A\u661F\u53F7\uFF0C\u4E14\u53EA\u80FD\u5728\u70B9\u7684\u8FB9\u754C\u4E0A\u5305\u542B\u661F\u53F7\u3002\u8FD9\u4E9B\u540D\u79F0\u4E3A <code>www.*.example.org</code> \u548C <code>w*.example.org</code> \u90FD\u662F\u65E0\u6548\u7684\u3002\u7136\u800C\uFF0C\u53EF\u4EE5\u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F\u6307\u5B9A\u8FD9\u4E9B\u540D\u79F0\uFF0C\u4F8B\u5982\uFF0C<code>~^www\\..+\\.example\\.org$\u201D</code> \u548C <code>~^w.*\\.example\\.org$</code>\u3002\u661F\u53F7\u53EF\u4EE5\u5339\u914D\u591A\u4E2A\u540D\u79F0\u90E8\u5206\u3002\u540D\u79F0 <code>*.example.org</code> \u4E0D\u4EC5\u5339\u914D\u4E86 <code>www.example.org</code>\uFF0C\u8FD8\u5339\u914D\u4E86 <code>www.sub.example.org</code>\u3002</p><p>\u53EF\u4EE5\u4F7F\u7528 <code>.example.org</code> \u5F62\u5F0F\u7684\u7279\u6B8A\u901A\u914D\u7B26\u540D\u79F0\u6765\u5339\u914D\u786E\u5207\u7684\u540D\u79F0 <code>example.org</code> \u548C \u901A\u914D\u7B26 <code>*.example.org</code>\u3002</p><h2 id="\u6B63\u5219\u8868\u8FBE\u5F0F\u540D\u79F0" tabindex="-1"><a class="header-anchor" href="#\u6B63\u5219\u8868\u8FBE\u5F0F\u540D\u79F0" aria-hidden="true">#</a> \u6B63\u5219\u8868\u8FBE\u5F0F\u540D\u79F0</h2><p>nginx \u4F7F\u7528\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\u4E0E Perl \u7F16\u7A0B\u8BED\u8A00\uFF08PCRE\uFF09\u4F7F\u7528\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\u517C\u5BB9\u3002\u8981\u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u670D\u52A1\u5668\u540D\u79F0\u5FC5\u987B\u4EE5\u6CE2\u6D6A\u7B26\u53F7\u5F00\u5934\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server_name</span>  ~^www\\d+\\.example\\.net$</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u5426\u5219\u5C06\u88AB\u89C6\u4E3A\u786E\u5207\u7684\u540D\u79F0\uFF0C\u6216\u8005\u5982\u679C\u8868\u8FBE\u5F0F\u4E2D\u5305\u542B\u661F\u53F7\uFF0C\u5C06\u88AB\u89C6\u4E3A\u901A\u914D\u7B26\u540D\u79F0\uFF08\u5E76\u4E14\u53EF\u80FD\u662F\u65E0\u6548\u7684\uFF09\u3002\u522B\u5FD8\u4E86\u8BBE\u7F6E <code>^</code> \u548C <code>$</code> \u951A\u70B9\u3002\u5B83\u4EEC\u5728\u8BED\u6CD5\u4E0A\u4E0D\u662F\u5FC5\u987B\u7684\uFF0C\u4F46\u5728\u903B\u8F91\u4E0A\u662F\u9700\u8981\u7684\u3002\u8FD8\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u57DF\u540D\u7684\u70B9\u5E94\u8BE5\u4F7F\u7528\u53CD\u659C\u6760\u8F6C\u4E49\u3002\u6B63\u5219\u8868\u8FBE\u5F0F\u4E2D\u7684 <code>{</code> \u548C <code>}</code> \u5E94\u8BE5\u88AB\u5F15\u53F7\u62EC\u8D77\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server_name</span>  <span class="token string">&quot;~^(?&lt;name&gt;\\w\\d{1,3}+)\\.example\\.net$&quot;</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u5426\u5219 nginx \u5C06\u65E0\u6CD5\u542F\u52A8\u5E76\u4E14\u663E\u793A\u9519\u8BEF\u4FE1\u606F\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>directive &quot;server_name&quot; is not terminated by &quot;;&quot; in ...
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u6B63\u5219\u8868\u8FBE\u5F0F\u540D\u79F0\u6355\u83B7\u5230\u7684\u5185\u5BB9\u53EF\u4EE5\u4F5C\u4E3A\u53D8\u91CF\u4E3A\u540E\u9762\u6240\u7528\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server_name</span>   ~^(www\\.)?(?&lt;domain&gt;.+)$</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">root</span>   /sites/<span class="token variable">$domain</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>PCRE \u5E93\u4F7F\u7528\u4EE5\u4E0B\u8BED\u6CD5\u6355\u83B7\u540D\u79F0\uFF1A</p><ul><li><code>?&lt;name&gt;</code> Perl 5.10 \u517C\u5BB9\u8BED\u6CD5\uFF0C\u81EA PCRE-7.0 \u8D77\u652F\u6301</li><li><code>?&#39;name&#39;</code> Perl 5.10 \u517C\u5BB9\u8BED\u6CD5\uFF0C\u81EA PCRE-7.0 \u8D77\u652F\u6301</li><li><code>?P&lt;name&gt;</code> Python \u517C\u5BB9\u8BED\u6CD5\uFF0C\u81EA PCRE-4.0 \u8D77\u652F\u6301</li></ul><p>\u5982\u679C nginx \u65E0\u6CD5\u542F\u52A8\u5E76\u4E14\u663E\u793A\u9519\u8BEF\u4FE1\u606F\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>pcre_compile() failed: unrecognized character after (?&lt; in ...
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u8BF4\u660E PCRE \u5E93\u6BD4\u8F83\u8001\uFF0C\u5E94\u8BE5\u5C1D\u8BD5\u4F7F\u7528\u8BED\u6CD5 <code>?P&lt;name&gt;</code>\u3002\u6355\u83B7\u4E5F\u53EF\u4EE5\u4F7F\u7528\u6570\u5B57\u5F62\u5F0F\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server_name</span>   ~^(www\\.)?(.+)$</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">root</span>   /sites/<span class="token variable">$2</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u7136\u800C\uFF0C\u8FD9\u79CD\u65B9\u5F0F\u4EC5\u9650\u4E8E\u7B80\u5355\u60C5\u51B5\uFF08\u5982\u4E0A\u6240\u8FF0\uFF09\uFF0C\u56E0\u4E3A\u6570\u5B57\u5F15\u7528\u5BB9\u6613\u88AB\u8986\u76D6\u3002</p><h2 id="\u5176\u4ED6\u540D\u79F0" tabindex="-1"><a class="header-anchor" href="#\u5176\u4ED6\u540D\u79F0" aria-hidden="true">#</a> \u5176\u4ED6\u540D\u79F0</h2><p>\u6709\u4E00\u4E9B\u670D\u52A1\u5668\u540D\u79F0\u9700\u8981\u88AB\u7279\u522B\u5904\u7406\u3002</p>`,24),E=n("\u5982\u679C\u9700\u8981\u5904\u7406\u4E00\u4E2A\u5728\u4E0D\u662F\u9ED8\u8BA4\u7684 "),B={href:"http://nginx.org/en/docs/http/ngx_http_core_module.html#server",target:"_blank",rel:"noopener noreferrer"},A=n("server"),P=n(" \u5757\u4E2D\u7684\u6CA1\u6709 "),q=s("strong",null,"Host",-1),z=n(" \u5934\u5B57\u6BB5\u7684\u8BF7\u6C42\uFF0C\u5E94\u8BE5\u6307\u5B9A\u4E00\u4E2A\u7A7A\u540D\u79F0\uFF1A"),C=t(`<div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span>  example.org  www.example.org  <span class="token string">&quot;&quot;</span></span><span class="token punctuation">;</span>
    ...
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div>`,1),$=n("\u5982\u679C "),D={href:"http://nginx.org/en/docs/http/ngx_http_core_module.html#server",target:"_blank",rel:"noopener noreferrer"},I=n("server"),R=n(" \u5757\u4E2D\u6CA1\u6709\u5B9A\u4E49 "),F={href:"http://nginx.org/en/docs/http/ngx_http_core_module.html#server_name",target:"_blank",rel:"noopener noreferrer"},N=n("server_name"),L=n("\uFF0C\u90A3\u4E48 nginx \u5C06\u4F7F\u7528\u7A7A\u540D\u79F0\u4F5C\u4E3A\u670D\u52A1\u5668\u540D\u3002"),V=t(`<blockquote><p>\u6B64\u60C5\u51B5\u4E0B\uFF0Cnginx \u7684\u7248\u672C\u5230 0.8.48 \u4F7F\u7528\u673A\u5668\u7684\u4E3B\u673A\u540D\u4F5C\u4E3A\u670D\u52A1\u5668\u540D\u79F0\u3002</p></blockquote><p>\u5982\u679C\u670D\u52A1\u5668\u540D\u79F0\u88AB\u5B9A\u4E49\u4E3A <code>$hostname</code>\uFF080.9.4\uFF09\uFF0C\u5219\u4F7F\u7528\u673A\u5668\u7684\u4E3B\u673A\u540D\u3002</p><p>\u5982\u679C\u6709\u4EBA\u4F7F\u7528 IP \u5730\u5740\u800C\u4E0D\u662F\u670D\u52A1\u5668\u540D\u79F0\u6765\u53D1\u51FA\u8BF7\u6C42\uFF0C\u5219 <strong>Host</strong> \u8BF7\u6C42 header \u57DF\u5C06\u5305\u542B IP \u5730\u5740\uFF0C\u53EF\u4EE5\u4F7F\u7528 IP \u5730\u5740\u4F5C\u4E3A\u670D\u52A1\u5668\u540D\u79F0\u6765\u5904\u7406\u8BF7\u6C42\u3002</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span>  example.org
                 www.example.org
                 <span class="token string">&quot;&quot;</span>
                 192.168.1.1</span>
                 <span class="token punctuation">;</span>
    ...
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>\u5728\u6240\u6709\u7684\u670D\u52A1\u5668\u793A\u4F8B\u4E2D\uFF0C\u53EF\u4EE5\u53D1\u73B0\u4E00\u4E2A\u5947\u602A\u7684\u540D\u79F0 <code>_</code>\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span>  default_server</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span>  _</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">return</span>       <span class="token number">444</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u8FD9\u4E2A\u540D\u79F0\u6CA1\u6709\u4EC0\u4E48\u7279\u522B\u4E4B\u5904\uFF0C\u5B83\u53EA\u662F\u4F17\u591A\u65E0\u6548\u57DF\u540D\u4E2D\u7684\u4E00\u4E2A\uFF0C\u5B83\u6C38\u8FDC\u4E0D\u4F1A\u4E0E\u4EFB\u4F55\u771F\u5B9E\u7684\u540D\u79F0\u76F8\u4EA4\u3002\u6B64\u5916\u8FD8\u6709\u5176\u4ED6\u65E0\u6548\u7684\u540D\u79F0\uFF0C\u5982 <code>--</code> \u548C <code>!@#</code> \u4E5F\u662F\u5982\u6B64\u3002</p>`,7),j=n("nginx \u5230 0.6.25 \u7248\u672C\u652F\u6301\u7279\u6B8A\u7684\u540D\u79F0 "),S=s("code",null,"*",-1),H=n("\uFF0C\u8FD9\u5E38\u88AB\u9519\u8BEF\u5730\u7406\u89E3\u4E3A\u6240\u6709\u540D\u79F0\u3002\u5B83\u5E76\u4E0D\u662F\u6240\u6709\u6216\u8005\u901A\u914D\u7B26\u670D\u52A1\u5668\u540D\u79F0\u3002\u76F8\u53CD\uFF0C\u5B83\u7684\u529F\u80FD\u73B0\u5728\u662F\u7531 "),O={href:"http://nginx.org/en/docs/http/ngx_http_core_module.html#server_name_in_redirect",target:"_blank",rel:"noopener noreferrer"},U=n("server_name_in_redirect"),M=n(" \u6307\u4EE4\u63D0\u4F9B\u3002\u73B0\u5728\u4E0D\u63A8\u8350\u4F7F\u7528\u7279\u6B8A\u7684\u540D\u79F0 "),T=s("code",null,"*",-1),G=n("\uFF0C\u5E94\u8BE5\u4F7F\u7528 "),J={href:"http://nginx.org/en/docs/http/ngx_http_core_module.html#server_name_in_redirect",target:"_blank",rel:"noopener noreferrer"},K=n("server_name_in_redirect"),Q=n(" \u6307\u4EE4\u3002\u8BF7\u6CE8\u610F\uFF0C\u65E0\u6CD5\u4F7F\u7528 "),W={href:"http://nginx.org/en/docs/http/ngx_http_core_module.html#server_name",target:"_blank",rel:"noopener noreferrer"},X=n("server_name"),Y=n(" \u6307\u4EE4\u6765\u6307\u5B9A\u6240\u6709\u540D\u79F0\u6216\u8005\u9ED8\u8BA4\u670D\u52A1\u5668\u3002\u8FD9\u662F "),Z={href:"http://nginx.org/en/docs/http/ngx_http_core_module.html#listen",target:"_blank",rel:"noopener noreferrer"},nn=n("listen"),sn=n(" \u6307\u4EE4\u7684\u5C5E\u6027\uFF0C\u800C\u4E0D\u662F "),en={href:"http://nginx.org/en/docs/http/ngx_http_core_module.html#server_name",target:"_blank",rel:"noopener noreferrer"},an=n("server_name"),tn=n(" \u7684\u3002\u8BF7\u53C2\u9605 "),on=n("nginx \u5982\u4F55\u5904\u7406\u8BF7\u6C42"),pn=n("\u3002\u53EF\u4EE5\u5B9A\u4E49\u76D1\u542C "),rn=s("code",null,"*:80",-1),ln=n(" \u548C "),cn=s("code",null,"*:8080",-1),dn=n(" \u7AEF\u53E3\u7684\u670D\u52A1\u5668\uFF0C\u5E76\u6307\u5B9A\u4E00\u4E2A\u4E3A "),un=s("code",null,"*:8080",-1),_n=n(" \u7AEF\u53E3\u7684\u9ED8\u8BA4\u670D\u52A1\u5668\uFF0C\u53E6\u4E00\u4E2A\u4E3A "),mn=s("code",null,"*:80",-1),bn=n(" \u7AEF\u53E3\u7684\u9ED8\u8BA4\u670D\u52A1\u5668\u3002"),hn=t(`<div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">8080</span>  default_server</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span>  example.net</span><span class="token punctuation">;</span>
    ...
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span>  default_server</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">8080</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span>  example.org</span><span class="token punctuation">;</span>
    ...
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="\u56FD\u9645\u5316\u540D\u79F0" tabindex="-1"><a class="header-anchor" href="#\u56FD\u9645\u5316\u540D\u79F0" aria-hidden="true">#</a> \u56FD\u9645\u5316\u540D\u79F0</h2>`,2),kn=n("\u5E94\u4F7F\u7528 "),gn={href:"http://nginx.org/en/docs/http/ngx_http_core_module.html#server_name",target:"_blank",rel:"noopener noreferrer"},vn=n("server_name"),xn=n(" \u6307\u4EE4\u4E2D\u7684ASCII\uFF08Punycode\uFF09\u8868\u793A\u6765\u6307\u5B9A\u56FD\u9645\u5316\u57DF\u540D\uFF08"),wn={href:"https://en.wikipedia.org/wiki/Internationalized_domain_name",target:"_blank",rel:"noopener noreferrer"},fn=n("IDN"),yn=n("\uFF09"),En=t(`<div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span>  xn--e1afmkfd.xn--80akhbyknj4f</span><span class="token punctuation">;</span>  <span class="token comment"># \u043F\u0440\u0438\u043C\u0435\u0440.\u0438\u0441\u043F\u044B\u0442\u0430\u043D\u0438\u0435</span>
    ...
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#\u4F18\u5316" aria-hidden="true">#</a> \u4F18\u5316</h2>`,2),Bn=n("\u786E\u5207\u7684\u540D\u79F0\u3001\u4EE5\u661F\u53F7\u5F00\u5934\u7684\u901A\u914D\u7B26\u540D\u79F0\u548C\u4EE5\u661F\u53F7\u7ED3\u5C3E\u7684\u901A\u914D\u7B26\u540D\u79F0\u88AB\u5B58\u50A8\u5728\u7ED1\u5B9A\u5230\u76D1\u542C\u7AEF\u53E3\u7684\u4E09\u79CD\u54C8\u5E0C\u8868\u4E2D\u3002\u54C8\u5E0C\u8868\u7684\u5927\u5C0F\u53EF\u4EE5\u5728\u914D\u7F6E\u9636\u6BB5\u4F18\u5316\uFF0C\u56E0\u6B64\u53EF\u4EE5\u5728 CPU \u7F13\u5B58\u672A\u547D\u4E2D\u7684\u6700\u4F4E\u60C5\u51B5\u4E0B\u627E\u5230\u540D\u79F0\u3002\u8BBE\u7F6E\u54C8\u5E0C\u8868\u7684\u5177\u4F53\u7EC6\u8282\u5728\u5355\u72EC\u7684 "),An={href:"http://nginx.org/en/docs/hash.html",target:"_blank",rel:"noopener noreferrer"},Pn=n("\u6587\u6863"),qn=n(" \u4E2D\u63D0\u4F9B\u3002"),zn=t(`<p>\u9996\u5148\u641C\u7D22\u786E\u5207\u7684\u540D\u79F0\u54C8\u5E0C\u8868\u3002\u5982\u679C\u4E3A\u627E\u5230\u540D\u79F0\uFF0C\u5219\u4F1A\u641C\u7D22\u4EE5\u661F\u53F7\u5F00\u5934\u7684\u901A\u914D\u7B26\u540D\u79F0\u7684\u54C8\u5E0C\u8868\u3002\u5982\u679C\u8FD8\u662F\u6CA1\u6709\u627E\u5230\u540D\u79F0\uFF0C\u5219\u641C\u7D22\u4EE5\u661F\u53F7\u7ED3\u5C3E\u7684\u901A\u914D\u7B26\u540D\u79F0\u54C8\u5E0C\u3002</p><p>\u641C\u7D22\u901A\u914D\u7B26\u54C8\u5E0C\u8868\u6BD4\u641C\u7D22\u786E\u5207\u540D\u79F0\u7684\u54C8\u5E0C\u8868\u8981\u6162\uFF0C\u56E0\u4E3A\u540D\u79F0\u662F\u901A\u8FC7\u57DF\u90E8\u5206\u641C\u7D22\u7684\u3002\u8BF7\u6CE8\u610F\uFF0C\u7279\u6B8A\u901A\u914D\u7B26\u683C\u5F0F <code>.example.org</code> \u5B58\u50A8\u5728\u901A\u914D\u7B26\u54C8\u5E0C\u8868\u4E2D\uFF0C\u800C\u4E0D\u662F\u786E\u5207\u540D\u79F0\u54C8\u5E0C\u8868\u4E2D\u3002</p><p>\u7531\u4E8E\u6B63\u5219\u8868\u8FBE\u5F0F\u662F\u6309\u987A\u5E8F\u9A8C\u8BC1\u7684\uFF0C\u56E0\u6B64\u662F\u6700\u6162\u7684\u65B9\u6CD5\uFF0C\u5E76\u4E14\u662F\u4E0D\u53EF\u6269\u5C55\u7684\u3002</p><p>\u7531\u4E8E\u8FD9\u4E9B\u539F\u56E0\uFF0C\u6700\u597D\u662F\u5C3D\u53EF\u80FD\u4F7F\u7528\u786E\u5207\u7684\u540D\u79F0\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u6700\u5E38\u89C1\u88AB\u8BF7\u6C42\u7684\u670D\u52A1\u5668\u540D\u79F0\u662F <code>example.org</code> \u548C <code>www.example.org</code>\uFF0C\u5219\u660E\u786E\u5B9A\u4E49\u5B83\u4EEC\u662F\u6700\u6709\u6548\u7684\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span>  example.org  www.example.org  *.example.org</span><span class="token punctuation">;</span>
    ...
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u7B80\u5316\u5F62\u5F0F\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span>  .example.org</span><span class="token punctuation">;</span>
    ...
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div>`,7),Cn=n("\u5982\u679C\u5B9A\u4E49\u4E86\u5927\u91CF\u7684\u670D\u52A1\u5668\u540D\u79F0\uFF0C\u6216\u8005\u5B9A\u4E49\u4E86\u975E\u5E38\u957F\u7684\u670D\u52A1\u5668\u540D\u79F0\uFF0C\u5219\u53EF\u80FD\u9700\u8981\u8C03\u6574 "),$n=s("code",null,"http",-1),Dn=n(" \u7EA7\u522B\u7684 "),In={href:"http://nginx.org/en/docs/http/ngx_http_core_module.html#server_names_hash_max_size",target:"_blank",rel:"noopener noreferrer"},Rn=n("server_names_hash_max_size"),Fn=n(" \u548C "),Nn={href:"http://nginx.org/en/docs/http/ngx_http_core_module.html#server_names_hash_bucket_size",target:"_blank",rel:"noopener noreferrer"},Ln=n("server_names_hash_bucket_size"),Vn=n(" \u6307\u4EE4\u3002"),jn={href:"http://nginx.org/en/docs/http/ngx_http_core_module.html#server_names_hash_bucket_size",target:"_blank",rel:"noopener noreferrer"},Sn=n("server_names_hash_bucket_size"),Hn=n(" \u6307\u4EE4\u7684\u9ED8\u8BA4\u503C\u53EF\u80FD\u7B49\u4E8E 32 \u6216\u8005 64 \u6216\u8005\u5176\u4ED6\u503C\u3002\u5177\u4F53\u53D6\u51B3\u4E8E CPU \u8D85\u9AD8\u901F\u7F13\u5B58\u50A8\u5668\u7EBF\u7684\u5927\u5C0F\u3002\u5982\u679C\u9ED8\u8BA4\u503C\u4E3A 32\uFF0C\u5E76\u4E14\u670D\u52A1\u5668\u540D\u79F0\u5B9A\u4E49\u4E3A "),On=s("code",null,"too.long.server.name.example.org",-1),Un=n("\uFF0C\u5219 nginx \u5C06\u65E0\u6CD5\u542F\u52A8\u5E76\u663E\u793A\u9519\u8BEF\u4FE1\u606F\uFF1A"),Mn=t(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>could not build the server_names_hash,
you should increase server_names_hash_bucket_size: <span class="token number">32</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u6307\u4EE4\u503C\u5E94\u8BE5\u589E\u52A0\u5230 2 \u500D\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server_names_hash_bucket_size</span>  <span class="token number">64</span></span><span class="token punctuation">;</span>
    ...
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u5982\u679C\u5B9A\u4E49\u4E86\u5927\u91CF\u7684\u670D\u52A1\u5668\u540D\u79F0\uFF0C\u5219\u4F1A\u663E\u793A\u53E6\u4E00\u4E2A\u9519\u8BEF\u4FE1\u606F\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>could not build the server_names_hash,
you should increase either server_names_hash_max_size: <span class="token number">512</span>
or server_names_hash_bucket_size: <span class="token number">32</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>`,5),Tn=n("\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u9996\u5148\u5C1D\u8BD5\u5C06 "),Gn={href:"http://nginx.org/en/docs/http/ngx_http_core_module.html#server_names_hash_max_size",target:"_blank",rel:"noopener noreferrer"},Jn=n("server_names_hash_max_size"),Kn=n(" \u8BBE\u7F6E\u4E3A\u63A5\u8FD1\u670D\u52A1\u5668\u540D\u79F0\u6570\u91CF\u7684\u6570\u503C\u3002\u5982\u679C\u8FD9\u6837\u6CA1\u6709\u7528\uFF0C\u6216\u8005\u5982\u679C nginx \u7684\u542F\u52A8\u65F6\u95F4\u957F\u7684\u65E0\u6CD5\u5FCD\u53D7\uFF0C\u90A3\u4E48\u8BF7\u5C1D\u8BD5\u589E\u52A0 "),Qn={href:"http://nginx.org/en/docs/http/ngx_http_core_module.html#server_names_hash_bucket_size",target:"_blank",rel:"noopener noreferrer"},Wn=n("server_names_hash_bucket_size"),Xn=n(" \u7684\u503C\u3002"),Yn=t('<p>\u5982\u679C\u670D\u52A1\u5668\u662F\u76D1\u542C\u7AEF\u53E3\u7684\u552F\u4E00\u670D\u52A1\u5668\uFF0C\u90A3\u4E48 nginx \u5C06\u4E0D\u4F1A\u9A8C\u8BC1\u670D\u52A1\u5668\u540D\u79F0\uFF08\u5E76\u4E14\u4E0D\u4F1A\u4E3A\u76D1\u542C\u7AEF\u53E3\u5EFA\u7ACB\u54C8\u5E0C\u8868\uFF09\u3002\u4F46\u662F\uFF0C\u6709\u4E00\u4E2A\u4F8B\u5916\u3002\u5982\u679C\u670D\u52A1\u5668\u540D\u79F0\u5177\u6709\u6355\u83B7\uFF08captures\uFF09\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u5219 nginx \u5FC5\u987B\u6267\u884C\u8868\u8FBE\u5F0F\u624D\u80FD\u83B7\u53D6\u6355\u83B7\u3002</p><h2 id="\u517C\u5BB9\u6027" tabindex="-1"><a class="header-anchor" href="#\u517C\u5BB9\u6027" aria-hidden="true">#</a> \u517C\u5BB9\u6027</h2><ul><li>\u81EA 0.9.4 \u8D77\uFF0C\u652F\u6301\u7279\u6B8A\u7684\u670D\u52A1\u5668\u540D\u79F0 <code>$hostname</code>\u3002</li><li>\u81EA 0.8.48 \u8D77\uFF0C\u9ED8\u8BA4\u670D\u52A1\u5668\u540D\u79F0\u7684\u503C\u4E3A\u7A7A\u540D\u79F0 <code>&quot;&quot;</code>\u3002</li><li>\u81EA 0.8.25 \u5176\uFF0C\u5DF2\u7ECF\u652F\u6301\u547D\u540D\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\u670D\u52A1\u5668\u540D\u79F0\u6355\u83B7\u3002</li><li>\u81EA 0.7.40 \u8D77\uFF0C\u652F\u6301\u6B63\u5219\u8868\u8FBE\u5F0F\u540D\u79F0\u6355\u83B7\u3002</li><li>\u81EA 0.7.12 \u8D77\uFF0C\u652F\u6301\u7A7A\u7684\u670D\u52A1\u5668\u540D\u79F0 <code>&quot;&quot;</code>\u3002</li><li>\u81EA 0.6.25 \u8D77\uFF0C\u652F\u6301\u4F7F\u7528\u901A\u914D\u7B26\u670D\u52A1\u5668\u540D\u79F0\u548C\u6B63\u5219\u8868\u8FBE\u5F0F\u4F5C\u4E3A\u7B2C\u4E00\u670D\u52A1\u5668\u540D\u79F0\u3002</li><li>\u81EA 0.6.7 \u8D77\uFF0C\u652F\u6301\u6B63\u5219\u8868\u8FBE\u5F0F\u670D\u52A1\u540D\u79F0\u3002</li><li>\u81EA 0.6.0 \u8D77\uFF0C\u652F\u6301\u7C7B\u4F3C <code>example.*</code> \u7684\u901A\u914D\u7B26\u3002</li><li>\u81EA 0.3.18 \u8D77\uFF0C\u652F\u6301\u7C7B\u4F3C <code>.example.org</code>\u3002</li><li>\u81EA 0.1.13 \u8D77\uFF0C\u652F\u6301\u7C7B\u4F3C <code>*.example.org</code> \u7684\u901A\u914D\u7B26\u3002</li></ul><p>\u7531 <strong>Igor Sysoev</strong> \u4E66\u5199\uFF0C\u7531 <strong>Brian Mercer</strong> \u7F16\u8F91</p><h2 id="\u539F\u6587" tabindex="-1"><a class="header-anchor" href="#\u539F\u6587" aria-hidden="true">#</a> \u539F\u6587</h2>',5),Zn={href:"http://nginx.org/en/docs/http/server_names.html",target:"_blank",rel:"noopener noreferrer"},ns=n("http://nginx.org/en/docs/http/server_names.html");function ss(es,as){const a=o("OutboundLink"),p=o("RouterLink");return i(),r(c,null,[_,s("p",null,[m,s("a",b,[h,e(a)]),k,s("a",g,[v,e(a)]),x,w,f]),y,s("p",null,[E,s("a",B,[A,e(a)]),P,q,z]),C,s("p",null,[$,s("a",D,[I,e(a)]),R,s("a",F,[N,e(a)]),L]),V,s("p",null,[j,S,H,s("a",O,[U,e(a)]),M,T,G,s("a",J,[K,e(a)]),Q,s("a",W,[X,e(a)]),Y,s("a",Z,[nn,e(a)]),sn,s("a",en,[an,e(a)]),tn,e(p,{to:"/%E4%BB%8B%E7%BB%8D/nginx%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82.html"},{default:l(()=>[on]),_:1}),pn,rn,ln,cn,dn,un,_n,mn,bn]),hn,s("p",null,[kn,s("a",gn,[vn,e(a)]),xn,s("a",wn,[fn,e(a)]),yn]),En,s("p",null,[Bn,s("a",An,[Pn,e(a)]),qn]),zn,s("p",null,[Cn,$n,Dn,s("a",In,[Rn,e(a)]),Fn,s("a",Nn,[Ln,e(a)]),Vn,s("a",jn,[Sn,e(a)]),Hn,On,Un]),Mn,s("p",null,[Tn,s("a",Gn,[Jn,e(a)]),Kn,s("a",Qn,[Wn,e(a)]),Xn]),Yn,s("ul",null,[s("li",null,[s("a",Zn,[ns,e(a)])])])],64)}var ps=d(u,[["render",ss]]);export{ps as default};
