import{r,c as i,a as e,b as n,w as a,F as d,d as l,e as t,o as c}from"./app.af3e3276.js";import{_ as p}from"./plugin-vue_export-helper.5a098b48.js";const g={},h=l(`<h1 id="ngx-http-core-module" tabindex="-1"><a class="header-anchor" href="#ngx-http-core-module" aria-hidden="true">#</a> ngx_http_core_module</h1><ul><li><a href="#directives">\u6307\u4EE4</a><ul><li><a href="#absolute_redirect">absolute_redirect</a></li><li><a href="#aio">aio</a></li><li><a href="#aio_write">aio_write</a></li><li><a href="#alias">alias</a></li><li><a href="#chunked_transfer_encoding">chunked_transfer_encoding</a></li><li><a href="#client_body_buffer_size">client_body_buffer_size</a></li><li><a href="#client_body_in_file_only">client_body_in_file_only</a></li><li><a href="#client_body_in_single_buffer">client_body_in_single_buffer</a></li><li><a href="#client_body_temp_path">client_body_temp_path</a></li><li><a href="#client_body_timeout">client_body_timeout</a></li><li><a href="#client_header_buffer_size">client_header_buffer_size</a></li><li><a href="#client_header_timeout">client_header_timeout</a></li><li><a href="#client_max_body_size">client_max_body_size</a></li><li><a href="#connection_pool_size">connection_pool_size</a></li><li><a href="#default_type">default_type</a></li><li><a href="#directio">directio</a></li><li><a href="#directio_alignment">directio_alignment</a></li><li><a href="#disable_symlinks">disable_symlinks</a></li><li><a href="#error_page">error_page</a></li><li><a href="#etag">etag</a></li><li><a href="#http">http</a></li><li><a href="#if_modified_since">if_modified_since</a></li><li><a href="#ignore_invalid_headers">ignore_invalid_headers</a></li><li><a href="#internal">internal</a></li><li><a href="#keepalive_disable">keepalive_disable</a></li><li><a href="#keepalive_requests">keepalive_requests</a></li><li><a href="#keepalive_timeout">keepalive_timeout</a></li><li><a href="#large_client_header_buffers">large_client_header_buffers</a></li><li><a href="#limit_except">limit_except</a></li><li><a href="#limit_rate">limit_rate</a></li><li><a href="#limit_rate_after">limit_rate_after</a></li><li><a href="#lingering_close">lingering_close</a></li><li><a href="#lingering_time">lingering_time</a></li><li><a href="#lingering_timeout">lingering_timeout</a></li><li><a href="#listen">listen</a></li><li><a href="#location">location</a></li><li><a href="#log_not_found">log_not_found</a></li><li><a href="#log_subrequest">log_subrequest</a></li><li><a href="#max_ranges">max_ranges</a></li><li><a href="#merge_slashes">merge_slashes</a></li><li><a href="#msie_padding">msie_padding</a></li><li><a href="#msie_refresh">msie_refresh</a></li><li><a href="#open_file_cache">open_file_cache</a></li><li><a href="#open_file_cache_errors">open_file_cache_errors</a></li><li><a href="#open_file_cache_min_uses">open_file_cache_min_uses</a></li><li><a href="#open_file_cache_valid">open_file_cache_valid</a></li><li><a href="#output_buffers">output_buffers</a></li><li><a href="#port_in_redirect">port_in_redirect</a></li><li><a href="#postpone_output">postpone_output</a></li><li><a href="#read_ahead">read_ahead</a></li><li><a href="#recursive_error_pages">recursive_error_pages</a></li><li><a href="#request_pool_size">request_pool_size</a></li><li><a href="#reset_timedout_connection">reset_timedout_connection</a></li><li><a href="#resolver">resolver</a></li><li><a href="#resolver_timeout">resolver_timeout</a></li><li><a href="#root">root</a></li><li><a href="#satisfy">satisfy</a></li><li><a href="#send_lowat">send_lowat</a></li><li><a href="#send_timeout">send_timeout</a></li><li><a href="#sendfile">sendfile</a></li><li><a href="#sendfile_max_chunk">sendfile_max_chunk</a></li><li><a href="#server">server</a></li><li><a href="#server_name">server_name</a></li><li><a href="#server_name_in_redirect">server_name_in_redirect</a></li><li><a href="#server_names_hash_bucket_size">server_names_hash_bucket_size</a></li><li><a href="#server_names_hash_max_size">server_names_hash_max_size</a></li><li><a href="#server_tokens">server_tokens</a></li><li><a href="#tcp_nodelay">tcp_nodelay</a></li><li><a href="#tcp_nopush">tcp_nopush</a></li><li><a href="#try_files">try_files</a></li><li><a href="#types">types</a></li><li><a href="#types_hash_bucket_size">types_hash_bucket_size</a></li><li><a href="#types_hash_max_size">types_hash_max_size</a></li><li><a href="#underscores_in_headers">underscores_in_headers</a></li><li><a href="#variables_hash_bucket_size">variables_hash_bucket_size</a></li><li><a href="#variables_hash_max_size">variables_hash_max_size</a></li></ul></li><li><a href="#embedded_variables">\u5185\u5D4C\u53D8\u91CF</a></li></ul><p><a id="directives"></a></p><h2 id="\u6307\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u6307\u4EE4" aria-hidden="true">#</a> \u6307\u4EE4</h2><h3 id="absolute-redirect" tabindex="-1"><a class="header-anchor" href="#absolute-redirect" aria-hidden="true">#</a> absolute_redirect</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>absolute_redirect</strong> <code>on</code> | <code>off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">absolute_redirect on;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr><tr><td style="text-align:left;"><strong>\u63D0\u793A</strong></td><td style="text-align:left;">\u8BE5\u6307\u4EE4\u5728 1.11.8 \u7248\u672C\u4E2D\u51FA\u73B0</td></tr></tbody></table><p>\u5982\u679C\u7981\u7528\uFF0Cnginx \u53D1\u51FA\u7684\u91CD\u5B9A\u5411\u5C06\u662F\u76F8\u5BF9\u7684\u3002</p><p>\u53E6\u8BF7\u53C2\u9605 <a href="#server_name_in_redirect">server_name_in_redirect</a> \u548C <a href="#port_in_redirect">port_in_redirect</a> \u6307\u4EE4\u3002</p><h3 id="aio" tabindex="-1"><a class="header-anchor" href="#aio" aria-hidden="true">#</a> aio</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>aio</strong> <code>on</code> | <code>off</code> | <code>threads[=pool]</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">aio off;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr><tr><td style="text-align:left;"><strong>\u63D0\u793A</strong></td><td style="text-align:left;">\u8BE5\u6307\u4EE4\u5728 0.8.11 \u7248\u672C\u4E2D\u51FA\u73B0</td></tr></tbody></table><p>\u542F\u7528\u6216\u7981\u7528\u5728 FreeBSD \u548C Linux \u4E0A\u4F7F\u7528\u5F02\u6B65\u6587\u4EF6 I/O\uFF08AIO\uFF09\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /video/</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">aio</span>            <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">output_buffers</span> <span class="token number">1</span> <span class="token number">64k</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u5728 FreeBSD \u4E0A\uFF0CAIO \u4ECE FreeBSD 4.3 \u5F00\u59CB\u53EF\u7528\u3002\u5728 FreeBSD 11.0 \u4E4B\u524D\uFF0C\u53EF\u4EE5\u5C06 AIO \u9759\u6001\u94FE\u63A5\u5230\u5185\u6838\u4E2D\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code>options VFS_AIO
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u6216\u4F5C\u4E3A\u4E00\u4E2A\u5185\u6838\u53EF\u52A0\u8F7D\u6A21\u5757\u52A8\u6001\u52A0\u8F7D\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code>kldload aio
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u5728 Linux \u4E0A\uFF0CAIO \u4ECE\u5185\u6838\u7248\u672C\u4E3A 2.6.22 \u5F00\u59CB\u53EF\u7528\u3002\u6B64\u5916\uFF0C\u6709\u5FC5\u8981\u542F\u7528 <a href="#directio">directio</a>\uFF0C\u5426\u5219\u8BFB\u53D6\u5C06\u88AB\u963B\u585E\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /video/</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">aio</span>            <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">directio</span>       <span class="token number">512</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">output_buffers</span> <span class="token number">1</span> <span class="token number">128k</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u5728 Linux \u4E0A\uFF0C<a href="#directio">directio</a> \u53EA\u80FD\u7528\u4E8E\u8BFB\u53D6 512 \u5B57\u8282\u8FB9\u754C\u5BF9\u9F50\u7684\u5757\uFF08\u6216 XFS 4K\uFF09\u3002\u6587\u4EF6\u672A\u5BF9\u9F50\u7684\u672B\u7AEF\u4EE5\u963B\u585E\u6A21\u5F0F\u8BFB\u53D6\u3002\u5BF9\u4E8E\u5B57\u8282\u8303\u56F4\u8BF7\u6C42\u548C\u4E0D\u662F\u4ECE\u6587\u4EF6\u5F00\u5934\u5F00\u59CB\u7684 FLV \u8BF7\u6C42\u4E5F\u662F\u5982\u6B64\uFF1A\u5728\u6587\u4EF6\u7684\u5F00\u5934\u548C\u7ED3\u5C3E\u8BFB\u53D6\u672A\u5BF9\u9F50\u7684\u6570\u636E\u5C06\u88AB\u963B\u585E\u3002</p><p>\u5F53\u5728 Linux \u4E0A\u542F\u7528 AIO \u548C <a href="#sendfile">sendfile</a> \u65F6\uFF0CAIO \u7528\u4E8E\u5927\u4E8E\u6216\u7B49\u4E8E <a href="#directio">directio</a> \u6307\u4EE4\u6307\u5B9A\u5927\u5C0F\u7684\u6587\u4EF6\uFF0C\u800C <a href="#sendfile">sendfile</a> \u7528\u4E8E\u8F83\u5C0F\u7684\u6587\u4EF6\uFF08\u7981\u7528 <a href="#directio">directio</a> \u65F6\u4E5F\u662F\u5982\u6B64\uFF09\u3002</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /video/</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">sendfile</span>       <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">aio</span>            <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">directio</span>       <span class="token number">8m</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u6700\u540E\uFF0C\u53EF\u4EE5\u4F7F\u7528\u591A\u7EBF\u7A0B\uFF081.7.11\uFF09\u8BFB\u53D6\u548C<a href="#sendfile">\u53D1\u9001</a>\u6587\u4EF6\uFF0C\u4E0D\u4F1A\u963B\u585E\u5DE5\u4F5C\u8FDB\u7A0B\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /video/</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">sendfile</span>       <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">aio</span>            threads</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u8BFB\u53D6\u548C\u53D1\u9001\u6587\u4EF6\u64CD\u4F5C\u88AB\u5378\u8F7D\u5230\u6307\u5B9A<a href="#thread_pool">\u6C60</a>\u4E2D\u7684\u7EBF\u7A0B\u3002\u5982\u679C\u7701\u7565\u6C60\u540D\u79F0\uFF0C\u5219\u4F7F\u7528\u540D\u79F0\u4E3A <code>default</code> \u7684\u6C60\u3002\u6C60\u540D\u4E5F\u53EF\u4EE5\u7528\u53D8\u91CF\u8BBE\u7F6E\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">aio</span> threads=pool<span class="token variable">$disk</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>`,25),_=t("\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u591A\u7EBF\u7A0B\u662F\u7981\u7528\u72B6\u6001\uFF0C\u5B83\u5E94\u8BE5\u4F7F\u7528 "),u=e("code",null,"--with-threads",-1),f=t(" \u914D\u7F6E\u53C2\u6570\u542F\u7528\u3002\u76EE\u524D\uFF0C\u591A\u7EBF\u7A0B\u4EC5\u4E0E "),b={href:"http://nginx.org/en/docs/events.html#epoll",target:"_blank",rel:"noopener noreferrer"},x=t("epoll"),y=t("\u3001"),m={href:"http://nginx.org/en/docs/events.html#kqueue",target:"_blank",rel:"noopener noreferrer"},k=t("kqueue"),v=t(" \u548C "),E={href:"http://nginx.org/en/docs/events.html#eventport",target:"_blank",rel:"noopener noreferrer"},w=t("eventport"),A=t(" \u65B9\u5F0F\u517C\u5BB9\u3002\u4EC5\u5728 Linux \u4E0A\u652F\u6301\u591A\u7EBF\u7A0B\u53D1\u9001\u6587\u4EF6\u3002"),z=l(`<p>\u53E6\u8BF7\u53C2\u89C1 <a href="#sendfile">sendfile</a> \u6307\u4EE4\u3002</p><h3 id="aio-write" tabindex="-1"><a class="header-anchor" href="#aio-write" aria-hidden="true">#</a> aio_write</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>aio_write</strong> <code>on</code> | <code>off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">aio_write off;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr><tr><td style="text-align:left;"><strong>\u63D0\u793A</strong></td><td style="text-align:left;">\u8BE5\u6307\u4EE4\u5728 1.9.13 \u7248\u672C\u4E2D\u51FA\u73B0</td></tr></tbody></table><p>\u5982\u679C\u542F\u7528 <a href="#aio">aio</a>\uFF0C\u5219\u6307\u5B9A\u662F\u5426\u5199\u5165\u6587\u4EF6\u3002\u76EE\u524D\uFF0C\u8FD9\u4EC5\u5728\u4F7F\u7528 aio \u7EBF\u7A0B\u65F6\u6709\u6548\uFF0C\u5E76\u4E14\u4EC5\u9650\u4E8E\u5C06\u4ECE\u4EE3\u7406\u670D\u52A1\u5668\u63A5\u6536\u7684\u6570\u636E\u5199\u5165\u4E34\u65F6\u6587\u4EF6\u3002</p><h3 id="alias" tabindex="-1"><a class="header-anchor" href="#alias" aria-hidden="true">#</a> alias</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>alias</strong> <code>path</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">\u2014\u2014</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">location</td></tr></tbody></table><p>\u5B9A\u4E49\u6307\u5B9A location \u7684\u66FF\u6362\u3002\u4F8B\u5982\uFF0C\u4F7F\u7528\u4EE5\u4E0B\u914D\u7F6E</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /i/</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">alias</span> /data/w3/images/</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>/i/top.gif</code> \u7684\u8BF7\u6C42\uFF0C\u5C06\u53D1\u9001 <code>/data/w3/images/top.gif</code> \u6587\u4EF6\u3002</p><p><code>path</code> \u503C\u53EF\u4EE5\u5305\u542B\u53D8\u91CF\uFF0C\u9664 <code>$document_root</code> \u548C <code>$realpath_root</code> \u5916\u3002</p><p>\u5982\u679C\u5728\u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F\u5B9A\u4E49\u7684 location \u5185\u4F7F\u7528\u4E86\u522B\u540D\uFF0C\u90A3\u4E48\u8FD9\u79CD\u6B63\u5219\u8868\u8FBE\u5F0F\u5E94\u8BE5\u5305\u542B\u6355\u83B7\uFF0C\u5E76\u4E14\u522B\u540D\u5E94\u8BE5\u5F15\u7528\u8FD9\u4E9B\u6355\u83B7\uFF080.7.40\uFF09\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> ~ ^/users/(.+\\.(?:gif|jpe?g|png))$</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">alias</span> /data/w3/images/<span class="token variable">$1</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u5F53 location \u4E0E\u6307\u4EE4\u503C\u7684\u6700\u540E\u4E00\u90E8\u5206\u5339\u914D\u65F6\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /images/</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">alias</span> /data/w3/images/</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u66F4\u597D\u7684\u65B9\u5F0F\u662F\u4F7F\u7528 <a href="#root">root</a> \u6307\u4EE4\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /images/</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">root</span> /data/w3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="chunked-transfer-encoding" tabindex="-1"><a class="header-anchor" href="#chunked-transfer-encoding" aria-hidden="true">#</a> chunked_transfer_encoding</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>chunked_transfer_encoding</strong> <code>on</code> | <code>off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">chunked_transfer_encoding on;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u5141\u8BB8\u5728 HTTP/1.1 \u4E2D\u7981\u7528\u5206\u5757\u4F20\u8F93\u7F16\u7801\u3002\u5728\u4F7F\u7528\u7684\u8F6F\u4EF6\u672A\u80FD\u652F\u6301\u5206\u5757\u7F16\u7801\u65F6\u5B83\u53EF\u80FD\u4F1A\u6D3E\u4E0A\u7528\u573A\u3002</p><h3 id="client-body-buffer-size" tabindex="-1"><a class="header-anchor" href="#client-body-buffer-size" aria-hidden="true">#</a> client_body_buffer_size</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>client_body_buffer_size</strong> <code>size</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">client_body_buffer_size 8k</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u8BBE\u7F6E\u8BFB\u53D6\u5BA2\u6237\u7AEF\u8BF7\u6C42\u4F53\u7684\u7F13\u51B2\u533A\u5927\u5C0F\u3002\u5982\u679C\u8BF7\u6C42\u4F53\u5927\u4E8E\u7F13\u51B2\u533A\uFF0C\u5219\u6574\u4E2A\u4F53\u6216\u4EC5\u5C06\u5176\u90E8\u5206\u5199\u5165<a href="#client_body_temp_path">\u4E34\u65F6\u6587\u4EF6</a>\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u7F13\u51B2\u533A\u5927\u5C0F\u7B49\u4E8E\u4E24\u4E2A\u5185\u5B58\u9875\u3002\u5728 x86\u3001\u5176\u4ED6 32 \u4F4D\u5E73\u53F0\u548C x86-64 \u4E0A\u662F 8K\u3002\u5728\u5176\u4ED6 64 \u4F4D\u5E73\u53F0\u4E0A\u901A\u5E38\u4E3A 16K\u3002</p><h3 id="client-body-in-file-only" tabindex="-1"><a class="header-anchor" href="#client-body-in-file-only" aria-hidden="true">#</a> client_body_in_file_only</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>client_body_in_file_only</strong> <code>on</code> | <code>clean</code> | <code>off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">client_body_in_file_only off;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table>`,24),q=t("\u786E\u5B9A nginx \u662F\u5426\u5E94\u5C06\u6574\u4E2A\u5BA2\u6237\u7AEF\u8BF7\u6C42\u4F53\u4FDD\u5B58\u5230\u6587\u4EF6\u4E2D\u3002\u53EF\u4EE5\u5728\u8C03\u8BD5\u671F\u95F4\u6216\u4F7F\u7528 "),$=e("code",null,"$request_body_file",-1),S=t(" \u53D8\u91CF\u6216\u6A21\u5757 "),I=t("ngx_http_perl_module"),F=t(" \u7684 "),D=t("$r->request_body_file"),P=t(" \u65B9\u6CD5\u65F6\u4F7F\u7528\u6B64\u6307\u4EE4\u3002"),T=l(`<p>\u5F53\u8BBE\u7F6E\u4E3A <code>on</code> \u503C\u65F6\uFF0C\u4E34\u65F6\u6587\u4EF6\u5728\u8BF7\u6C42\u5904\u7406\u540E\u4E0D\u4F1A\u88AB\u5220\u9664\u3002</p><p>\u503C <code>clean</code> \u4F1A\u5C06\u8BF7\u6C42\u5904\u7406\u540E\u5269\u4E0B\u7684\u4E34\u65F6\u6587\u4EF6\u5220\u9664\u3002</p><h3 id="client-body-in-single-buffer" tabindex="-1"><a class="header-anchor" href="#client-body-in-single-buffer" aria-hidden="true">#</a> client_body_in_single_buffer</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>client_body_in_single_buffer</strong> <code>on</code> | <code>off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">client_body_in_single_buffer off;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u786E\u5B9A nginx \u662F\u5426\u5E94\u5C06\u6574\u4E2A\u5BA2\u6237\u7AEF\u8BF7\u6C42\u4F53\u4FDD\u5B58\u5728\u5355\u4E2A\u7F13\u51B2\u533A\u4E2D\u3002\u5728\u4F7F\u7528 <code>$request_body</code> \u53D8\u91CF\u65F6\uFF0C\u5EFA\u8BAE\u4F7F\u7528\u8BE5\u6307\u4EE4\uFF0C\u7528\u6765\u4FDD\u5B58\u6D89\u53CA\u7684\u590D\u5236\u64CD\u4F5C\u6B21\u6570\u3002</p><h3 id="client-body-temp-path" tabindex="-1"><a class="header-anchor" href="#client-body-temp-path" aria-hidden="true">#</a> client_body_temp_path</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>client_body_temp_path</strong> <code>path [level1 [level2 [level3]]]</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">client_body_temp_path client_body_temp;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u5B9A\u4E49\u7528\u4E8E\u5B58\u50A8\u6301\u6709\u5BA2\u6237\u7AEF\u8BF7\u6C42\u4E3B\u4F53\u7684\u4E34\u65F6\u6587\u4EF6\u7684\u76EE\u5F55\u3002\u6700\u591A\u53EF\u4EE5\u5728\u6307\u5B9A\u76EE\u5F55\u4E0B\u4F7F\u7528\u4E09\u7EA7\u5B50\u76EE\u5F55\u5C42\u6B21\u7ED3\u6784\u3002\u4F8B\u5982\u4EE5\u4E0B\u914D\u7F6E</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">client_body_temp_path</span> /spool/nginx/client_temp <span class="token number">1</span> <span class="token number">2</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u4E34\u65F6\u6587\u4EF6\u7684\u8DEF\u5F84\u53EF\u4EE5\u5982\u4E0B\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code>/spool/nginx/client_temp/7/45/00000123457
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="client-body-timeout" tabindex="-1"><a class="header-anchor" href="#client-body-timeout" aria-hidden="true">#</a> client_body_timeout</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>client_body_timeout</strong> <code>time</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">client_body_timeout 60s;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u5B9A\u4E49\u8BFB\u53D6\u5BA2\u6237\u7AEF\u8BF7\u6C42\u6B63\u6587\u7684\u8D85\u65F6\u65F6\u95F4\u3002\u8D85\u65F6\u8BBE\u7F6E\u4EC5\u662F\u5728\u4E24\u4E2A\u8FDE\u7EED\u8BFB\u64CD\u4F5C\u4E4B\u95F4\u7684\u65F6\u95F4\u95F4\u9694\uFF0C\u800C\u4E0D\u662F\u6574\u4E2A\u8BF7\u6C42\u4F53\u7684\u4F20\u8F93\u8FC7\u7A0B\u3002\u5982\u679C\u5BA2\u6237\u7AEF\u5728\u6B64\u65F6\u95F4\u5185\u6CA1\u6709\u53D1\u9001\u4EFB\u4F55\u5185\u5BB9\uFF0C\u5219\u4F1A\u5C06 408\uFF08\u8BF7\u6C42\u8D85\u65F6\uFF09\u9519\u8BEF\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF\u3002</p><h3 id="client-header-buffer-size" tabindex="-1"><a class="header-anchor" href="#client-header-buffer-size" aria-hidden="true">#</a> client_header_buffer_size</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>client_header_buffer_size</strong> <code>size</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">client_header_buffer_size 1k;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server</td></tr></tbody></table><p>\u8BBE\u7F6E\u8BFB\u53D6\u5BA2\u6237\u7AEF\u8BF7\u6C42\u5934\u7684\u7F13\u51B2\u533A\u5927\u5C0F\u3002\u5BF9\u4E8E\u5927\u591A\u6570\u8BF7\u6C42\uFF0C1K \u5B57\u8282\u7684\u7F13\u51B2\u533A\u5C31\u8DB3\u591F\u4E86\u3002\u4F46\u662F\uFF0C\u5982\u679C\u8BF7\u6C42\u4E2D\u5305\u542B\u957F cookie\uFF0C\u6216\u8005\u6765\u81EA WAP \u5BA2\u6237\u7AEF\uFF0C\u5219\u53EF\u80FD 1K \u662F\u4E0D\u9002\u7528\u7684\u3002\u5982\u679C\u8BF7\u6C42\u884C\u6216\u8BF7\u6C42\u5934\u57DF\u4E0D\u9002\u5408\u6B64\u7F13\u51B2\u533A\uFF0C\u5219\u4F1A\u5206\u914D\u7531 <a href="#large_client_header_buffers">large_client_header_buffers</a> \u6307\u4EE4\u914D\u7F6E\u7684\u8F83\u5927\u7F13\u51B2\u533A\u3002</p><h3 id="client-header-timeout" tabindex="-1"><a class="header-anchor" href="#client-header-timeout" aria-hidden="true">#</a> client_header_timeout</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>client_header_timeout</strong> <code>time</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">client_header_timeout 60s;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server</td></tr></tbody></table><p>\u5B9A\u4E49\u8BFB\u53D6\u5BA2\u6237\u7AEF\u8BF7\u6C42\u5934\u7684\u8D85\u65F6\u65F6\u95F4\u3002\u5982\u679C\u5BA2\u6237\u7AEF\u5728\u8FD9\u6BB5\u65F6\u95F4\u5185\u6CA1\u6709\u4F20\u8F93\u6574\u4E2A\u62A5\u5934\uFF0C\u5219\u5C06 408\uFF08\u8BF7\u6C42\u8D85\u65F6\uFF09\u9519\u8BEF\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF\u3002</p><h3 id="client-max-body-size" tabindex="-1"><a class="header-anchor" href="#client-max-body-size" aria-hidden="true">#</a> client_max_body_size</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>client_header_timeout</strong> <code>size</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">client_max_body_size 1m;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u5728 <strong>Content-Length</strong> \u8BF7\u6C42\u5934\u57DF\u4E2D\u6307\u5B9A\u5BA2\u6237\u7AEF\u8BF7\u6C42\u4F53\u7684\u6700\u5927\u5141\u8BB8\u5927\u5C0F\u3002\u5982\u679C\u8BF7\u6C42\u7684\u5927\u5C0F\u8D85\u8FC7\u914D\u7F6E\u503C\uFF0C\u5219\u5C06 413 \uFF08\u8BF7\u6C42\u5B9E\u4F53\u8FC7\u5927\uFF09\u9519\u8BEF\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF\u3002\u8BF7\u6CE8\u610F\uFF0C\u6D4F\u89C8\u5668\u65E0\u6CD5\u6B63\u786E\u663E\u793A\u6B64\u9519\u8BEF\u3002\u5C06 <code>size</code> \u8BBE\u7F6E\u4E3A 0 \u5C06\u7981\u7528\u68C0\u67E5\u5BA2\u6237\u7AEF\u8BF7\u6C42\u6B63\u6587\u5927\u5C0F\u3002</p><h3 id="connection-pool-size" tabindex="-1"><a class="header-anchor" href="#connection-pool-size" aria-hidden="true">#</a> connection_pool_size</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>connection_pool_size</strong> <code>size</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">connection_pool_size 256</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server</td></tr></tbody></table><p>\u5141\u8BB8\u7CBE\u786E\u8C03\u6574\u6BCF\u4E2A\u8FDE\u63A5\u7684\u5185\u5B58\u5206\u914D\u3002\u8BE5\u6307\u4EE4\u5BF9\u6027\u80FD\u5F71\u54CD\u6700\u5C0F\uFF0C\u4E00\u822C\u4E0D\u5EFA\u8BAE\u4F7F\u7528\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C32 \u4F4D\u5E73\u53F0\u4E0A\u7684\u5927\u5C0F\u4E3A 256 \u5B57\u8282\uFF0C64 \u4F4D\u5E73\u53F0\u4E0A\u4E3A 512 \u5B57\u8282\u3002</p><blockquote><p>\u5728 1.9.8 \u7248\u672C\u4E4B\u524D\uFF0C\u6240\u6709\u5E73\u53F0\u4E0A\u7684\u9ED8\u8BA4\u503C\u90FD\u4E3A 256\u3002</p></blockquote><h3 id="default-type" tabindex="-1"><a class="header-anchor" href="#default-type" aria-hidden="true">#</a> default_type</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>default_type</strong> <code>mime-type</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">default_type text/plain;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u5B9A\u4E49\u54CD\u5E94\u7684\u9ED8\u8BA4 MIME \u7C7B\u578B\u3002\u53EF\u4EE5\u4F7F\u7528 <a href="#types">types</a> \u6307\u4EE4\u5BF9 MIME \u7C7B\u578B\u7684\u6587\u4EF6\u6269\u5C55\u540D\u8FDB\u884C\u6620\u5C04\u3002</p><h3 id="directio" tabindex="-1"><a class="header-anchor" href="#directio" aria-hidden="true">#</a> directio</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>directio</strong> <code>size</code> | <code>off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">directio off;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u5F00\u542F\u5F53\u8BFB\u53D6\u5927\u4E8E\u6216\u7B49\u4E8E\u6307\u5B9A\u5927\u5C0F\u7684\u6587\u4EF6\u65F6\uFF0C\u4F7F\u7528 <code>O_DIRECT</code> \u6807\u5FD7\uFF08FreeBSD\u3001Linux\uFF09\u3001<code>F_NOCACHE</code> \u6807\u5FD7\uFF08macOS\uFF09\u6216 <code>directio()</code> \u51FD\u6570\uFF08Solaris\uFF09\u3002\u8BE5\u6307\u4EE4\u81EA\u52A8\u7981\u7528\uFF080.7.15\uFF09\u7ED9\u5B9A\u8BF7\u6C42\u4F7F\u7528\u7684 <a href="#sendfile">sendfile</a>\u3002\u5B83\u53EF\u4EE5\u7528\u4E8E\u670D\u52A1\u5927\u6587\u4EF6\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">directio</span> <span class="token number">4m</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u6216\u5F53\u5728 Linux \u4E0A\u4F7F\u7528 <a href="#aio">aio</a> \u65F6\u3002</p><h3 id="directio-alignment" tabindex="-1"><a class="header-anchor" href="#directio-alignment" aria-hidden="true">#</a> directio_alignment</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>directio_alignment</strong> <code>size</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">directio_alignment 512;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr><tr><td style="text-align:left;"><strong>\u63D0\u793A</strong></td><td style="text-align:left;">\u8BE5\u6307\u4EE4\u5728 0.8.11 \u7248\u672C\u4E2D\u51FA\u73B0</td></tr></tbody></table><p>\u8BBE\u7F6E <a href="#directio">directio</a> \u7684\u5BF9\u9F50\u65B9\u5F0F\u3002\u5728\u5927\u591A\u6570\u60C5\u51B5\u4E0B\uFF0C512 \u5B57\u8282\u7684\u5BF9\u9F50\u5C31\u8DB3\u591F\u4E86\u3002\u4F46\u662F\uFF0C\u5728 Linux \u4E0B\u4F7F\u7528 XFS \u65F6\uFF0C\u9700\u8981\u589E\u52A0\u5230 4K\u3002</p><h3 id="disable-symlinks" tabindex="-1"><a class="header-anchor" href="#disable-symlinks" aria-hidden="true">#</a> disable_symlinks</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>disable_symlinks</strong> <code>off</code>; <br> <strong>disable_symlinks on</strong> | <code>if_not_owner [from=part]</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">disable_symlinks off;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr><tr><td style="text-align:left;"><strong>\u63D0\u793A</strong></td><td style="text-align:left;">\u8BE5\u6307\u4EE4\u5728 1.1.15 \u7248\u672C\u4E2D\u51FA\u73B0</td></tr></tbody></table><p>\u786E\u5B9A\u6253\u5F00\u6587\u4EF6\u65F6\u5E94\u5982\u4F55\u5904\u7406\u7B26\u53F7\u94FE\u63A5\uFF1A</p><ul><li><p><code>off</code></p><p>\u5141\u8BB8\u8DEF\u5F84\u540D\u4E2D\u7684\u7B26\u53F7\u94FE\u63A5\u7684\uFF0C\u4E0D\u6267\u884C\u68C0\u67E5\u3002\u8FD9\u662F\u9ED8\u8BA4\u884C\u4E3A\u3002</p></li><li><p><code>on</code></p><p>\u5982\u679C\u8DEF\u5F84\u540D\u5B58\u5728\u662F\u7B26\u53F7\u94FE\u63A5\u7684\u7EC4\u4EF6\uFF0C\u5219\u62D2\u7EDD\u5BF9\u6587\u4EF6\u7684\u8BBF\u95EE\u3002</p></li><li><p><code>if_not_owner</code></p><p>\u5982\u679C\u8DEF\u5F84\u540D\u5B58\u5728\u662F\u7B26\u53F7\u94FE\u63A5\u7684\u7EC4\u4EF6\uFF0C\u5E76\u4E14\u94FE\u63A5\u6307\u5411\u7684\u94FE\u63A5\u548C\u5BF9\u8C61\u4E3A\u4E0D\u540C\u6240\u6709\u8005\uFF0C\u5219\u62D2\u7EDD\u8BBF\u95EE\u6587\u4EF6\u3002</p></li><li><p><code>from=part</code></p><p>\u5F53\u68C0\u67E5\u7B26\u53F7\u94FE\u63A5\uFF08\u53C2\u6570 <code>on</code> \u548C <code>if_not_owner</code>\uFF09\u65F6\uFF0C\u901A\u5E38\u4F1A\u68C0\u67E5\u8DEF\u5F84\u540D\u7684\u6240\u6709\u7EC4\u4EF6\u3002\u53EF\u4EE5\u901A\u8FC7\u53E6\u5916\u6307\u5B9A <code>from=part</code> \u53C2\u6570\u6765\u907F\u514D\u68C0\u67E5\u8DEF\u5F84\u540D\u7684\u521D\u59CB\u90E8\u5206\u4E2D\u7684\u7B26\u53F7\u94FE\u63A5\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u53EA\u80FD\u4ECE\u6307\u5B9A\u7684\u521D\u59CB\u90E8\u5206\u540E\u9762\u7684\u8DEF\u5F84\u540D\u7EC4\u4EF6\u68C0\u67E5\u7B26\u53F7\u94FE\u63A5\u3002\u5982\u679C\u8BE5\u503C\u4E0D\u662F\u68C0\u67E5\u7684\u8DEF\u5F84\u540D\u7684\u521D\u59CB\u90E8\u5206\uFF0C\u5219\u4F1A\u68C0\u67E5\u6574\u4E2A\u8DEF\u5F84\u540D\uFF0C\u76F8\u5F53\u4E8E\u6CA1\u6709\u6307\u5B9A\u6B64\u53C2\u6570\u3002\u5982\u679C\u8BE5\u503C\u4E0E\u6574\u4E2A\u6587\u4EF6\u540D\u5339\u914D\uFF0C\u5219\u4E0D\u4F1A\u68C0\u67E5\u7B26\u53F7\u94FE\u63A5\u3002\u53C2\u6570\u503C\u53EF\u4EE5\u5305\u542B\u53D8\u91CF\u3002</p></li></ul><p>\u4F8B\u5982\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">disable_symlinks</span> <span class="token boolean">on</span> from=<span class="token variable">$document_root</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u6B64\u6307\u4EE4\u4EC5\u9002\u7528\u4E8E\u5177\u6709 <code>openat()</code> \u548C <code>fstatat()</code> \u63A5\u53E3\u7684\u7CFB\u7EDF\u3002\u8FD9\u6837\u7684\u7CFB\u7EDF\u5305\u62EC\u73B0\u4EE3\u7248\u672C\u7684FreeBSD\u3001Linux \u548C Solaris\u3002</p><p>\u53C2\u6570 <code>on</code> \u548C <code>if_not_owner</code> \u589E\u52A0\u4E86\u5904\u7406\u5F00\u9500\u3002</p><blockquote><p>\u5728\u4E0D\u652F\u6301\u6253\u5F00\u76EE\u5F55\u4EC5\u7528\u4E8E\u641C\u7D22\u7684\u7CFB\u7EDF\u4E0A\uFF0C\u8981\u4F7F\u7528\u8FD9\u4E9B\u53C2\u6570\uFF0C\u9700\u8981 worker \u8FDB\u7A0B\u5BF9\u6240\u6709\u6B63\u5728\u68C0\u67E5\u7684\u76EE\u5F55\u5177\u6709\u8BFB\u53D6\u6743\u9650\u3002</p></blockquote>`,47),O=t("ngx_http_autoindex_module"),C=t("\u3001"),L=t("ngx_http_random_index_module"),R=t(" \u548C "),N=t("ngx_http_dav_module"),B=t(" \u6A21\u5757\u76EE\u524D\u5FFD\u7565\u6B64\u6307\u4EE4\u3002"),U=l(`<h3 id="error-page" tabindex="-1"><a class="header-anchor" href="#error-page" aria-hidden="true">#</a> error_page</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>error_page</strong> <code>code ... [=[response]] uri</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">\u2014\u2014</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location\u3001location \u4E2D\u7684 if</td></tr></tbody></table><p>\u5B9A\u4E49\u9488\u5BF9\u6307\u5B9A\u9519\u8BEF\u663E\u793A\u7684 URI\u3002<code>uri</code> \u503C\u53EF\u4EE5\u5305\u542B\u53D8\u91CF\u3002</p><p>\u4F8B\u5982\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">error_page</span> <span class="token number">404</span>             /404.html</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">error_page</span> <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> /50x.html</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u8FD9\u4F1A\u5BFC\u81F4\u5BA2\u6237\u7AEF\u8BF7\u6C42\u65B9\u6CD5\u66F4\u6539\u4E3A <code>GET</code>\uFF0C\u5185\u90E8\u91CD\u5B9A\u5411\u5230\u6307\u5B9A\u7684 <code>uri</code>\uFF08\u9664 <code>GET</code> \u548C <code>HEAD</code> \u4E4B\u5916\u7684\u6240\u6709\u65B9\u6CD5\uFF09\u3002</p><p>\u6B64\u5916\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>=response</code> \u8BED\u6CD5\u5C06\u4FEE\u6539\u54CD\u5E94\u4EE3\u7801\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">error_page</span> <span class="token number">404</span> =200 /empty.gif</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u5982\u679C\u9519\u8BEF\u54CD\u5E94\u662F\u7531\u4EE3\u7406\u670D\u52A1\u5668\u6216 FastCGI/uwsgi/SCGI \u670D\u52A1\u5668\u5904\u7406\uFF0C\u5E76\u4E14\u670D\u52A1\u5668\u53EF\u80FD\u8FD4\u56DE\u4E0D\u540C\u7684\u54CD\u5E94\u4EE3\u7801\uFF08\u4F8B\u5982\uFF0C200\u3001302\u3001401 \u6216 404\uFF09\uFF0C\u5219\u53EF\u4EE5\u4F7F\u7528\u5176\u8FD4\u56DE\u7684\u4EE3\u7801\u8FDB\u884C\u54CD\u5E94\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">error_page</span> <span class="token number">404</span> = /404.php</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u5982\u679C\u5728\u5185\u90E8\u91CD\u5B9A\u5411\u65F6\u4E0D\u9700\u8981\u66F4\u6539 URI \u548C\u65B9\u6CD5\uFF0C\u5219\u53EF\u4EE5\u5C06\u9519\u8BEF\u5904\u7406\u4F20\u9012\u7ED9\u4E00\u4E2A\u547D\u540D\u4E86\u7684 location\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">error_page</span> <span class="token number">404</span> = @fallback</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> @fallback</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span> http://backend</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>\u5982\u679C <code>uri</code> \u5904\u7406\u5BFC\u81F4\u53D1\u751F\u9519\u8BEF\uFF0C\u6700\u540E\u53D1\u751F\u9519\u8BEF\u7684\u72B6\u6001\u4EE3\u7801\u5C06\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF\u3002</p></blockquote><p>\u4E5F\u53EF\u4EE5\u4F7F\u7528 URL \u91CD\u5B9A\u5411\u8FDB\u884C\u9519\u8BEF\u5904\u7406\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">error_page</span> <span class="token number">403</span>      http://example.com/forbidden.html</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">error_page</span> <span class="token number">404</span> =301 http://example.com/notfound.html</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u9ED8\u8BA4\u5C06\u54CD\u5E94\u4EE3\u7801 302 \u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF\u3002\u5B83\u53EA\u80FD\u662F\u91CD\u5B9A\u5411\u72B6\u6001\u4EE3\u7801\u5176\u4E2D\u4E4B\u4E00\uFF08301\u3001302\u3001303\u3001307 \u548C 308\uFF09\u3002</p><blockquote><p>\u5728 1.1.16 \u548C 1.0.13 \u7248\u672C\u4E4B\u524D\uFF0C\u4EE3\u7801 307 \u6CA1\u6709\u88AB\u89C6\u4E3A\u91CD\u5B9A\u5411\u3002</p></blockquote><blockquote><p>\u76F4\u5230 1.13.0 \u7248\u672C\uFF0C\u4EE3\u7801 308 \u624D\u88AB\u89C6\u4E3A\u91CD\u5B9A\u5411\u3002</p></blockquote><p>\u5F53\u4E14\u4EC5\u5F53\u6CA1\u6709\u5728\u5F53\u524D\u7EA7\u522B\u4E0A\u5B9A\u4E49 error_page \u6307\u4EE4\u65F6\uFF0C\u6307\u4EE4\u624D\u4ECE\u4E0A\u4E00\u7EA7\u7EE7\u627F\u8FD9\u4E9B\u7279\u6027\u3002</p><h3 id="etag" tabindex="-1"><a class="header-anchor" href="#etag" aria-hidden="true">#</a> etag</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>etag</strong> <code>on</code> | <code>off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">etag on;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr><tr><td style="text-align:left;"><strong>\u63D0\u793A</strong></td><td style="text-align:left;">\u8BE5\u6307\u4EE4\u5728 1.3.3 \u7248\u672C\u4E2D\u51FA\u73B0</td></tr></tbody></table><p>\u542F\u7528\u6216\u7981\u7528\u81EA\u52A8\u751F\u6210\u9759\u6001\u8D44\u6E90 <strong>ETag</strong> \u54CD\u5E94\u5934\u5B57\u6BB5\u3002</p><h3 id="http" tabindex="-1"><a class="header-anchor" href="#http" aria-hidden="true">#</a> http</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>http</strong> <code>{ ... }</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">\u2014\u2014</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">main</td></tr></tbody></table><p>\u63D0\u4F9B\u6307\u5B9A HTTP server \u6307\u4EE4\u7684\u914D\u7F6E\u6587\u4EF6\u4E0A\u4E0B\u6587\u3002</p><h3 id="if-modified-since" tabindex="-1"><a class="header-anchor" href="#if-modified-since" aria-hidden="true">#</a> if_modified_since</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>if_modified_since</strong> <code>off</code> | <code>exact</code> | <code>before</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">if_modified_since exact;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr><tr><td style="text-align:left;"><strong>\u63D0\u793A</strong></td><td style="text-align:left;">\u8BE5\u6307\u4EE4\u5728 0.7.24 \u7248\u672C\u4E2D\u51FA\u73B0</td></tr></tbody></table><p>\u6307\u5B9A\u5982\u4F55\u5C06\u54CD\u5E94\u7684\u4FEE\u6539\u65F6\u95F4\u4E0E <strong>If-Modified-Since</strong> \u8BF7\u6C42\u5934\u5B57\u6BB5\u4E2D\u7684\u65F6\u95F4\u8FDB\u884C\u6BD4\u8F83\uFF1A</p><ul><li><p><code>off</code></p><p>\u5FFD\u7565 <strong>If-Modified-Since</strong> \u8BF7\u6C42\u5934\u5B57\u6BB5\uFF080.7.34\uFF09</p></li><li><p><code>exact</code></p><p>\u5B8C\u5168\u5339\u914D</p></li><li><p><code>before</code></p><p>\u54CD\u5E94\u7684\u4FEE\u6539\u65F6\u95F4\u5C0F\u4E8E\u6216\u7B49\u4E8E <strong>If-Modified-Since</strong> \u8BF7\u6C42\u5934\u5B57\u6BB5\u4E2D\u7684\u65F6\u95F4</p></li></ul><h3 id="ignore-invalid-headers" tabindex="-1"><a class="header-anchor" href="#ignore-invalid-headers" aria-hidden="true">#</a> ignore_invalid_headers</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>ignore_invalid_headers</strong> <code>on</code> | <code>off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">ignore_invalid_headers on;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server</td></tr></tbody></table><p>\u63A7\u5236\u662F\u5426\u5E94\u5FFD\u7565\u5177\u6709\u65E0\u6548\u540D\u79F0\u7684\u5934\u5B57\u6BB5\u3002\u6709\u6548\u540D\u79F0\u7531\u82F1\u6587\u5B57\u6BCD\u3001\u6570\u5B57\u3001\u8FDE\u5B57\u7B26\u6216\u4E0B\u5212\u7EBF\u7EC4\u6210\uFF08\u7531 <a href="#underscores_in_headers">underscores_in_headers</a> \u6307\u4EE4\u63A7\u5236\uFF09\u3002</p><p>\u5982\u679C\u5728 <a href="#server">server</a> \u7EA7\u522B\u6307\u5B9A\u4E86\u8BE5\u6307\u4EE4\uFF0C\u5219\u5176\u503C\u4EC5\u5728 server \u4E3A\u9ED8\u8BA4 server \u65F6\u4F7F\u7528\u3002\u6307\u5B9A\u7684\u503C\u4E5F\u9002\u7528\u4E8E\u76D1\u542C\u76F8\u540C\u5730\u5740\u548C\u7AEF\u53E3\u7684\u6240\u6709\u865A\u62DF\u670D\u52A1\u5668\u3002</p><h3 id="internal" tabindex="-1"><a class="header-anchor" href="#internal" aria-hidden="true">#</a> internal</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>internal</strong>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">\u2014\u2014</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">location</td></tr></tbody></table><p>\u6307\u5B9A\u7ED9\u5B9A\u7684 location \u53EA\u80FD\u7528\u4E8E\u5185\u90E8\u8BF7\u6C42\u3002\u5BF9\u4E8E\u5916\u90E8\u8BF7\u6C42\uFF0C\u8FD4\u56DE\u5BA2\u6237\u7AEF\u9519\u8BEF 404\uFF08\u672A\u627E\u5230\uFF09\u3002\u5185\u90E8\u8BF7\u6C42\u5982\u4E0B\uFF1A</p>`,36),K=e("li",null,[t("\u8BF7\u6C42\u7531 "),e("a",{href:"#error_page"},"error_page"),t("\u3001"),e("a",{href:"#index"},"index"),t("\u3001"),e("a",{href:"#random_index"},"random_index"),t(" \u548C "),e("a",{href:"#try_files"},"try_files"),t(" \u6307\u4EE4\u91CD\u5B9A\u5411")],-1),H=e("li",null,[t("\u6765 upstream server \u7684 "),e("strong",null,"X-Accel-Redirect"),t(" \u54CD\u5E94\u5934\u5B57\u6BB5\u91CD\u5B9A\u5411\u7684\u8BF7\u6C42")],-1),M=t("\u7531 "),V=t("ngx_http_ssi_module"),G=t(" \u6A21\u5757\u7684 "),X=e("code",null,"include virtual",-1),Y=t(" \u547D\u4EE4\u3001"),j=t("ngx_http_addition_module"),W=t(" \u6A21\u5757\u6307\u4EE4\u548C "),Q=t("auth_request"),J=t(" \u548C "),Z=t("mirror"),tt=t(" \u6307\u4EE4\u7EC4\u6210\u7684\u5B50\u8BF7\u6C42"),et=t("\u7531 "),nt=t("rewrite"),st=t(" \u6307\u4EE4\u66F4\u6539\u7684\u8BF7\u6C42"),at=l(`<p>\u793A\u4F8B\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">error_page</span> <span class="token number">404</span> /404.html</span><span class="token punctuation">;</span>

<span class="token directive"><span class="token keyword">location</span> /404.html</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">internal</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>\u6BCF\u4E2A\u8BF7\u6C42\u9650\u5236 10 \u4E2A\u5185\u90E8\u91CD\u5B9A\u5411\uFF0C\u4EE5\u9632\u6B62\u4E0D\u6B63\u786E\u914D\u7F6E\u5F15\u53D1\u7684\u8BF7\u6C42\u5904\u7406\u6B7B\u5FAA\u73AF\u3002\u5982\u679C\u8FBE\u5230\u6B64\u9650\u5236\uFF0C\u5219\u8FD4\u56DE\u9519\u8BEF 500\uFF08\u5185\u90E8\u670D\u52A1\u5668\u9519\u8BEF\uFF09\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u53EF\u4EE5\u5728\u9519\u8BEF\u65E5\u5FD7\u4E2D\u770B\u5230 <code>rewrite or internal redirection cycle</code> \u6D88\u606F\u3002</p></blockquote><h3 id="keepalive-disable" tabindex="-1"><a class="header-anchor" href="#keepalive-disable" aria-hidden="true">#</a> keepalive_disable</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>keepalive_disable</strong> <code>none</code> | <code>browser ...</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">keepalive_disable msie6;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u7981\u7528\u4E0E\u884C\u4E3A\u5F02\u5E38\u7684\u6D4F\u89C8\u5668\u4FDD\u6301\u8FDE\u63A5\u3002<code>browser</code> \u53C2\u6570\u6307\u5B9A\u54EA\u4E9B\u6D4F\u89C8\u5668\u5C06\u53D7\u5230\u5F71\u54CD\u3002\u4E00\u65E6\u63A5\u6536\u5230 POST \u8BF7\u6C42\uFF0C\u503C <code>msie6</code> \u5C06\u7981\u7528\u4E0E\u65E7\u7248\u672C MSIE \u4FDD\u6301\u8FDE\u63A5\u3002\u503C <code>safari</code> \u7981\u7528\u4E0E macOS \u548C\u7C7B\u4F3C MacOS \u7684\u64CD\u4F5C\u7CFB\u7EDF\u4E0A\u7684 Safari \u548C Safari \u6D4F\u89C8\u5668\u4FDD\u6301\u8FDE\u63A5\u3002\u503C <code>none</code> \u542F\u7528\u4E0E\u6240\u6709\u6D4F\u89C8\u5668\u4FDD\u6301\u8FDE\u63A5\u3002</p><blockquote><p>\u5728 1.1.18 \u7248\u672C\u4E4B\u524D\uFF0C\u503C <code>safari</code> \u5339\u914D\u6240\u6709\u64CD\u4F5C\u7CFB\u7EDF\u4E0A\u7684\u6240\u6709 Safari \u548C\u7C7B Safari \u6D4F\u89C8\u5668\uFF0C\u5E76\u4E14\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u7981\u7528\u4E0E\u5B83\u4EEC\u4FDD\u6301\u8FDE\u63A5\u3002</p></blockquote><h3 id="keepalive-requests" tabindex="-1"><a class="header-anchor" href="#keepalive-requests" aria-hidden="true">#</a> keepalive_requests</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>keepalive_requests</strong> <code>number</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">keepalive_requests 100;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr><tr><td style="text-align:left;"><strong>\u63D0\u793A</strong></td><td style="text-align:left;">\u8BE5\u6307\u4EE4\u5728 0.8.0 \u7248\u672C\u4E2D\u51FA\u73B0</td></tr></tbody></table><p>\u8BBE\u7F6E\u901A\u8FC7\u4E00\u4E2A\u4FDD\u6301\u6D3B\u52A8\uFF08keep-alive\uFF09\u8FDE\u63A5\u53EF\u4EE5\u63D0\u4F9B\u7684\u6700\u5927\u8BF7\u6C42\u6570\u3002\u5728\u53D1\u51FA\u7684\u8BF7\u6C42\u8FBE\u5230\u6700\u5927\u6570\u91CF\u540E\uFF0C\u8FDE\u63A5\u5C06\u88AB\u5173\u95ED\u3002</p><h3 id="keepalive-timeout" tabindex="-1"><a class="header-anchor" href="#keepalive-timeout" aria-hidden="true">#</a> keepalive_timeout</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>keepalive_timeout</strong> <code>timeout</code> <code>[header_timeout]</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">keepalive_timeout 75s;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u7B2C\u4E00\u4E2A\u53C2\u6570\u8BBE\u7F6E\u4E00\u4E2A\u8D85\u65F6\u65F6\u95F4\uFF0Ckeep-alive \u5BA2\u6237\u7AEF\u8FDE\u63A5\u5C06\u5728\u670D\u52A1\u7AEF\u4FDD\u6301\u6253\u5F00\u72B6\u6001\u3002\u96F6\u503C\u5C06\u7981\u7528 keep-alive \u5BA2\u6237\u7AEF\u8FDE\u63A5\u3002\u53EF\u9009\u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570\u5728 <strong>Keep-Alive: timeout=<code>time</code></strong> \u54CD\u5E94\u5934\u57DF\u4E2D\u8BBE\u7F6E\u4E00\u4E2A\u503C\u3002\u4E24\u4E2A\u53C2\u6570\u53EF\u80FD\u4E0D\u540C\u3002</p><p>Mozilla \u548C Konqueror \u4F1A\u8BC6\u522B **Keep-Alive: timeout=<code>time</code> \u5934\u5B57\u6BB5\u3002MSIE \u5728\u5927\u7EA6\u5728 60 \u79D2\u949F\u5185\u81EA\u884C\u5173\u95ED keep-alive \u8FDE\u63A5\u3002</p><h3 id="large-client-header-buffers" tabindex="-1"><a class="header-anchor" href="#large-client-header-buffers" aria-hidden="true">#</a> large_client_header_buffers</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>large_client_header_buffers</strong> <code>number size</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">arge_client_header_buffers 4 8k;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server</td></tr></tbody></table><p>\u8BBE\u7F6E\u7528\u4E8E\u8BFB\u53D6\u5927\u5BA2\u6237\u7AEF\u8BF7\u6C42\u5934\u7684\u7F13\u51B2\u533A\u7684\u6700\u5927 <code>number</code>\uFF08\u6570\u91CF\uFF09\u548C <code>size</code>\uFF08\u5927\u5C0F\uFF09\u3002\u8BF7\u6C42\u884C\u4E0D\u80FD\u8D85\u8FC7\u4E00\u4E2A\u7F13\u51B2\u533A\u7684\u5927\u5C0F\uFF0C\u5426\u5219\u5C06\u8FD4\u56DE 414\uFF08\u8BF7\u6C42 URI \u592A\u957F\uFF09\u9519\u8BEF\u7ED9\u5BA2\u6237\u7AEF\u3002\u8BF7\u6C42\u5934\u5B57\u6BB5\u4E5F\u4E0D\u80FD\u8D85\u8FC7\u4E00\u4E2A\u7F13\u51B2\u533A\u7684\u5927\u5C0F\uFF0C\u5426\u5219\u5C06\u8FD4\u56DE 400\uFF08\u9519\u8BEF\u8BF7\u6C42\uFF09\u9519\u8BEF\u7ED9\u5BA2\u6237\u7AEF\u3002\u7F13\u51B2\u533A\u53EA\u80FD\u6309\u9700\u5206\u914D\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u7F13\u51B2\u533A\u5927\u5C0F\u7B49\u4E8E 8K \u5B57\u8282\u3002\u5982\u679C\u5728\u8BF7\u6C42\u5904\u7406\u7ED3\u675F\u4E4B\u540E\uFF0C\u8FDE\u63A5\u88AB\u8F6C\u6362\u4E3A keep-alive \u72B6\u6001\uFF0C\u8FD9\u4E9B\u7F13\u51B2\u533A\u5C06\u88AB\u91CA\u653E\u3002</p><h3 id="limit-except" tabindex="-1"><a class="header-anchor" href="#limit-except" aria-hidden="true">#</a> limit_except</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>limit_except</strong> <code>method ... { ... }</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">\u2014\u2014</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">location</td></tr></tbody></table>`,19),lt=l("\u9650\u5236\u7ED9\u5B9A\u7684 location \u5185\u5141\u8BB8\u7684 HTTP \u65B9\u6CD5\u3002<code>method</code> \u53C2\u6570\u53EF\u4EE5\u662F\u4EE5\u4E0B\u4E4B\u4E00\uFF1A<code>GET</code>\u3001<code>HEAD</code>\u3001<code>POST</code>\u3001<code>PUT</code>\u3001<code>DELETE</code>\u3001<code>MKCOL</code>\u3001<code>COPY</code>\u3001<code>MOVE</code>\u3001<code>OPTIONS</code>\u3001<code>PROPFIND</code>\u3001<code>PROPPATCH</code>\u3001<code>LOCK</code>\u3001<code>UNLOCK</code> \u6216 <code>PATCH</code>\u3002\u5141\u8BB8 <code>GET</code> \u65B9\u6CD5\u4E5F\u5C06\u4F7F\u5F97 <code>HEAD</code>\u65B9\u6CD5\u88AB\u5141\u8BB8\u3002\u53EF\u4EE5\u4F7F\u7528 ",35),ot=t("ngx_http_access_module"),rt=t(" \u548C "),it=t("ngx_http_auth_basic_module"),dt=t(" \u6A21\u5757\u6307\u4EE4\u6765\u9650\u5236\u5BF9\u5176\u4ED6\u65B9\u6CD5\u7684\u8BBF\u95EE\uFF1A"),ct=l(`<div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">limit_except</span> GET</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">allow</span> 192.168.1.0/32</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">deny</span>  all</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u8BF7\u6CE8\u610F\uFF0C\u8FD9\u5C06\u9650\u5236\u8BBF\u95EE\u9664 <code>GET</code> \u548C <code>HEAD</code> \u4E4B\u5916\u7684\u6240\u6709\u65B9\u6CD5\u3002</p><h3 id="limit-rate" tabindex="-1"><a class="header-anchor" href="#limit-rate" aria-hidden="true">#</a> limit_rate</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>limit_rate</strong> <code>rate</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">limit_rate 0;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location\u3001location \u4E2D\u7684 if</td></tr></tbody></table><p>\u9650\u5236\u5BA2\u6237\u7AEF\u7684\u54CD\u5E94\u4F20\u8F93\u901F\u7387\u3002<code>rate</code> \u4EE5\u5B57\u8282/\u79D2\u4E3A\u5355\u4F4D\u3002\u96F6\u503C\u5C06\u7981\u7528\u901F\u7387\u9650\u5236\u3002\u9650\u5236\u8BBE\u7F6E\u662F\u9488\u5BF9\u6BCF\u4E2A\u8BF7\u6C42\uFF0C\u56E0\u6B64\u5982\u679C\u5BA2\u6237\u7AEF\u540C\u65F6\u6253\u5F00\u4E24\u4E2A\u8FDE\u63A5\uFF0C\u5219\u6574\u4F53\u901F\u7387\u5C06\u662F\u6307\u5B9A\u9650\u5236\u7684\u4E24\u500D\u3002</p><p>\u4E5F\u53EF\u4EE5\u5728 <code>$limit_rate</code> \u53D8\u91CF\u4E2D\u8BBE\u7F6E\u901F\u7387\u9650\u5236\u3002\u6839\u636E\u67D0\u4E9B\u6761\u4EF6\u6765\u9650\u5236\u901F\u7387\u53EF\u80FD\u4F1A\u6709\u7528\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>

    <span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$slow</span>)</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">set</span> <span class="token variable">$limit_rate</span> <span class="token number">4k</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    ...
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div>`,7),pt=t("\u4E5F\u53EF\u4EE5\u5728\u4EE3\u7406\u670D\u52A1\u5668\u54CD\u5E94\u7684 "),gt=e("strong",null,"X-Accel-Limit-Rate",-1),ht=t(" \u5934\u5B57\u6BB5\u4E2D\u8BBE\u7F6E\u901F\u7387\u9650\u5236\u3002\u53EF\u4EE5\u4F7F\u7528 "),_t=t("proxy_ignore_headers"),ut=t("\u3001"),ft=t("fastcgi_ignore_headers"),bt=t("\u3001"),xt=t("uwsgi_ignore_headers"),yt=t(" \u548C "),mt=t("scgi_ignore_headers"),kt=t(" \u6307\u4EE4\u7981\u7528\u6B64\u529F\u80FD\u3002"),vt=l('<h3 id="lingering-time" tabindex="-1"><a class="header-anchor" href="#lingering-time" aria-hidden="true">#</a> lingering_time</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>lingering_time</strong> <code>time</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">lingering_time 30s;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table>',2),Et=t("\u5F53 "),wt=t("lingering_close"),At=t(" \u751F\u6548\u65F6\uFF0C\u8BE5\u6307\u4EE4\u6307\u5B9A nginx \u5904\u7406\uFF08\u8BFB\u53D6\u548C\u5FFD\u7565\uFF09\u6765\u81EA\u5BA2\u6237\u7AEF\u7684\u989D\u5916\u6570\u636E\u7684\u6700\u957F\u65F6\u95F4\u3002\u4E4B\u540E\uFF0C\u8FDE\u63A5\u5C06\u88AB\u5173\u95ED\uFF0C\u5373\u4F7F\u8FD8\u6709\u66F4\u591A\u7684\u6570\u636E\u3002"),zt=l('<h3 id="lingering-timeout" tabindex="-1"><a class="header-anchor" href="#lingering-timeout" aria-hidden="true">#</a> lingering_timeout</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>lingering_timeout</strong> <code>time</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">lingering_timeout 5s;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table>',2),qt=t("\u5F53 "),$t=t("lingering_close"),St=t(" \u751F\u6548\u65F6\uFF0C\u8BE5\u6307\u4EE4\u6307\u5B9A\u66F4\u591A\u7684\u5BA2\u6237\u7AEF\u6570\u636E\u5230\u8FBE\u7684\u6700\u957F\u7B49\u5F85\u65F6\u95F4\u3002\u5982\u679C\u5728\u6B64\u671F\u95F4\u672A\u6536\u5230\u6570\u636E\uFF0C\u5219\u5173\u95ED\u8FDE\u63A5\u3002\u5426\u5219\uFF0C\u8BFB\u53D6\u548C\u5FFD\u7565\u6570\u636E\uFF0Cnginx \u518D\u6B21\u5F00\u59CB\u7B49\u5F85\u66F4\u591A\u7684\u6570\u636E\u3002"),It=e("strong",null,"wait-read-ignore",-1),Ft=t(" \u5FAA\u73AF\u88AB\u91CD\u590D\uFF0C\u4F46\u4E0D\u518D\u7531 "),Dt=e("a",{href:"#lingering_time"},"lingering_time",-1),Pt=t(" \u6307\u4EE4\u6307\u5B9A\u3002"),Tt=l(`<h3 id="listen" tabindex="-1"><a class="header-anchor" href="#listen" aria-hidden="true">#</a> listen</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>listen</strong> <code>address[:port] [default_server] [ssl] [http2 | spdy] [proxy_protocol] [setfib=number] [fastopen=number] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred] [bind] [ipv6only=on|off] [reuseport] [so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]]</code>; <br> <strong>listen</strong> <code>port [default_server] [ssl] [http2 | spdy] [proxy_protocol] [setfib=number] [fastopen=number] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred] [bind] [ipv6only=on|off] [reuseport] [so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]]</code>; <br> <strong>listen</strong> <code>unix:path [default_server] [ssl] [http2 | spdy] [proxy_protocol] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred] [bind] [so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]]</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">listen *:80 | *:8000;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">server</td></tr></tbody></table><p>\u8BBE\u7F6E IP \u7684 <code>address</code> \uFF08\u5730\u5740\uFF09\u548C <code>port</code> \uFF08\u7AEF\u53E3\uFF09\uFF0C\u6216\u670D\u52A1\u5668\u63A5\u53D7\u8BF7\u6C42\u7684 UNIX \u57DF\u5957\u63A5\u5B57\u7684 <code>path</code> \uFF08\u8DEF\u5F84\uFF09\u3002\u53EF\u4EE5\u540C\u65F6\u6307\u5B9A <code>addres</code> \uFF08\u5730\u5740\uFF09\u548C <code>port</code> \uFF08\u7AEF\u53E3\uFF09\uFF0C\u4E5F\u53EF\u4EE5\u53EA\u6307\u5B9A <code>address</code> \uFF08\u5730\u5740\uFF09\u6216 <code>port</code> \uFF08\u7AEF\u53E3\uFF09\u3002<code>address</code> \u4E5F\u53EF\u4EE5\u662F\u4E3B\u673A\u540D\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">listen</span> 127.0.0.1:8000</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">listen</span> 127.0.0.1</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">listen</span> <span class="token number">8000</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">listen</span> *:8000</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">listen</span> localhost:8000</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>IPv6 \u5730\u5740\uFF080.7.36\uFF09\u5728\u65B9\u62EC\u53F7\u4E2D\u6307\u5B9A\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">listen</span> [::]:8000</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">listen</span> [::1]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>UNIX \u57DF\u5957\u63A5\u5B57\uFF080.8.21\uFF09\u7528 <code>unix:</code> \u524D\u7F00\u6307\u5B9A\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">listen</span> unix:/var/run/nginx.sock</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u5982\u679C\u53EA\u6307\u5B9A <code>address</code>\uFF0C\u5219\u4F7F\u7528 80 \u7AEF\u53E3\u3002</p><p>\u5982\u679C\u6307\u4EE4\u4E0D\u5B58\u5728\uFF0C\u90A3\u4E48\u5982\u679C nginx \u662F\u4EE5\u8D85\u7EA7\u7528\u6237\u6743\u9650\u8FD0\u884C\uFF0C\u5219\u4F7F\u7528 <code>*:80</code>\uFF0C\u5426\u5219\u4F7F\u7528 <code>*:8000</code>\u3002</p><p><code>default_server</code> \u53C2\u6570\uFF08\u5982\u679C\u5B58\u5728\uFF09\u5C06\u4F7F\u5F97\u670D\u52A1\u5668\u6210\u4E3A\u6307\u5B9A <code>address:port</code> \u5BF9\u7684\u9ED8\u8BA4\u670D\u52A1\u5668\u3002\u5982\u679C\u6CA1\u6709\u6307\u4EE4\u6709 <code>default_server</code> \u53C2\u6570\uFF0C\u90A3\u4E48\u5177\u6709 <code>address:port</code> \u5BF9\u7684\u7B2C\u4E00\u4E2A\u670D\u52A1\u5668\u5C06\u662F\u8BE5\u5BF9\u7684\u9ED8\u8BA4\u670D\u52A1\u5668\u3002</p><blockquote><p>\u5728 0.8.21 \u4E4B\u524D\u7684\u7248\u672C\u4E2D\uFF0C\u6B64\u53C2\u6570\u7B80\u5355\u5730\u547D\u540D\u4E3A <code>default</code>\u3002</p></blockquote>`,12),Ot=e("code",null,"ssl",-1),Ct=t(" \u53C2\u6570\uFF080.7.14\uFF09\u5141\u8BB8\u6307\u5B9A\u8BE5\u7AEF\u53E3\u4E0A\u63A5\u53D7\u7684\u6240\u6709\u8FDE\u63A5\u90FD\u5E94\u8BE5\u5DE5\u4F5C\u5728 SSL \u6A21\u5F0F\u3002\u8FD9\u6837\u53EF\u4EE5\u4E3A\u5904\u7406 HTTP \u548C HTTPS \u8BF7\u6C42\u7684\u670D\u52A1\u5668\u63D0\u4F9B\u66F4\u7D27\u51D1\u7684"),Lt=t("\u914D\u7F6E"),Rt=t("\u3002"),Nt=e("code",null,"http2",-1),Bt=t(" \u53C2\u6570\uFF081.9.5\uFF09\u914D\u7F6E\u7AEF\u53E3\u63A5\u53D7 "),Ut=t("HTTP/2"),Kt=t(" \u8FDE\u63A5\u3002\u901A\u5E38\uFF0C\u4E3A\u4E86\u80FD\u591F\u5DE5\u4F5C\uFF0C\u8FD8\u5E94\u8BE5\u6307\u5B9A "),Ht=e("code",null,"ssl",-1),Mt=t(" \u53C2\u6570\uFF0C\u4F46\u4E5F\u53EF\u4EE5\u5C06 nginx \u914D\u7F6E\u4E3A\u63A5\u53D7\u6CA1\u6709 SSL \u7684 HTTP/2 \u8FDE\u63A5\u3002"),Vt=e("code",null,"spdy",-1),Gt=t(" \u53C2\u6570\uFF081.3.15 \u2014 1.9.4\uFF09\u5141\u8BB8\u5728\u6B64\u7AEF\u53E3\u4E0A\u63A5\u53D7 "),Xt=t("SPDY"),Yt=t(" \u8FDE\u63A5\u3002\u901A\u5E38\uFF0C\u4E3A\u4E86\u80FD\u591F\u5DE5\u4F5C\uFF0C\u8FD8\u5E94\u8BE5\u6307\u5B9A "),jt=e("code",null,"ssl",-1),Wt=t(" \u53C2\u6570\uFF0C\u4F46\u4E5F\u53EF\u4EE5\u5C06 nginx \u914D\u7F6E\u4E3A\u63A5\u53D7\u6CA1\u6709 SSL \u7684 SPDY \u8FDE\u63A5\u3002"),Qt=e("code",null,"proxy_protocol",-1),Jt=t(" \u53C2\u6570\uFF081.5.12\uFF09\u5141\u8BB8\u6307\u5B9A\u6B64\u7AEF\u53E3\u4E0A\u63A5\u53D7\u7684\u6240\u6709\u8FDE\u63A5\u90FD\u5E94\u4F7F\u7528 "),Zt={href:"http://www.haproxy.org/download/1.5/doc/proxy-protocol.txt",target:"_blank",rel:"noopener noreferrer"},te=t("PROXY \u534F\u8BAE"),ee=t("\u3002"),ne=e("p",null,[e("code",null,"listen"),t(" \u6307\u4EE4\u53EF\u4EE5\u6709\u7279\u5B9A\u4E8E\u5957\u63A5\u5B57\u76F8\u5173\u7CFB\u7EDF\u8C03\u7528\u7684\u51E0\u4E2A\u9644\u52A0\u53C2\u6570\u3002\u8FD9\u4E9B\u53C2\u6570\u53EF\u4EE5\u5728\u4EFB\u4F55 "),e("code",null,"listen"),t(" \u6307\u4EE4\u4E2D\u6307\u5B9A\uFF0C\u4F46\u5BF9\u4E8E\u7ED9\u5B9A\u7684 "),e("code",null,"address:port"),t(" \u53EA\u80FD\u4F7F\u7528\u4E00\u6B21\u3002")],-1),se=e("blockquote",null,[e("p",null,[t("\u5728 0.8.21 \u4E4B\u524D\u7684\u7248\u672C\u4E2D\uFF0C\u5B83\u4EEC\u53EA\u80FD\u5728 "),e("code",null,"listen"),t(" \u6307\u4EE4\u4E2D\u4E0E\u9ED8\u8BA4\u53C2\u6570\u4E00\u8D77\u6307\u5B9A\u3002")])],-1),ae=e("li",null,[e("p",null,[e("code",null,"setfib=number")]),e("p",null,[t("\u6B64\u53C2\u6570\uFF080.8.44\uFF09\u8BBE\u7F6E\u76F8\u5173\u8054\u7684\u8DEF\u7531\u8868\uFF0C\u76D1\u542C\u5957\u63A5\u5B57\u7684 FIB\uFF08"),e("code",null,"SO_SETFIB"),t(" \u9009\u9879\uFF09\u3002\u76EE\u524D\u53EA\u9002\u7528\u4E8E FreeBSD\u3002")])],-1),le=e("p",null,[e("code",null,"fastopen=number")],-1),oe=t("\u4E3A\u4FA6\u542C\u5957\u63A5\u5B57\u542F\u7528 "),re={href:"http://en.wikipedia.org/wiki/TCP_Fast_Open",target:"_blank",rel:"noopener noreferrer"},ie=t("TCP Fast Open"),de=t(" \uFF081.5.8\uFF09\uFF0C\u5E76\u9650\u5236\u5C1A\u672A\u5B8C\u6210\u4E09\u6B21\u63E1\u624B\u7684\u8FDE\u63A5\u961F\u5217\u7684\u6700\u5927\u957F\u5EA6\u3002"),ce=t("\u4E0D\u8981\u542F\u7528\u6B64\u529F\u80FD\uFF0C\u9664\u975E\u670D\u52A1\u5668\u53EF\u4EE5\u4E00\u6B21\u5904\u7406\u63A5\u6536\u591A\u4E2A"),pe={href:"https://tools.ietf.org/html/rfc7413#section-6.1",target:"_blank",rel:"noopener noreferrer"},ge=t("\u76F8\u540C\u7684 SYN \u5305\u7684\u6570\u636E"),he=t("\u3002"),_e=l("<li><p><code>backlog=number</code></p><p>\u5728 <code>listen()</code> \u8C03\u7528\u4E2D\u8BBE\u7F6E\u9650\u5236\u6302\u8D77\u8FDE\u63A5\u961F\u5217\u7684\u6700\u5927\u957F\u5EA6\u7684<code>backlog</code> \u53C2\u6570\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CFreeBSD\u3001DragonFly BSD \u548C macOS \u4E0A\u7684 <code>backlog</code> \u8BBE\u7F6E\u4E3A -1\uFF0C\u5728\u5176\u4ED6\u5E73\u53F0\u4E0A\u8BBE\u7F6E\u4E3A 511\u3002</p></li><li><p><code>rcvbuf=size</code></p><p>\u8BBE\u7F6E\u4FA6\u542C\u5957\u63A5\u5B57\u7684\u63A5\u6536\u7F13\u51B2\u533A\u5927\u5C0F\uFF08<code>SO_RCVBUF</code> \u9009\u9879\uFF09\u3002</p></li><li><p><code>sndbuf=size</code></p><p>\u8BBE\u7F6E\u4FA6\u542C\u5957\u63A5\u5B57\u7684\u53D1\u9001\u7F13\u51B2\u533A\u5927\u5C0F\uFF08<code>SO_SNDBUF</code> \u9009\u9879\uFF09\u3002</p></li>",3),ue=e("p",null,[e("code",null,"accept_filter=filter")],-1),fe=t("\u4E3A\u4FA6\u542C\u5957\u63A5\u5B57\u8BBE\u7F6E\u63A5\u53D7\u8FC7\u6EE4\u5668\uFF08"),be=e("code",null,"SO_ACCEPTFILTER",-1),xe=t(" \u9009\u9879\uFF09\u7684\u540D\u79F0\uFF0C\u8BE5\u5957\u63A5\u5B57\u5C06\u4F20\u5165\u7684\u8FDE\u63A5\u5728\u4F20\u9012\u7ED9 "),ye=e("code",null,"accept()",-1),me=t(" \u4E4B\u524D\u8FDB\u884C\u8FC7\u6EE4\u3002\u8FD9\u53EA\u9002\u7528\u4E8E FreeBSD \u548C NetBSD 5.0+\u3002\u53EF\u8BBE\u7F6E\u503C"),ke={href:"http://man.freebsd.org/accf_data",target:"_blank",rel:"noopener noreferrer"},ve=t("dataready"),Ee=t(" \u6216 "),we={href:"http://man.freebsd.org/accf_http",target:"_blank",rel:"noopener noreferrer"},Ae=t("httpready"),ze=t("\u3002"),qe=l("<li><p><code>deferred</code></p><p>\u6307\u793A\u5728 Linux \u4E0A\u4F7F\u7528\u5EF6\u8FDF <code>accept()</code>\uFF08<code>TCP_DEFER_ACCEPT</code> \u5957\u63A5\u5B57\u9009\u9879\uFF09\u3002</p></li><li><p><code>bind</code></p><p>\u6307\u793A\u4E3A\u7ED9\u5B9A\u7684 <code>address:port</code> \u5BF9\u5355\u72EC\u8FDB\u884C <code>bind()</code> \u8C03\u7528\u3002\u8FD9\u662F\u6709\u7528\u7684\uFF0C\u56E0\u4E3A\u5982\u679C\u6709\u591A\u4E2A\u6709\u76F8\u540C\u7AEF\u53E3\u4F46\u4E0D\u540C\u5730\u5740\u7684 <code>listen</code> \u6307\u4EE4\uFF0C\u5E76\u4E14\u5176\u4E2D\u4E00\u4E2A <code>listen</code> \u6307\u4EE4\u76D1\u542C\u7ED9\u5B9A\u7AEF\u53E3\uFF08<code>*:port</code>\uFF09\u7684\u6240\u6709\u5730\u5740\uFF0C\u5219 nginx \u5C06 <code>bind()</code> \u5E94\u7528\u5230<code>*:port</code>\u3002\u5E94\u8BE5\u6CE8\u610F\u7684\u662F\uFF0C\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\u5C06\u4F1A\u8FDB\u884C <code>getsockname()</code> \u7CFB\u7EDF\u8C03\u7528\uFF0C\u4EE5\u786E\u5B9A\u63A5\u53D7\u8BE5\u8FDE\u63A5\u7684\u5730\u5740\u3002\u5982\u679C\u4F7F\u7528 <code>setfib</code>\u3001<code>backlog</code>\u3001<code>rcvbuf</code>\u3001<code>sndbuf</code>\u3001<code>accept_filter</code>\u3001<code>deferred</code>\u3001<code>ipv6only</code> \u6216 <code>so_keepalive</code> \u53C2\u6570\uFF0C\u90A3\u4E48\u5BF9\u4E8E\u7ED9\u5B9A\u7684 <code>address:port</code> \u5BF9\u5C06\u59CB\u7EC8\u8FDB\u884C\u5355\u72EC\u7684 <code>bind()</code> \u8C03\u7528\u3002</p></li><li><p><code>ipv6only=ON|OFF</code></p><p>\u6B64\u53C2\u6570\uFF080.7.42\uFF09\u786E\u5B9A\uFF08\u901A\u8FC7 <code>IPV6_V6ONLY</code> \u5957\u63A5\u5B57\u9009\u9879\uFF09\u4E00\u4E2A\u76D1\u542C\u901A\u914D\u7B26\u5730\u5740 <code>[::]</code> \u7684 IPv6 \u5957\u63A5\u5B57\u662F\u5426\u4EC5\u63A5\u53D7 IPv6 \u8FDE\u63A5\u6216 IPv6 \u548C IPv4 \u8FDE\u63A5\u3002\u6B64\u53C2\u6570\u9ED8\u8BA4\u4E3A\u5F00\u542F\u3002\u5B83\u53EA\u80FD\u5728\u542F\u52A8\u65F6\u8BBE\u7F6E\u4E00\u6B21\u3002</p><blockquote><p>\u5728 1.3.4 \u7248\u672C\u4E4B\u524D\uFF0C\u5982\u679C\u7701\u7565\u8BE5\u53C2\u6570\uFF0C\u5219\u64CD\u4F5C\u7CFB\u7EDF\u7684\u8BBE\u7F6E\u5C06\u5BF9\u4E8E\u5957\u63A5\u5B57\u4EA7\u751F\u5F71\u54CD\u3002</p></blockquote></li>",3),$e=e("p",null,[e("code",null,"reuseport")],-1),Se=e("p",null,[t("\u6B64\u53C2\u6570\uFF081.9.1\uFF09\u6307\u793A\u4E3A\u6BCF\u4E2A\u5DE5\u4F5C\u8FDB\u7A0B\u521B\u5EFA\u4E00\u4E2A\u5355\u72EC\u7684\u76D1\u542C\u5957\u63A5\u5B57\uFF08\u4F7F\u7528 "),e("code",null,"SO_REUSEPORT"),t(" \u5957\u63A5\u5B57\u9009\u9879\uFF09\uFF0C\u5141\u8BB8\u5185\u6838\u5728\u5DE5\u4F5C\u8FDB\u7A0B\u4E4B\u95F4\u5206\u914D\u4F20\u5165\u7684\u8FDE\u63A5\u3002\u76EE\u524D\u53EA\u9002\u7528\u4E8E Linux 3.9+ \u548C DragonFly BSD\u3002")],-1),Ie=t("\u4E0D\u5F53\u5730\u4F7F\u7528\u6B64\u9009\u9879\u53EF\u80FD\u4F1A\u5E26\u6765\u5B89\u5168"),Fe={href:"http://man7.org/linux/man-pages/man7/socket.7.html",target:"_blank",rel:"noopener noreferrer"},De=t("\u9690\u60A3"),Pe=t("\u3002"),Te=l(`<li><p><code>SO_KEEPALIVE=ON|OFF|[keepidle]:[keepintvl]:[keepcnt]</code></p><p>\u6B64\u53C2\u6570\uFF081.1.11\uFF09\u914D\u7F6E\u76D1\u542C\u5957\u63A5\u5B57\u7684 <strong>TCP keepalive</strong> \u884C\u4E3A\u3002\u5982\u679C\u7701\u7565\u6B64\u53C2\u6570\uFF0C\u5219\u64CD\u4F5C\u7CFB\u7EDF\u7684\u8BBE\u7F6E\u5C06\u5BF9\u5957\u63A5\u5B57\u4EA7\u751F\u5F71\u54CD\u3002\u5982\u679C\u8BBE\u7F6E\u4E3A <code>on</code>\uFF0C\u5219\u5957\u63A5\u5B57\u5C06\u6253\u5F00 <code>SO_KEEPALIVE</code> \u9009\u9879\u3002\u5982\u679C\u8BBE\u7F6E\u4E3A <code>off</code>\uFF0C\u5219 <code>SO_KEEPALIVE</code> \u9009\u9879\u5C06\u88AB\u5173\u95ED\u3002\u4E00\u4E9B\u64CD\u4F5C\u7CFB\u7EDF\u652F\u6301\u5728\u6BCF\u4E2A\u5957\u63A5\u5B57\u4E0A\u4F7F\u7528 <code>TCP_KEEPIDLE</code>\u3001<code>TCP_KEEPINTVL</code> \u548C <code>TCP_KEEPCNT</code> \u5957\u63A5\u5B57\u9009\u9879\u6765\u8BBE\u7F6E TCP keepalive \u53C2\u6570\u3002\u5728\u8FD9\u6837\u7684\u7CFB\u7EDF\u4E0A\uFF08\u76EE\u524D\u4E3A Linux 2.4+\u3001NetBSD 5+ \u548C FreeBSD 9.0-STABLE\uFF09\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>keepidle</code>\u3001<code>keepintvl</code>\u548C <code>keepcnt</code> \u53C2\u6570\u8FDB\u884C\u914D\u7F6E\u3002\u53EF\u4EE5\u7701\u7565\u4E00\u4E2A\u6216\u4E24\u4E2A\u53C2\u6570\uFF0C\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u76F8\u5E94\u5957\u63A5\u5B57\u9009\u9879\u7684\u7CFB\u7EDF\u9ED8\u8BA4\u8BBE\u7F6E\u5C06\u751F\u6548\u3002\u4F8B\u5982\uFF0C</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code>SO_KEEPALIVE=30m::10
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u5C06\u7A7A\u95F2\u8D85\u65F6\uFF08<code>TCP_KEEPIDLE</code>\uFF09\u8BBE\u7F6E\u4E3A 30 \u5206\u949F\uFF0C\u5C06\u63A2\u6D4B\u95F4\u9694\uFF08<code>TCP_KEEPINTVL</code>\uFF09\u8BBE\u7F6E\u4E3A\u7CFB\u7EDF\u9ED8\u8BA4\u503C\uFF0C\u5E76\u5C06\u63A2\u6D4B\u6570\u91CF\uFF08<code>TCP_KEEPCNT</code>\uFF09\u8BBE\u7F6E\u4E3A 10 \u4E2A\u63A2\u6D4B\u3002</p></li>`,1),Oe=l(`<p>\u793A\u4F8B\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">listen</span> 127.0.0.1 default_server accept_filter=dataready backlog=1024</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="location" tabindex="-1"><a class="header-anchor" href="#location" aria-hidden="true">#</a> location</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>location</strong> <code>[ = | ~ | ~* | ^~ ] uri { ... }</code>; <br> <strong>location</strong> <code>@name { ... }</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">\u2014\u2014</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">server\u3001location</td></tr></tbody></table><p>\u6839\u636E\u8BF7\u6C42 URI \u8BBE\u7F6E\u914D\u7F6E\u3002</p><p>\u5728\u89E3\u7801\u4EE5 <code>\uFF05XX</code> \u5F62\u5F0F\u7F16\u7801\u7684\u6587\u672C\uFF0C\u89E3\u6790\u5BF9\u76F8\u5BF9\u8DEF\u5F84\u7EC4\u4EF6 <code>.</code> \u548C<code>..</code> \u7684\u5F15\u7528\u5E76\u4E14\u5C06\u4E24\u4E2A\u6216\u66F4\u591A\u4E2A\u76F8\u90BB\u659C\u7EBF<a href="#merge_slashes">\u538B\u7F29</a>\u6210\u5355\u659C\u7EBF\u4E4B\u540E\uFF0C\u5BF9\u89C4\u8303\u5316\u7684 URI \u6267\u884C\u5339\u914D\u3002</p><p>location \u53EF\u4EE5\u7531\u524D\u7F00\u5B57\u7B26\u4E32\u5B9A\u4E49\uFF0C\u4E5F\u53EF\u4EE5\u7531\u6B63\u5219\u8868\u8FBE\u5F0F\u5B9A\u4E49\u3002\u6B63\u5219\u8868\u8FBE\u5F0F\u524D\u9762\u4F7F\u7528<code>~*</code>\u4FEE\u6B63\u7B26\uFF08\u7528\u4E8E\u4E0D\u533A\u5206\u5927\u5C0F\u5199\u7684\u5339\u914D\uFF09\u6216 <code>~</code> \u4FEE\u6B63\u7B26\uFF08\u7528\u4E8E\u533A\u5206\u5927\u5C0F\u5199\u7684\u5339\u914D\uFF09\u6307\u5B9A\u3002\u8981\u67E5\u627E\u5339\u914D\u7ED9\u5B9A\u8BF7\u6C42\u7684 location\uFF0Cnginx \u9996\u5148\u68C0\u67E5\u4F7F\u7528\u524D\u7F00\u5B57\u7B26\u4E32\uFF08\u524D\u7F00 location\uFF09\u5B9A\u4E49\u7684 location\u3002\u671F\u95F4\uFF0C\u524D\u7F00\u6700\u957F\u7684 location \u88AB\u5339\u914D\u9009\u4E2D\u5E76\u8BB0\u4F4F\u3002\u7136\u540E\u6309\u7167\u5B83\u4EEC\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u51FA\u73B0\u7684\u987A\u5E8F\u68C0\u67E5\u6B63\u5219\u8868\u8FBE\u5F0F\u3002\u6B63\u5219\u8868\u8FBE\u5F0F\u7684\u641C\u7D22\u5C06\u5728\u7B2C\u4E00\u6B21\u5339\u914D\u65F6\u7EC8\u6B62\uFF0C\u5E76\u4F7F\u7528\u76F8\u5E94\u7684\u914D\u7F6E\u3002\u5982\u679C\u627E\u4E0D\u5230\u6B63\u5219\u8868\u8FBE\u5F0F\u7684\u5339\u914D\uFF0C\u5219\u4F7F\u7528\u5148\u524D\u8BB0\u4F4F\u7684\u524D\u7F00 location \u7684\u914D\u7F6E\u3002</p><p>location \u5757\u53EF\u4EE5\u5D4C\u5957\uFF0C\u9664\u4E86\u4E0B\u9762\u63D0\u5230\u7684\u4E00\u4E9B\u4F8B\u5916\u3002</p><p>\u5BF9\u4E8E\u4E0D\u533A\u5206\u5927\u5C0F\u5199\u7684\u64CD\u4F5C\u7CFB\u7EDF\uFF0C\u5982 macOS \u548C Cygwin\uFF0C\u4E0E\u524D\u7F00\u5B57\u7B26\u4E32\u5339\u914D\u5FFD\u7565\u5927\u5C0F\u5199\uFF080.7.7\uFF09\u3002\u4F46\u662F\uFF0C\u6BD4\u8F83\u4EC5\u9650\u4E8E\u4E00\u4E2A\u5B57\u8282\u7684\u533A\u57DF\u8BBE\u7F6E\u3002</p><p>\u6B63\u5219\u8868\u8FBE\u5F0F\u53EF\u4EE5\u5305\u542B\u6355\u83B7\uFF080.7.40\uFF09\uFF0C\u4E4B\u540E\u53EF\u4EE5\u5728\u5176\u4ED6\u6307\u4EE4\u4E2D\u4F7F\u7528\u3002</p><p>\u5982\u679C\u6700\u957F\u5339\u914D\u7684\u524D\u7F00 location \u5177\u6709 <code>^~</code> \u4FEE\u6B63\u7B26\uFF0C\u5219\u4E0D\u68C0\u67E5\u6B63\u5219\u8868\u8FBE\u5F0F\u3002</p><p>\u53E6\u5916\uFF0C\u4F7F\u7528 <code>=</code> \u4FEE\u6B63\u7B26\u53EF\u4EE5\u4F7F URI \u548C location \u7684\u5339\u914D\u7CBE\u786E\u3002\u5982\u679C\u627E\u5230\u5B8C\u5168\u5339\u914D\uFF0C\u5219\u641C\u7D22\u7ED3\u675F\u3002\u4F8B\u5982\uFF0C\u5982\u679C <code>/</code> \u8BF7\u6C42\u9891\u7E41\uFF0C\u90A3\u4E48\u5B9A\u4E49 <code>location=/</code> \u4F1A\u52A0\u5FEB\u8FD9\u4E9B\u8BF7\u6C42\u7684\u5904\u7406\u901F\u5EA6\uFF0C\u56E0\u4E3A\u641C\u7D22\u5728\u7B2C\u4E00\u6B21\u6BD4\u8F83\u4E4B\u540E\u4F1A\u7ACB\u5373\u7EC8\u6B62\u3002\u8FD9\u6837\u7684 location \u4E0D\u80FD\u5305\u542B\u5D4C\u5957 location\u3002</p><blockquote><p>\u4ECE 0.7.1 \u5230 0.8.41 \u7248\u672C\uFF0C\u5982\u679C\u8BF7\u6C42\u4E0E\u6CA1\u6709 <code>=</code> \u548C <code>^~</code> \u4FEE\u6B63\u7B26\u7684\u524D\u7F00 location \u5339\u914D\uFF0C\u5219\u641C\u7D22\u4E5F\u4F1A\u7EC8\u6B62\uFF0C\u5E76\u4E14\u4E0D\u518D\u68C0\u67E5\u6B63\u5219\u8868\u8FBE\u5F0F\u3002</p></blockquote><p>\u4E0B\u9762\u4E3E\u4E00\u4E2A\u4F8B\u5B50\u6765\u8BF4\u660E\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> = /</span> <span class="token punctuation">{</span>
    [ configuration A ]
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    [ configuration B ]
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> /documents/</span> <span class="token punctuation">{</span>
    [ configuration C ]
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> ^~ /images/</span> <span class="token punctuation">{</span>
    [ configuration D ]
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> ~* \\.(gif|jpg|jpeg)$</span> <span class="token punctuation">{</span>
    [ configuration E ]
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><code>/</code> \u8BF7\u6C42\u5C06\u4E0E\u914D\u7F6E A \u5339\u914D\uFF0C<code>/index.html</code> \u8BF7\u6C42\u5C06\u5339\u914D\u914D\u7F6E B\uFF0C<code>/documents/document.html</code> \u8BF7\u6C42\u5C06\u5339\u914D\u914D\u7F6E C\uFF0C<code>/images/1.gif</code> \u8BF7\u6C42\u5C06\u5339\u914D\u914D\u7F6E D\uFF0C<code>/documents/1.jpg</code> \u8BF7\u6C42\u5C06\u5339\u914D\u914D\u7F6E E\u3002</p><p><code>@</code> \u524D\u7F00\u5B9A\u4E49\u4E86\u4E00\u4E2A\u547D\u540D location\u3002\u8FD9\u6837\u7684 location \u4E0D\u7528\u4E8E\u5E38\u89C4\u7684\u8BF7\u6C42\u5904\u7406\uFF0C\u800C\u662F\u7528\u4E8E\u8BF7\u6C42\u91CD\u5B9A\u5411\u3002\u5B83\u4EEC\u4E0D\u80FD\u5D4C\u5957\uFF0C\u4E5F\u4E0D\u80FD\u5305\u542B\u5D4C\u5957\u7684 location\u3002</p>`,17),Ce=t("\u5982\u679C\u67D0\u4E2A location \u7531\u4EE5\u659C\u6760\u5B57\u7B26\u7ED3\u5C3E\u7684\u524D\u7F00\u5B57\u7B26\u4E32\u5B9A\u4E49\uFF0C\u5E76\u4E14\u8BF7\u6C42\u7531 "),Le=t("proxy_pass"),Re=t("\u3001"),Ne=t("fastcgi_pass"),Be=t("\u3001"),Ue=t("uwsgi_pass"),Ke=t("\u3001"),He=t("scgi_pass"),Me=t(" \u6216 "),Ve=t("memcached_pa\u200B\u200Bss"),Ge=t(" \u4E2D\u7684\u4E00\u4E2A\u8FDB\u884C\u5904\u7406\uFF0C\u5219\u4F1A\u6267\u884C\u7279\u6B8A\u5904\u7406\u3002\u4E3A\u4E86\u54CD\u5E94 URI \u4E3A\u8BE5\u5B57\u7B26\u4E32\u7684\u8BF7\u6C42\uFF0C\u4F46\u6CA1\u6709\u4EE5\u659C\u6760\u7ED3\u5C3E\uFF0C\u5E26\u6709 301 \u4EE3\u7801\u7684\u6C38\u4E45\u91CD\u5B9A\u5411\u5C06\u8FD4\u56DE\u6240\u8BF7\u6C42\u7684 URI\uFF0C\u5E76\u9644\u4E0A\u659C\u7EBF\u3002\u5982\u679C\u4E0D\u9700\u8981\uFF0C\u53EF\u4EE5\u50CF\u4EE5\u4E0B\u8FD9\u6837\u5B9A\u4E49 URI \u548C location \u7684\u7CBE\u786E\u5339\u914D\uFF1A"),Xe=l(`<div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /user/</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span> http://user.example.com</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> = /user</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span> http://login.example.com</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="log-not-found" tabindex="-1"><a class="header-anchor" href="#log-not-found" aria-hidden="true">#</a> log_not_found</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>log_not_found</strong> <code>on | off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">log_not_found on;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u542F\u7528\u6216\u7981\u7528\u5C06\u6587\u4EF6\u672A\u627E\u5230\u9519\u8BEF\u8BB0\u5F55\u5230 <a href="#error_log">error_log</a> \u4E2D\u3002</p><h3 id="log-subrequest" tabindex="-1"><a class="header-anchor" href="#log-subrequest" aria-hidden="true">#</a> log_subrequest</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>log_subrequest</strong> <code>on | off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">log_subrequest off;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table>`,6),Ye=t("\u542F\u7528\u6216\u7981\u7528\u5C06\u5B50\u8BF7\u6C42\u8BB0\u5F55\u5230 "),je=t("access_log"),We=t(" \u4E2D\u3002"),Qe=l(`<h3 id="max-ranges" tabindex="-1"><a class="header-anchor" href="#max-ranges" aria-hidden="true">#</a> max_ranges</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>merge_slashes</strong> <code>number</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">\u2014\u2014</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr><tr><td style="text-align:left;"><strong>\u63D0\u793A</strong></td><td style="text-align:left;">\u8BE5\u6307\u4EE4\u5728 1.1.2 \u7248\u672C\u4E2D\u51FA\u73B0</td></tr></tbody></table><p>\u9650\u5236 byte-range \u8BF7\u6C42\u4E2D\u5141\u8BB8\u7684\u6700\u5927\u8303\u56F4\u6570\u3002\u5982\u679C\u6CA1\u6709\u6307\u5B9A\u5B57\u8282\u8303\u56F4\uFF0C\u5219\u5904\u7406\u8D85\u51FA\u9650\u5236\u7684\u8BF7\u6C42\u3002 \u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u8303\u56F4\u7684\u6570\u91CF\u4E0D\u53D7\u9650\u5236\u3002\u96F6\u503C\u5C06\u5B8C\u5168\u7981\u7528 byte-range \u652F\u6301\u3002</p><h3 id="merge-slashes" tabindex="-1"><a class="header-anchor" href="#merge-slashes" aria-hidden="true">#</a> merge_slashes</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>merge_slashes</strong> <code>on | off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">merge_slashes on;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server</td></tr></tbody></table><p>\u542F\u7528\u6216\u7981\u7528\u5C06 URI \u4E2D\u4E24\u4E2A\u6216\u591A\u4E2A\u76F8\u90BB\u659C\u7EBF\u538B\u7F29\u4E3A\u5355\u659C\u7EBF\u3002</p><p>\u8BF7\u6CE8\u610F\uFF0C\u538B\u7F29\u5BF9\u4E8E\u6B63\u786E\u5339\u914D\u524D\u7F00\u5B57\u7B26\u4E32\u548C\u6B63\u5219\u8868\u8FBE\u5F0F\u7684 location \u975E\u5E38\u91CD\u8981\u3002\u6CA1\u6709\u5B83\uFF0C\u5C06\u4E0D\u5339\u914D <code>//scripts/one.php</code> \u8BF7\u6C42\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /scripts/</span> <span class="token punctuation">{</span>
    ...
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u5E76\u53EF\u80FD\u88AB\u4F5C\u4E3A\u4E00\u4E2A\u9759\u6001\u6587\u4EF6\u5904\u7406\u3002\u56E0\u6B64\u5B83\u9700\u8981\u88AB\u8F6C\u6362\u6210 <code>/scripts/one.php</code>\u3002</p><p>\u56E0\u4E3A base64 \u5728\u5185\u90E8\u4F7F\u7528 <code>/</code> \u5B57\u7B26\uFF0C\u6240\u4EE5\u5982\u679C URI \u5305\u542B base64 \u7F16\u7801\u7684\u540D\u79F0\uFF0C\u5219\u53EF\u80FD\u9700\u8981\u5173\u95ED\u538B\u7F29\u3002\u4F46\u662F\uFF0C\u51FA\u4E8E\u5B89\u5168\u8003\u8651\uFF0C\u6700\u597D\u4E0D\u8981\u5173\u95ED\u538B\u7F29\u3002</p><p>\u5982\u679C\u8BE5\u6307\u4EE4\u662F\u5728 <a href="#server">server</a> \u7EA7\u522B\u6307\u5B9A\u7684\uFF0C\u5219\u4EC5\u5728 server \u662F\u9ED8\u8BA4 server \u65F6\u624D\u4F7F\u7528\u8BE5\u6307\u4EE4\u3002\u6307\u5B9A\u7684\u503C\u4E5F\u9002\u7528\u4E8E\u76D1\u542C\u76F8\u540C\u5730\u5740\u548C\u7AEF\u53E3\u7684\u6240\u6709\u865A\u62DF\u670D\u52A1\u5668\u3002</p><h3 id="msie-padding" tabindex="-1"><a class="header-anchor" href="#msie-padding" aria-hidden="true">#</a> msie_padding</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>msie_padding</strong> <code>on | off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">msie_padding on;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u542F\u7528\u6216\u7981\u7528\u5411\u72B6\u6001\u8D85\u8FC7 400 \u7684 MSIE \u5BA2\u6237\u7AEF\u54CD\u5E94\u6DFB\u52A0\u6CE8\u91CA\u4EE5\u5C06\u54CD\u5E94\u5927\u5C0F\u589E\u52A0\u5230 512 \u5B57\u8282\u3002</p><h3 id="msie-refresh" tabindex="-1"><a class="header-anchor" href="#msie-refresh" aria-hidden="true">#</a> msie_refresh</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>msie_refresh</strong> <code>on | off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">msie_refresh off;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u542F\u7528\u6216\u7981\u7528\u53D1\u5E03\u5237\u65B0\u66FF\u4EE3 MSIE \u5BA2\u6237\u7AEF\u91CD\u5B9A\u5411\u3002</p><h3 id="open-file-cache" tabindex="-1"><a class="header-anchor" href="#open-file-cache" aria-hidden="true">#</a> open_file_cache</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>open_file_cache</strong> <code>off</code>; <br> <strong>open_file_cache</strong> <code>max=N [inactive=time]</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">open_file_cache off;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u914D\u7F6E\u4E00\u4E2A\u7F13\u5B58\uFF0C\u53EF\u4EE5\u5B58\u50A8\uFF1A</p><ul><li>\u6253\u5F00\u6587\u4EF6\u63CF\u8FF0\u7B26\u3001\u5927\u5C0F\u548C\u4FEE\u6539\u65F6\u95F4</li><li>\u6709\u5173\u76EE\u5F55\u662F\u5426\u5B58\u5728\u4FE1\u606F</li><li>\u6587\u4EF6\u67E5\u627E\u9519\u8BEF\uFF0C\u5982<strong>\u627E\u4E0D\u5230\u6587\u4EF6</strong>\u3001<strong>\u6CA1\u6709\u8BFB\u53D6\u6743\u9650</strong>\u7B49</li></ul><blockquote><p>\u5E94\u8BE5\u901A\u8FC7 <a href="#open_file_cache_errors">open_file_cache_errors</a> \u6307\u4EE4\u5206\u522B\u542F\u7528\u7F13\u5B58\u9519\u8BEF\u3002</p></blockquote><p>\u8BE5\u6307\u4EE4\u6709\u4EE5\u4E0B\u53C2\u6570\uFF1A</p><ul><li><p><code>max</code></p><p>\u8BBE\u7F6E\u7F13\u5B58\u4E2D\u5143\u7D20\u7684\u6700\u5927\u6570\u91CF\u3002\u5728\u7F13\u5B58\u6EA2\u51FA\u65F6\uFF0C\u6700\u8FD1\u6700\u5C11\u4F7F\u7528\u7684\uFF08LRU\uFF09\u5143\u7D20\u5C06\u88AB\u79FB\u9664</p></li><li><p><code>inactive</code></p><p>\u5B9A\u4E49\u4E00\u4E2A\u65F6\u95F4\uFF0C\u5728\u8FD9\u4E2A\u65F6\u95F4\u4E4B\u540E\uFF0C\u5143\u7D20\u5728\u7F13\u5B58\u4E2D\u5C06\u88AB\u5220\u9664\uFF0C\u9ED8\u8BA4\u662F 60 \u79D2</p></li><li><p><code>off</code></p><p>\u7981\u7528\u7F13\u5B58</p></li></ul><p>\u793A\u4F8B\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">open_file_cache</span>          max=1000 inactive=20s</span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">open_file_cache_valid</span>    <span class="token number">30s</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">open_file_cache_min_uses</span> <span class="token number">2</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">open_file_cache_errors</span>   <span class="token boolean">on</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="open-file-cache-errors" tabindex="-1"><a class="header-anchor" href="#open-file-cache-errors" aria-hidden="true">#</a> open_file_cache_errors</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>open_file_cache_errors</strong> <code>off</code> | <code>on</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">open_file_cache_errors off;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u901A\u8FC7 <a href="#open_file_cache">open_file_cache</a> \u542F\u7528\u6216\u7981\u7528\u6587\u4EF6\u67E5\u627E\u9519\u8BEF\u7F13\u5B58\u3002</p><h3 id="open-file-cache-min-uses" tabindex="-1"><a class="header-anchor" href="#open-file-cache-min-uses" aria-hidden="true">#</a> open_file_cache_min_uses</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>open_file_cache_min_uses</strong> <code>number</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">open_file_cache_min_uses 1;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u8BBE\u7F6E\u7531 <a href="#open_file_cache">open_file_cache</a> \u6307\u4EE4\u7684 <code>inactive</code> \u53C2\u6570\u914D\u7F6E\u7684\u65F6\u95F4\u6BB5\u5185\u6587\u4EF6\u8BBF\u95EE\u7684\u6700\u5C0F <code>number</code> \uFF08\u6B21\u6570\uFF09\uFF0C\u8FD9\u662F\u6587\u4EF6\u63CF\u8FF0\u7B26\u5728\u7F13\u5B58\u4E2D\u4FDD\u6301\u6253\u5F00\u72B6\u6001\u6240\u5FC5\u9700\u7684\u3002</p><h3 id="open-file-cache-valid" tabindex="-1"><a class="header-anchor" href="#open-file-cache-valid" aria-hidden="true">#</a> open_file_cache_valid</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>open_file_cache_valid</strong> <code>time</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">open_file_cache_valid 60s;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u8BBE\u7F6E <a href="#open_file_cache">open_file_cache</a> \u5143\u7D20\u5E94\u8BE5\u9A8C\u8BC1\u7684\u65F6\u95F4\u3002</p><h3 id="output-buffers" tabindex="-1"><a class="header-anchor" href="#output-buffers" aria-hidden="true">#</a> output_buffers</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>output_buffers</strong> <code>number size</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">output_buffers 2 32k;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u8BBE\u7F6E\u4ECE\u78C1\u76D8\u8BFB\u53D6\u54CD\u5E94\u7F13\u51B2\u533A\u7684 <code>number</code> \uFF08\u6570\u91CF\uFF09\u548C <code>size</code> \uFF08\u5927\u5C0F\uFF09\u3002</p><blockquote><p>\u5728 1.9.5 \u7248\u672C\u4E4B\u524D\uFF0C\u9ED8\u8BA4\u503C\u662F <code>1 32k</code>\u3002</p></blockquote><h3 id="port-in-redirect" tabindex="-1"><a class="header-anchor" href="#port-in-redirect" aria-hidden="true">#</a> port_in_redirect</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>port_in_redirect</strong> <code>on</code> | <code>off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">port_in_redirect on;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u542F\u7528\u6216\u7981\u7528\u6307\u5B9A\u7531 nginx \u53D1\u51FA\u7684<a href="#absolute_redirect">\u7EDD\u5BF9</a>\u91CD\u5B9A\u5411\u4E2D\u7684\u7AEF\u53E3\u3002</p><blockquote><p>\u5728\u91CD\u5B9A\u5411\u4E2D\u4F7F\u7528\u7684\u4E3B\u670D\u52A1\u5668\u540D\u79F0\u7531 <a href="#server_name_in_redirect">server_name_in_redirect</a> \u6307\u4EE4\u63A7\u5236\u3002</p></blockquote><h3 id="postpone-output" tabindex="-1"><a class="header-anchor" href="#postpone-output" aria-hidden="true">#</a> postpone_output</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>postpone_output</strong> <code>size</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">postpone_output 1460;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u5982\u679C\u6307\u5B9A\u7684\u8BDD\uFF0C\u5BA2\u6237\u7AEF\u6570\u636E\u7684\u4F20\u8F93\u5C06\u88AB\u63A8\u8FDF\uFF0C\u76F4\u5230 nginx \u81F3\u5C11\u6709 <code>size</code> \u5B57\u8282\u7684\u6570\u636E\u8981\u53D1\u9001\u3002\u96F6\u503C\u5C06\u7981\u6B62\u5EF6\u8FDF\u6570\u636E\u4F20\u8F93\u3002</p><h3 id="read-ahead" tabindex="-1"><a class="header-anchor" href="#read-ahead" aria-hidden="true">#</a> read_ahead</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>read_ahead</strong> <code>sizef</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">read_ahead 0;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u8BBE\u7F6E\u4F7F\u7528\u6587\u4EF6\u65F6\u5185\u6838\u7684\u9884\u8BFB\u6570\u91CF\u3002</p><p>\u5728 Linux \u4E0A\uFF0C\u4F7F\u7528 <code>posix_fadvise</code>\uFF08<code>0, 0, 0, POSIX_FADV_SEQUENTIAL</code>\uFF09\u7CFB\u7EDF\u8C03\u7528\uFF0C\u56E0\u6B64 <code>size</code> \u53C2\u6570\u5C06\u88AB\u5FFD\u7565\u3002</p>`,50),Je=t("\u5728 FreeBSD \u4E0A\uFF0C\u4F7F\u7528\u81EA FreeBSD 9.0-CURRENT \u540E\u652F\u6301\u7684 "),Ze=e("code",null,"fcntl",-1),tn=t("\uFF08"),en=e("code",null,"O_READAHEAD, size",-1),nn=t("\uFF09\u7CFB\u7EDF\u8C03\u7528\u3002FreeBSD 7 \u9700\u8981"),sn={href:"http://sysoev.ru/freebsd/patch.readahead.txt",target:"_blank",rel:"noopener noreferrer"},an=t("\u6253\u8865\u4E01"),ln=t("\u3002"),on=l(`<h3 id="recursive-error-pages" tabindex="-1"><a class="header-anchor" href="#recursive-error-pages" aria-hidden="true">#</a> recursive_error_pages</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>recursive_error_pages</strong> <code>on</code> | <code>off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">reset_timedout_connection off;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u542F\u7528\u6216\u7981\u7528\u4F7F\u7528 <a href="#error_page">error_page</a> \u6307\u4EE4\u6267\u884C\u591A\u4E2A\u91CD\u5B9A\u5411\u3002\u8FD9\u79CD\u91CD\u5B9A\u5411\u7684\u6570\u91CF\u662F<a href="#internal">\u6709\u9650</a>\u7684\u3002</p><h3 id="request-pool-size" tabindex="-1"><a class="header-anchor" href="#request-pool-size" aria-hidden="true">#</a> request_pool_size</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>request_pool_size</strong> <code>size</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">request_pool_size 4k;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server</td></tr></tbody></table><p>\u5141\u8BB8\u7CBE\u786E\u8C03\u6574\u6BCF\u4E2A\u8BF7\u6C42\u7684\u5185\u5B58\u5206\u914D\u3002\u8BE5\u6307\u4EE4\u5BF9\u6027\u80FD\u5F71\u54CD\u6700\u5C0F\uFF0C\u4E00\u822C\u4E0D\u5E94\u8BE5\u4F7F\u7528\u3002</p><h3 id="reset-timedout-connection" tabindex="-1"><a class="header-anchor" href="#reset-timedout-connection" aria-hidden="true">#</a> reset_timedout_connection</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>reset_timedout_connection</strong> <code>on</code> | <code>off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">reset_timedout_connection off;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u542F\u7528\u6216\u7981\u7528\u91CD\u7F6E\u8D85\u65F6\u8FDE\u63A5\u3002\u91CD\u7F6E\u8FC7\u7A0B\u5982\u4E0B\u3002\u5728\u5173\u95ED\u4E00\u4E2A\u5957\u63A5\u5B57\u4E4B\u524D\uFF0C<code>SO_LINGER</code> \u9009\u9879\u8D85\u65F6\u503C\u88AB\u8BBE\u7F6E\u4E3A 0\u3002\u5F53\u5957\u63A5\u5B57\u5173\u95ED\u65F6\uFF0CTCP RST \u88AB\u53D1\u9001\u5230\u5BA2\u6237\u7AEF\uFF0C\u5E76\u4E14\u91CA\u653E\u8BE5\u5957\u63A5\u5B57\u5360\u7528\u7684\u6240\u6709\u5185\u5B58\u3002\u8FD9\u6709\u52A9\u4E8E\u907F\u514D\u957F\u65F6\u95F4\u6301\u6709\u4E00\u4E2A\u7F13\u51B2\u533A\u5DF2\u7ECF\u88AB\u586B\u5145 FIN_WAIT1 \u72B6\u6001\u7684\u5DF2\u5173\u95ED\u5957\u63A5\u5B57\u3002</p><p>\u5E94\u8BE5\u6CE8\u610F\uFF0C\u8D85\u65F6\u7684 keep-alive \u8FDE\u63A5\u88AB\u6B63\u5E38\u5173\u95ED\u3002</p><h3 id="resolver" tabindex="-1"><a class="header-anchor" href="#resolver" aria-hidden="true">#</a> resolver</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>resolver</strong> \`address ... [valid=time] [ipv6=on</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">\u2014\u2014</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u5C06\u7528\u4E8E\u89E3\u6790 upstream \u670D\u52A1\u5668\u540D\u79F0\u7684\u540D\u79F0\u670D\u52A1\u5668\u914D\u7F6E\u8FDB\u6307\u5B9A\u7684\u5730\u5740\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">resolver</span> 127.0.0.1 [:: 1]:5353</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u5730\u5740\u53EF\u4EE5\u6307\u5B9A\u4E3A\u57DF\u540D\u6216 IP \u5730\u5740\uFF0C\u4E5F\u53EF\u4EE5\u6307\u5B9A\u4E00\u4E2A\u53EF\u9009\u7684\u7AEF\u53E3\uFF081.3.1\uFF0C1.2.2\uFF09\u3002\u5982\u679C\u6CA1\u6709\u6307\u5B9A\u7AEF\u53E3\uFF0C\u5219\u4F7F\u7528\u7AEF\u53E3 53\u3002\u540D\u79F0\u670D\u52A1\u5668\u4EE5\u8F6E\u8BE2\u65B9\u5F0F\u67E5\u8BE2\u3002</p><blockquote><p>\u5728 1.1.7 \u7248\u672C\u4E4B\u524D\uFF0C\u53EA\u80FD\u914D\u7F6E\u4E00\u4E2A\u540D\u79F0\u670D\u52A1\u5668\u3002\u4ECE 1.3.1 \u548C 1.2.2 \u7248\u672C\u5F00\u59CB\uFF0C\u652F\u6301\u4F7F\u7528 IPv6 \u5730\u5740\u6765\u6307\u5B9A\u540D\u79F0\u670D\u52A1\u5668\u3002</p></blockquote><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Cnginx \u5C06\u5728\u89E3\u6790\u65F6\u67E5\u627E IPv4 \u548C IPv6 \u5730\u5740\u3002\u5982\u679C\u4E0D\u60F3\u67E5\u627E IPv6 \u5730\u5740\uFF0C\u5219\u53EF\u4EE5\u6307\u5B9A <code>ipv6=off</code> \u53C2\u6570\u3002</p><blockquote><p>\u4ECE 1.5.8 \u7248\u672C\u5F00\u59CB\uFF0C\u652F\u6301\u5C06\u540D\u79F0\u89E3\u6790\u4E3A IPv6 \u5730\u5740\u3002</p></blockquote><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Cnginx \u4F7F\u7528\u54CD\u5E94\u7684 TTL \u503C\u7F13\u5B58\u56DE\u590D\u3002\u53EF\u9009\u7684 <code>valid</code> \u53C2\u6570\u53EF\u4EE5\u8986\u76D6\u5B83\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">resolver</span> 127.0.0.1 [:: 1]:5353 valid=30s</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><blockquote><p>\u5728 1.1.9 \u7248\u672C\u4E4B\u524D\uFF0C\u7F13\u5B58\u65F6\u95F4\u662F\u4E0D\u80FD\u8C03\u6574\u7684\uFF0Cnginx \u603B\u662F\u7F13\u5B58 5 \u5206\u949F\u7684\u56DE\u590D\u3002</p></blockquote><blockquote><p>\u4E3A\u4E86\u9632\u6B62 DNS \u6B3A\u9A97\uFF0C\u5EFA\u8BAE\u5728\u5B89\u5168\u7684\u53EF\u4FE1\u4EFB\u672C\u5730\u7F51\u7EDC\u4E2D\u914D\u7F6E DNS \u670D\u52A1\u5668\u3002</p></blockquote><h3 id="satisfy" tabindex="-1"><a class="header-anchor" href="#satisfy" aria-hidden="true">#</a> satisfy</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>satisfy</strong> <code>all</code> | <code>any</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">satisfy all;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table>`,24),rn=t("\u5982\u679C\u6240\u6709\uFF08\u5168\u90E8\uFF09\u6216\u81F3\u5C11\u4E00\u4E2A\uFF08\u4EFB\u610F\u4E00\u4E2A\uFF09 "),dn=t("ngx_http_access_module"),cn=t("\u3001"),pn=t("ngx_http_auth_basic_module"),gn=t("\u3001"),hn=t("ngx_http_auth_request_module"),_n=t(" \u6216 "),un=t("ngx_http_auth_jwt_module"),fn=t(" \u6A21\u5757\u5141\u8BB8\u8BBF\u95EE\uFF0C\u5219\u5141\u8BB8\u8BBF\u95EE\u3002"),bn=l(`<p>\u793A\u4F8B\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">satisfy</span> any</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">allow</span> 192.168.1.0/32</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">deny</span>  all</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">auth_basic</span>           <span class="token string">&quot;closed site&quot;</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">auth_basic_user_file</span> conf/htpasswd</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="send-lowat" tabindex="-1"><a class="header-anchor" href="#send-lowat" aria-hidden="true">#</a> send_lowat</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>send_lowat</strong> <code>size</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">send_lowat 0;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table>`,4),xn=t("\u5982\u679C\u6307\u4EE4\u8BBE\u7F6E\u4E3A\u975E\u96F6\u503C\uFF0Cnginx \u5C06\u5C1D\u8BD5\u901A\u8FC7\u4F7F\u7528 "),yn={href:"http://nginx.org/en/docs/events.html#kqueue",target:"_blank",rel:"noopener noreferrer"},mn=t("kqueue"),kn=t(" \u65B9\u6CD5\u7684 "),vn=e("code",null,"NOTE_LOWAT",-1),En=t(" \u6807\u5FD7\u6216"),wn=e("code",null,"SO_SNDLOWAT",-1),An=t(" \u5957\u63A5\u5B57\u9009\u9879\u6765\u6700\u5C0F\u5316\u5BA2\u6237\u7AEF\u5957\u63A5\u5B57\u4E0A\u7684\u53D1\u9001\u64CD\u4F5C\u6570\u3002\u5728\u8FD9\u4E24\u79CD\u60C5\u51B5\u4E0B\u90FD\u4F7F\u7528\u5230\u4E86\u6307\u5B9A\u7684 "),zn=e("code",null,"size",-1),qn=t("\u3002"),$n=l(`<p>\u8BE5\u6307\u4EE4\u5728 Linux\u3001Solaris \u548C Windows \u4E0A\u88AB\u5FFD\u7565\u3002</p><h3 id="send-timeout" tabindex="-1"><a class="header-anchor" href="#send-timeout" aria-hidden="true">#</a> send_timeout</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>send_timeout</strong> <code>time</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">send_timeout 60s;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u8BBE\u7F6E\u5411\u5BA2\u6237\u7AEF\u53D1\u9001\u54CD\u5E94\u7684\u8D85\u65F6\u65F6\u95F4\u3002\u8D85\u65F6\u8BBE\u7F6E\u53EA\u9650\u5B9A\u5728\u4E24\u6B21\u8FDE\u7EED\u7684\u5199\u5165\u64CD\u4F5C\u4E4B\u95F4\uFF0C\u800C\u4E0D\u662F\u7528\u4E8E\u6574\u4E2A\u54CD\u5E94\u7684\u4F20\u8F93\u3002\u5982\u679C\u5BA2\u6237\u7AEF\u5728\u6B64\u65F6\u95F4\u5185\u6CA1\u6709\u6536\u5230\u4EFB\u4F55\u5185\u5BB9\uFF0C\u5219\u8FDE\u63A5\u5C06\u88AB\u5173\u95ED\u3002</p><h3 id="sendfile" tabindex="-1"><a class="header-anchor" href="#sendfile" aria-hidden="true">#</a> sendfile</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>sendfile</strong> <code>on</code> | <code>off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">sendfile off;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location\u3001location \u4E2D\u7684 if</td></tr></tbody></table><p>\u542F\u7528\u6216\u7981\u7528 <code>sendfile()</code>\u3002</p><p>\u4ECE nginx 0.8.12 \u548C FreeBSD 5.2.1 \u5F00\u59CB\uFF0C\u53EF\u4EE5\u7528 <a href="#aio">aio</a> \u6765\u4E3A <code>sendfile()</code> \u9884\u52A0\u8F7D\u6570\u636E\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /video/</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">sendfile</span>       <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">tcp_nopush</span>     <span class="token boolean">on</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">aio</span>            <span class="token boolean">on</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u5728\u6B64\u914D\u7F6E\u4E2D\uFF0C\u4F7F\u7528 <code>SF_NODISKIO</code> \u6807\u5FD7\u8C03\u7528 <code>sendfile()</code>\uFF0C\u4F7F\u5176\u4E0D\u4F1A\u963B\u585E\u78C1\u76D8 I/O\uFF0C\u800C\u662F\u4EE5\u62A5\u544A\u6570\u636E\u4E0D\u5728\u5185\u5B58\u4E2D\u7684\u65B9\u5F0F\u4EE3\u66FF\u3002\u7136\u540E nginx \u901A\u8FC7\u8BFB\u53D6\u4E00\u4E2A\u5B57\u8282\u6765\u542F\u52A8\u5F02\u6B65\u6570\u636E\u52A0\u8F7D\u3002\u5728\u7B2C\u4E00\u6B21\u8BFB\u53D6\u65F6\uFF0CFreeBSD \u5185\u6838\u4F1A\u5C06\u6587\u4EF6\u7684\u7B2C\u4E00\u4E2A 128K \u5B57\u8282\u52A0\u8F7D\u5230\u5185\u5B58\u4E2D\uFF0C\u4F46\u662F\u4E0B\u4E00\u6B21\u8BFB\u53D6\u53EA\u80FD\u4EE5 16K \u5757\u52A0\u8F7D\u6570\u636E\u3002\u53EF\u4EE5\u4F7F\u7528 <a href="#read_ahead">read_ahead</a> \u6307\u4EE4\u8FDB\u884C\u4FEE\u6539\u3002</p><blockquote><p>\u5728 1.7.11 \u7248\u672C\u4E4B\u524D\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>aio sendfile</code> \u6765\u542F\u7528\u9884\u52A0\u8F7D\u3002</p></blockquote><h3 id="sendfile-max-chunk" tabindex="-1"><a class="header-anchor" href="#sendfile-max-chunk" aria-hidden="true">#</a> sendfile_max_chunk</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;">**sendfile_max_chunk ** <code>size</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">sendfile_max_chunk 0;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u8BBE\u7F6E\u4E3A\u975E\u96F6\u503C\u65F6\uFF0C\u53EF\u9650\u5236\u5355\u4E2A <code>sendfile()</code> \u8C03\u7528\u65F6\u4F20\u8F93\u7684\u6570\u636E\u91CF\u3002\u5982\u679C\u6CA1\u6709\u9650\u5236\uFF0C\u4E00\u4E2A\u5FEB\u901F\u8FDE\u63A5\u53EF\u80FD\u4F1A\u5B8C\u5168\u5360\u7528\u5DE5\u4F5C\u8FDB\u7A0B\u3002</p><h3 id="server" tabindex="-1"><a class="header-anchor" href="#server" aria-hidden="true">#</a> server</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>server</strong> <code>{ ... }</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">\u2014\u2014</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http</td></tr></tbody></table>`,16),Sn=t("\u8BBE\u7F6E\u865A\u62DF\u670D\u52A1\u5668\u7684\u914D\u7F6E\u3002\u57FA\u4E8E IP\uFF08\u57FA\u4E8E IP \u5730\u5740\uFF09\u548C\u57FA\u4E8E\u540D\u79F0\uFF08\u57FA\u4E8E "),In=e("code",null,"Host",-1),Fn=t(" \u8BF7\u6C42\u5934\u5B57\u6BB5\uFF09\u7684\u865A\u62DF\u670D\u52A1\u5668\u4E4B\u95F4\u6CA1\u6709\u660E\u786E\u7684\u754C\u9650\u3002\u76F8\u53CD\uFF0C"),Dn=e("a",{href:"#listen"},"listen",-1),Pn=t(" \u6307\u4EE4\u63CF\u8FF0\u5E94\u63A5\u53D7\u670D\u52A1\u5668\u8FDE\u63A5\u7684\u6240\u6709\u5730\u5740\u548C\u7AEF\u53E3\uFF0C"),Tn=e("a",{href:"#server_name"},"server_name",-1),On=t(" \u6307\u4EE4\u5217\u51FA\u6240\u6709\u670D\u52A1\u5668\u540D\u79F0\u3002"),Cn={href:"http://nginx.org/en/docs/http/request_processing.html",target:"_blank",rel:"noopener noreferrer"},Ln=t("\u5982\u4F55\u5904\u7406\u8BF7\u6C42"),Rn=t("\u6587\u6863\u4E2D\u63D0\u4F9B\u4E86\u914D\u7F6E\u793A\u4F8B\u3002"),Nn=l(`<h3 id="server-name" tabindex="-1"><a class="header-anchor" href="#server-name" aria-hidden="true">#</a> server_name</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>server_name</strong> <code>name ...</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">server_name &quot;&quot;;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">server</td></tr></tbody></table><p>\u8BBE\u7F6E\u865A\u62DF\u670D\u52A1\u5668\u540D\u79F0\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server_name</span> example.com www.example.com</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u7B2C\u4E00\u4E2A\u540D\u5B57\u5C06\u6210\u4E3A\u4E3B\u670D\u52A1\u5668\u540D\u79F0\u3002</p><p>\u670D\u52A1\u5668\u540D\u79F0\u53EF\u4EE5\u5305\u542B\u4E00\u4E2A\u661F\u53F7\uFF08<code>*</code>\uFF09\u4EE5\u4EE3\u66FF\u540D\u79F0\u7684\u7B2C\u4E00\u90E8\u5206\u6216\u6700\u540E\u4E00\u90E8\u5206\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server_name</span> example.com *.example.com www.example.*</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u8FD9\u6837\u7684\u540D\u79F0\u88AB\u79F0\u4E3A\u901A\u914D\u7B26\u540D\u79F0\u3002</p><p>\u4E0A\u9762\u63D0\u5230\u7684\u524D\u4E24\u4E2A\u540D\u5B57\u53EF\u4EE5\u5408\u5E76\u6210\u4E00\u4E2A\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server_name</span> .example.com</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u4E5F\u53EF\u4EE5\u5728\u670D\u52A1\u5668\u540D\u79F0\u4E2D\u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u5728\u540D\u79F0\u524D\u9762\u52A0\u4E0A\u6CE2\u6D6A\u53F7\uFF08<code>\u301C</code>\uFF09\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server_name</span> www.example.com ~^www\\d+\\.example\\.com$</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u6B63\u5219\u8868\u8FBE\u5F0F\u53EF\u4EE5\u5305\u542B\u4E4B\u540E\u7528\u4E8E\u5176\u4ED6\u6307\u4EE4\u7684\u6355\u83B7\uFF080.7.40\uFF09\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server_name</span> ~^(www\\.)?(.+)$</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">root</span> /sites/<span class="token variable">$2</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server_name</span> _</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">root</span> /sites/default</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>\u5728\u6B63\u5219\u8868\u8FBE\u5F0F\u4E2D\u547D\u540D\u6355\u83B7\u521B\u5EFA\u53D8\u91CF\uFF080.8.25\uFF09\uFF0C\u4E4B\u540E\u53EF\u5728\u5176\u4ED6\u6307\u4EE4\u4E2D\u4F7F\u7528\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server_name</span> ~^(www\\.)?(?&lt;domain&gt;.+)$</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">root</span> /sites/<span class="token variable">$domain</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server_name</span> _</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">root</span> /sites/default</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>\u5982\u679C\u6307\u4EE4\u53C2\u6570\u8BBE\u7F6E\u4E3A <code>$hostname</code>\uFF080.9.4\uFF09\uFF0C\u5219\u5C06\u66FF\u6362\u4E3A\u673A\u5668\u7684\u4E3B\u673A\u540D\u3002</p><p>\u4E5F\u53EF\u4EE5\u6307\u5B9A\u4E00\u4E2A\u7A7A\u7684\u670D\u52A1\u5668\u540D\u79F0\uFF080.7.11\uFF09\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server_name</span> www.example.com <span class="token string">&quot;&quot;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u5B83\u5141\u8BB8\u8FD9\u4E2A\u670D\u52A1\u5668\u5BF9\u7ED9\u5B9A\u7684 address:port \u5BF9\u5904\u7406\u6CA1\u6709 <code>Host</code> \u5934\u7684\u8BF7\u6C42\uFF0C\u800C\u4E0D\u662F\u9ED8\u8BA4\u7684\u670D\u52A1\u5668\u3002\u8FD9\u662F\u9ED8\u8BA4\u8BBE\u7F6E\u3002</p><blockquote><p>\u5728 0.8.48 \u4E4B\u524D\uFF0C\u9ED8\u8BA4\u4F7F\u7528\u673A\u5668\u7684\u4E3B\u673A\u540D\u3002</p></blockquote><p>\u5728\u6309\u540D\u79F0\u641C\u7D22\u865A\u62DF\u670D\u52A1\u5668\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u5982\u679C\u540D\u79F0\u4E0E\u591A\u4E2A\u6307\u5B9A\u53D8\u4F53\u76F8\u5339\u914D\uFF08\u4F8B\u5982\uFF0C\u901A\u914D\u7B26\u540D\u79F0\u548C\u6B63\u5219\u8868\u8FBE\u5F0F\u5339\u914D\uFF09\uFF0C\u5C06\u6309\u7167\u4EE5\u4E0B\u4F18\u5148\u987A\u5E8F\u9009\u62E9\u7B2C\u4E00\u4E2A\u5339\u914D\u53D8\u4F53\uFF1A</p><ol><li>\u786E\u5207\u7684\u540D\u5B57</li><li>\u4EE5\u661F\u53F7\u5F00\u5934\u7684\u6700\u957F\u901A\u914D\u7B26\u540D\u79F0\uFF0C\u4F8B\u5982 <code>*.example.com</code></li><li>\u4EE5\u661F\u53F7\u7ED3\u5C3E\u7684\u6700\u957F\u901A\u914D\u7B26\u540D\u79F0\uFF0C\u4F8B\u5982 <code>mail.*</code></li><li>\u7B2C\u4E00\u4E2A\u5339\u914D\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\uFF08\u6309\u7167\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u51FA\u73B0\u987A\u5E8F\uFF09</li></ol>`,23),Bn=t("\u670D\u52A1\u5668\u540D\u79F0\u7684\u8BE6\u7EC6\u63CF\u8FF0\u5728\u5355\u72EC\u7684"),Un={href:"http://nginx.org/en/docs/http/server_names.html",target:"_blank",rel:"noopener noreferrer"},Kn=t("\u670D\u52A1\u5668\u540D\u79F0"),Hn=t("\u6587\u6863\u4E2D\u63D0\u4F9B\u3002"),Mn=l('<h3 id="server-name-in-redirect" tabindex="-1"><a class="header-anchor" href="#server-name-in-redirect" aria-hidden="true">#</a> server_name_in_redirect</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>server_name</strong> <code>on</code> | <code>off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">server_name_in_redirect off;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u542F\u7528\u6216\u7981\u7528\u5728\u7531 nginx \u53D1\u51FA\u7684 <a href="#absolute_redirect">absolute</a> \u6307\u4EE4\u4E2D\u4F7F\u7528\u7531 <a href="#server_name">server_name</a> \u6307\u4EE4\u6307\u5B9A\u7684\u4E3B\u670D\u52A1\u5668\u540D\u79F0\u3002\u5F53\u7981\u7528\u4E3B\u670D\u52A1\u5668\u540D\u79F0\u65F6\uFF0C\u5C06\u4F7F\u7528 <code>Host</code> \u8BF7\u6C42\u5934\u5B57\u6BB5\u4E2D\u7684\u540D\u79F0\u3002\u5982\u679C\u6B64\u5B57\u6BB5\u4E0D\u5B58\u5728\uFF0C\u5219\u4F7F\u7528\u670D\u52A1\u5668\u7684 IP \u5730\u5740\u3002</p><p>\u91CD\u5B9A\u5411\u4E2D\u4F7F\u7528\u7AEF\u53E3\u7531 <a href="#port_in_redirect">port_in_redirect</a> \u6307\u4EE4\u63A7\u5236\u3002</p><h3 id="server-names-hash-bucket-size" tabindex="-1"><a class="header-anchor" href="#server-names-hash-bucket-size" aria-hidden="true">#</a> server_names_hash_bucket_size</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>server_names_hash_bucket_size</strong> <code>size</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">server_names_hash_bucket_size 32</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http</td></tr></tbody></table>',6),Vn=t("\u8BBE\u7F6E\u670D\u52A1\u5668\u540D\u79F0\u54C8\u5E0C\u8868\u7684\u5B58\u50A8\u6876\u5927\u5C0F\u3002\u9ED8\u8BA4\u503C\u53D6\u51B3\u4E8E\u5904\u7406\u5668\u7F13\u5B58\u884C\u7684\u5927\u5C0F\u3002\u8BBE\u7F6E\u54C8\u5E0C\u8868\u7684\u7EC6\u8282\u5728\u5355\u72EC\u7684"),Gn={href:"http://nginx.org/en/docs/hash.html",target:"_blank",rel:"noopener noreferrer"},Xn=t("\u6587\u6863"),Yn=t("\u4E2D\u63D0\u4F9B\u3002"),jn=l('<h3 id="server-names-hash-max-size" tabindex="-1"><a class="header-anchor" href="#server-names-hash-max-size" aria-hidden="true">#</a> server_names_hash_max_size</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>server_names_hash_max_size</strong> <code>size</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">server_names_hash_max_size 512;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http</td></tr></tbody></table><p>\u8BBE\u7F6E\u670D\u52A1\u5668\u540D\u79F0\u54C8\u5E0C\u8868\u7684\u6700\u5927\u5927\u5C0F\u3002\u8BBE\u7F6E\u54C8\u5E0C\u8868\u7684\u7EC6\u8282\u5728\u5355\u72EC\u7684<a href="(http://nginx.org/en/docs/hash.html)">\u6587\u6863</a>\u4E2D\u63D0\u4F9B\u3002</p><h3 id="server-tokens" tabindex="-1"><a class="header-anchor" href="#server-tokens" aria-hidden="true">#</a> server_tokens</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>server_tokens</strong> <code>on</code> | <code>off</code> | <code>build</code> | <code>string</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">server_tokens on;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u5728\u9519\u8BEF\u9875\u9762\u548C <code>Server</code> \u54CD\u5E94\u5934\u5B57\u6BB5\u4E2D\u542F\u7528\u6216\u7981\u7528\u53D1\u9001 nginx \u7248\u672C\u3002</p><p><code>build</code> \u53C2\u6570\uFF081.11.10\uFF09\u80FD\u591F\u53D1\u9001\u6784\u5EFA\u540D\u79F0\u4EE5\u53CA nginx \u7248\u672C\u3002</p>',7),Wn=t("\u6B64\u5916\uFF0C\u4F5C\u4E3A\u6211\u4EEC\u7684"),Qn={href:"http://nginx.com/products/?_ga=2.14041591.1300915338.1513355851-1890203964.1497190280",target:"_blank",rel:"noopener noreferrer"},Jn=t("\u5546\u4E1A\u8BA2\u9605"),Zn=t("\u7684\u4E00\u90E8\u5206\uFF0C\u4ECE1.9.13 \u7248\u672C\u5F00\u59CB\uFF0C\u53EF\u4EE5\u4F7F\u7528\u5E26\u6709\u53D8\u91CF\u7684\u5B57\u7B26\u4E32\u663E\u5F0F\u8BBE\u7F6E\u9519\u8BEF\u9875\u9762\u4E0A\u7684\u7B7E\u540D\u548C "),ts=e("code",null,"Server",-1),es=t(" \u54CD\u5E94\u5934\u5B57\u6BB5\u503C\u3002\u6307\u5B9A\u7A7A\u5B57\u7B26\u4E32\u5C06\u7981\u7528 "),ns=e("code",null,"Server",-1),ss=t(" \u5B57\u6BB5\u7684\u53D1\u9001\u3002"),as=l(`<h3 id="tcp-nodelay" tabindex="-1"><a class="header-anchor" href="#tcp-nodelay" aria-hidden="true">#</a> tcp_nodelay</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>tcp_nodelay</strong> <code>on</code> | <code>off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">tcp_nodelay on;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u542F\u7528\u6216\u7981\u7528 <code>TCP_NODELAY</code> \u9009\u9879\u7684\u4F7F\u7528\u3002\u8BE5\u9009\u9879\u4EC5\u5728\u8FDE\u63A5\u8F6C\u6362\u5230 keep-alive \u72B6\u6001\u65F6\u542F\u7528\u3002</p><h3 id="tcp-nopush" tabindex="-1"><a class="header-anchor" href="#tcp-nopush" aria-hidden="true">#</a> tcp_nopush</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>tcp_nopush</strong> <code>on</code> | <code>off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">tcp_nopush off;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table><p>\u542F\u7528\u6216\u7981\u7528\u5728 FreeBSD \u4E0A\u4F7F\u7528 <code>TCP_NOPUSH</code> \u5957\u63A5\u5B57\u9009\u9879\u6216\u5728 Linux \u4E0A\u4F7F\u7528 <code>TCP_CORK</code> \u5957\u63A5\u5B57\u9009\u9879\u3002\u8FD9\u4E9B\u9009\u9879\u53EA\u6709\u5728\u4F7F\u7528 <a href="#sendfile">sendfile</a> \u65F6\u624D\u80FD\u4F7F\u7528\u3002\u542F\u7528\u8BE5\u9009\u9879\u5C06\u5141\u8BB8\uFF1A</p><ul><li>\u5728 Linux \u548C FreeBSD 4 \u4E0A\uFF0C\u5728\u540C\u4E00\u5305\u4E2D\u53EF\u53D1\u9001\u54CD\u5E94\u5934\u548C\u6587\u4EF6\u5F00\u5934\u3002</li><li>\u4EE5\u5B8C\u6574\u5305\u7684\u65B9\u5F0F\u53D1\u9001\u4E00\u4E2A\u6587\u4EF6</li></ul><h3 id="try-files" tabindex="-1"><a class="header-anchor" href="#try-files" aria-hidden="true">#</a> try_files</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>try_files</strong> <code>file ... uri</code>; <br> <strong>try_files</strong> <code>file ... =code</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">\u2014\u2014</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">server\u3001location</td></tr></tbody></table><p>\u4EE5\u6307\u5B9A\u987A\u5E8F\u68C0\u67E5\u6587\u4EF6\u662F\u5426\u5B58\u5728\uFF0C\u5E76\u4F7F\u7528\u7B2C\u4E00\u4E2A\u627E\u5230\u7684\u6587\u4EF6\u8FDB\u884C\u8BF7\u6C42\u5904\u7406\u3002\u5904\u7406\u5C06\u5728\u5F53\u524D\u4E0A\u4E0B\u6587\u4E2D\u6267\u884C\u3002\u6307\u5411\u6587\u4EF6\u7684\u8DEF\u5F84\u6839\u636E <a href="#root">root</a> \u548C <a href="#alias">alias</a> \u6307\u4EE4\u4ECE <code>file</code> \u53C2\u6570\u6784\u9020\u3002\u53EF\u4EE5\u901A\u8FC7\u5728\u540D\u79F0\u672B\u5C3E\u6307\u5B9A\u659C\u7EBF\u6765\u68C0\u67E5\u76EE\u5F55\u662F\u5426\u5B58\u5728\uFF0C\u4F8B\u5982\uFF0C<code>$URI/</code>\u3002\u5982\u679C\u627E\u4E0D\u5230\u4EFB\u4F55\u6587\u4EF6\uFF0C\u5219\u5185\u90E8\u91CD\u5B9A\u5411\u5C06\u6307\u5411\u6700\u540E\u4E00\u4E2A\u53C2\u6570\u4E2D\u6307\u5B9A\u7684 <code>uri</code>\u3002\u4F8B\u5982\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /images/</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">try_files</span> <span class="token variable">$uri</span> /images/default.gif</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> = /images/default.gif</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">expires</span> <span class="token number">30s</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u6700\u540E\u4E00\u4E2A\u53C2\u6570\u4E5F\u53EF\u4EE5\u6307\u5411\u4E00\u4E2A\u547D\u540D\u7684 location \uFF0C\u5982\u4EE5\u4E0B\u793A\u4F8B\u3002\u4ECE 0.7.51 \u7248\u672C\u5F00\u59CB\uFF0C\u6700\u540E\u4E00\u4E2A\u53C2\u6570\u4E5F\u53EF\u4EE5\u662F\u4E00\u4E2A <code>code</code>\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">try_files</span> <span class="token variable">$uri</span> <span class="token variable">$uri</span>/index.html <span class="token variable">$uri</span>.html =404</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u4EE3\u7406 Mongrel \u793A\u4F8B\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">try_files</span> /system/maintenance.html
              <span class="token variable">$uri</span> <span class="token variable">$uri</span>/index.html <span class="token variable">$uri</span>.html
              @mongrel</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> @mongrel</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span> http://mongrel</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Drupal/FastCGI \u793A\u4F8B\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">try_files</span> <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ @drupal</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> ~ \\.php$</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">try_files</span> <span class="token variable">$uri</span> @drupal</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">fastcgi_pass</span> ...</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">fastcgi_param</span> SCRIPT_FILENAME /path/to<span class="token variable">$fastcgi_script_name</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_param</span> SCRIPT_NAME     <span class="token variable">$fastcgi_script_name</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_param</span> QUERY_STRING    <span class="token variable">$args</span></span><span class="token punctuation">;</span>

    ... other fastcgi_param&#39;s
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> @drupal</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">fastcgi_pass</span> ...</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">fastcgi_param</span> SCRIPT_FILENAME /path/to/index.php</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_param</span> SCRIPT_NAME     /index.php</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">fastcgi_param</span> QUERY_STRING    q=<span class="token variable">$uri</span>&amp;<span class="token variable">$args</span></span><span class="token punctuation">;</span>

    ... other fastcgi_param&#39;s
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>\u5728\u4EE5\u4E0B\u793A\u4F8B\u4E2D</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">try_files</span> <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ @drupal</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>try_files \u6307\u4EE4\u76F8\u5F53\u4E8E</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">error_page</span> <span class="token number">404</span> = @drupal</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">log_not_found</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u8FD8\u6709\u4E00\u4E2A\u793A\u4F8B</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> ~ \\.php$</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">try_files</span> <span class="token variable">$uri</span> @drupal</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">fastcgi_pass</span> ...</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">fastcgi_param</span> SCRIPT_FILENAME /path/to<span class="token variable">$fastcgi_script_name</span></span><span class="token punctuation">;</span>

    ...
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>\u5728\u5C06\u8BF7\u6C42\u4F20\u9012\u7ED9 FastCGI \u670D\u52A1\u5668\u4E4B\u524D\uFF0Ctry_files \u5C06\u68C0\u67E5 PHP \u6587\u4EF6\u662F\u5426\u5B58\u5728\u3002</p><p>Wordpress \u4E0E Joomla \u793A\u4F8B\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">try_files</span> <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ @wordpress</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> ~ \\.php$</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">try_files</span> <span class="token variable">$uri</span> @wordpress</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">fastcgi_pass</span> ...</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">fastcgi_param</span> SCRIPT_FILENAME /path/to<span class="token variable">$fastcgi_script_name</span></span><span class="token punctuation">;</span>
    ... other fastcgi_param&#39;s
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> @wordpress</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">fastcgi_pass</span> ...</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">fastcgi_param</span> SCRIPT_FILENAME /path/to/index.php</span><span class="token punctuation">;</span>
    ... other fastcgi_param&#39;s
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="types-hash-bucket-size" tabindex="-1"><a class="header-anchor" href="#types-hash-bucket-size" aria-hidden="true">#</a> types_hash_bucket_size</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>types_hash_bucket_size</strong> <code>size</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">types_hash_bucket_size 64;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table>`,28),ls=t("\u8BBE\u7F6E\u7C7B\u578B\u54C8\u5E0C\u8868\u6876\u5927\u5C0F\u3002\u8BBE\u7F6E\u54C8\u5E0C\u8868\u7684\u7EC6\u8282\u5728\u5355\u72EC\u7684"),os={href:"http://nginx.org/en/docs/hash.html",target:"_blank",rel:"noopener noreferrer"},rs=t("\u6587\u6863"),is=t("\u4E2D\u6709\u63D0\u4F9B\u3002"),ds=l('<blockquote><p>\u5728\u7248 1.5.13 \u672C\u4E4B\u524D\uFF0C\u9ED8\u8BA4\u503C\u53D6\u51B3\u4E8E\u5904\u7406\u5668\u7F13\u5B58\u884C\u7684\u5927\u5C0F\u3002</p></blockquote><h3 id="types-hash-max-size" tabindex="-1"><a class="header-anchor" href="#types-hash-max-size" aria-hidden="true">#</a> types_hash_max_size</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>types_hash_max_size</strong> <code>size</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">types_hash_max_size 1024;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server\u3001location</td></tr></tbody></table>',3),cs=t("\u8BBE\u7F6E\u7C7B\u578B\u54C8\u5E0C\u8868\u7684\u6700\u5927\u5927\u5C0F\u3002\u8BBE\u7F6E\u54C8\u5E0C\u8868\u7684\u7EC6\u8282\u5728\u5355\u72EC\u7684"),ps={href:"http://nginx.org/en/docs/hash.html",target:"_blank",rel:"noopener noreferrer"},gs=t("\u6587\u6863"),hs=t("\u4E2D\u6709\u63D0\u4F9B\u3002"),_s=l('<h3 id="underscores-in-headers" tabindex="-1"><a class="header-anchor" href="#underscores-in-headers" aria-hidden="true">#</a> underscores_in_headers</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>underscores_in_headers</strong> <code>on</code> | <code>off</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">underscores_in_headers off;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http\u3001server</td></tr></tbody></table><p>\u542F\u7528\u6216\u7981\u7528\u5728\u5BA2\u6237\u7AEF\u8BF7\u6C42\u5934\u5B57\u6BB5\u4E2D\u4F7F\u7528\u4E0B\u5212\u7EBF\u3002\u5F53\u7981\u7528\u4E0B\u5212\u7EBF\u65F6\uFF0C\u540D\u79F0\u4E2D\u5305\u542B\u4E0B\u5212\u7EBF\u7684\u8BF7\u6C42\u5934\u5B57\u6BB5\u5C06\u88AB\u6807\u8BB0\u4E3A\u65E0\u6548\uFF0C\u5E76\u53D7\u5236\u4E8E <a href="#ignore_invalid_headers">ignore_invalid_headers</a> \u6307\u4EE4\u3002</p><p>\u5982\u679C\u8BE5\u6307\u4EE4\u662F\u5728 <a href="#server">server</a> \u7EA7\u522B\u6307\u5B9A\uFF0C\u5219\u4EC5\u5728 server \u662F\u9ED8\u8BA4 server \u65F6\u624D\u4F7F\u7528\u8BE5\u6307\u4EE4\u3002\u6307\u5B9A\u7684\u503C\u4E5F\u9002\u7528\u4E8E\u76D1\u542C\u76F8\u540C\u5730\u5740\u548C\u7AEF\u53E3\u7684\u6240\u6709\u865A\u62DF\u670D\u52A1\u5668\u3002</p><h3 id="variables-hash-bucket-size" tabindex="-1"><a class="header-anchor" href="#variables-hash-bucket-size" aria-hidden="true">#</a> variables_hash_bucket_size</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>variables_hash_bucket_size</strong> <code>size</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">variables_hash_bucket_size size;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http</td></tr></tbody></table>',6),us=t("\u8BBE\u7F6E\u53D8\u91CF\u54C8\u5E0C\u8868\u6876\u5927\u5C0F\u3002\u8BBE\u7F6E\u54C8\u5E0C\u8868\u7684\u7EC6\u8282\u5728\u5355\u72EC\u7684"),fs={href:"http://nginx.org/en/docs/hash.html",target:"_blank",rel:"noopener noreferrer"},bs=t("\u6587\u6863"),xs=t("\u4E2D\u6709\u63D0\u4F9B\u3002"),ys=l('<h3 id="variables-hash-max-size" tabindex="-1"><a class="header-anchor" href="#variables-hash-max-size" aria-hidden="true">#</a> variables_hash_max_size</h3><table><thead><tr><th style="text-align:left;">-</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>\u8BED\u6CD5</strong></td><td style="text-align:left;"><strong>variables_hash_max_size</strong> <code>size</code>;</td></tr><tr><td style="text-align:left;"><strong>\u9ED8\u8BA4</strong></td><td style="text-align:left;">variables_hash_max_size 1024;</td></tr><tr><td style="text-align:left;"><strong>\u4E0A\u4E0B\u6587</strong></td><td style="text-align:left;">http</td></tr></tbody></table>',2),ms=t("\u8BBE\u7F6E\u53D8\u91CF\u54C8\u54C8\u5E0C\u8868\u7684\u6700\u5927\u5927\u5C0F\u3002\u8BBE\u7F6E\u54C8\u5E0C\u8868\u7684\u7EC6\u8282\u5728\u5355\u72EC\u7684"),ks={href:"http://nginx.org/en/docs/hash.html",target:"_blank",rel:"noopener noreferrer"},vs=t("\u6587\u6863"),Es=t("\u4E2D\u6709\u63D0\u4F9B\u3002"),ws=e("blockquote",null,[e("p",null,"\u5728 1.5.13 \u7248\u672C\u4E4B\u524D\uFF0C\u9ED8\u8BA4\u503C\u662F 512\u3002")],-1),As=e("p",null,[e("a",{id:"embedded_variables"})],-1),zs=e("h2",{id:"\u5185\u5D4C\u53D8\u91CF",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u5185\u5D4C\u53D8\u91CF","aria-hidden":"true"},"#"),t(" \u5185\u5D4C\u53D8\u91CF")],-1),qs=e("p",null,[e("code",null,"ngx_http_core_module"),t(" \u6A21\u5757\u652F\u6301\u5D4C\u5165\u5F0F\u53D8\u91CF\u540D\u79F0\u4E0E Apache \u670D\u52A1\u5668\u53D8\u91CF\u5339\u914D\u3002\u9996\u5148\uFF0C\u8FD9\u4E9B\u662F\u51FA\u73B0\u5728\u5BA2\u6237\u7AEF\u8BF7\u6C42\u5934\u5B57\u6BB5\u7684\u53D8\u91CF\uFF0C\u4F8B\u5982 "),e("code",null,"$http_user_agent"),t("\u3001"),e("code",null,"$http_cookie"),t(" \u7B49\u7B49\u3002\u8FD8\u6709\u5176\u4ED6\u53D8\u91CF\uFF1A")],-1),$s=l('<li><p><code>$arg_name</code></p><p>\u8BF7\u6C42\u884C\u4E2D\u7684 <code>name</code> \u53C2\u6570</p></li><li><p><code>$args</code></p><p>\u8BF7\u6C42\u884C\u4E2D\u7684\u53C2\u6570</p></li><li><p><code>$binary_remote_addr</code></p><p>\u5BA2\u6237\u7AEF\u5730\u5740\u4EE5\u4E8C\u8FDB\u5236\u5F62\u5F0F\u8868\u793A\uFF0C\u503C\u7684\u957F\u5EA6\u5BF9\u4E8E IPv4 \u5730\u5740\u603B\u662F 4 \u4E2A\u5B57\u8282\uFF0C\u5BF9\u4E8E IPv6 \u5730\u5740\u603B\u662F 16 \u4E2A\u5B57\u8282</p></li><li><p><code>$body_bytes_sent</code></p><p>\u53D1\u9001\u5230\u5BA2\u6237\u7AEF\u7684\u5B57\u8282\u6570\uFF0C\u4E0D\u5305\u62EC\u54CD\u5E94\u5934\u3002\u6B64\u53D8\u91CF\u4E0E <code>mod_log_config</code> Apache \u6A21\u5757\u7684 <code>\uFF05B</code> \u53C2\u6570\u517C\u5BB9</p></li><li><p><code>$bytes_sent</code></p><p>\u53D1\u9001\u5230\u5BA2\u6237\u7AEF\u7684\u5B57\u8282\u6570\uFF081.3.8\u30011.2.5\uFF09</p></li><li><p>$connection</p><p>\u8FDE\u63A5\u5E8F\u5217\u53F7\uFF081.3.8\u30011.2.5\uFF09</p></li><li><p><code>$connection_requests</code></p><p>\u5F53\u524D\u901A\u8FC7\u8FDE\u63A5\u8BF7\u6C42\u7684\u8BF7\u6C42\u6570\uFF081.3.8\u30011.2.5\uFF09</p></li><li><p><code>$connect_length</code></p><p><code>Content-Length</code> \u8BF7\u6C42\u5934\u5B57\u6BB5</p></li><li><p><code>$content_type</code></p><p><code>Content-Type</code> \u8BF7\u6C42\u5934\u5B57\u6BB5</p></li><li><p><code>$cookie_name</code></p><p>\u540D\u79F0\u4E3A <code>name</code> \u7684 cookie</p></li><li><p><code>$document_root</code></p><p>\u6839\u76EE\u5F55\u6216\u522B\u540D\u6307\u4EE4\u7684\u5F53\u524D\u8BF7\u6C42\u7684\u503C</p></li><li><p><code>$document_uri</code></p><p>\u4E0E <code>$uri</code> \u76F8\u540C</p></li><li><p><code>$host</code></p><p>\u6309\u7167\u4EE5\u4E0B\u4F18\u5148\u987A\u5E8F\uFF1A\u6765\u81EA\u8BF7\u6C42\u884C\u7684\u4E3B\u673A\u540D\uFF0C\u6765\u81EA <code>Host</code> \u8BF7\u6C42\u5934\u5B57\u6BB5\u7684\u4E3B\u673A\u540D\uFF0C\u6216\u4E0E\u8BF7\u6C42\u5339\u914D\u7684\u670D\u52A1\u5668\u540D</p></li><li><p><code>$hostname</code></p><p>\u4E3B\u673A\u540D</p></li><li><p><code>$http_name</code></p><p>\u4EFB\u610F\u8BF7\u6C42\u5934\u5B57\u6BB5,\u53D8\u91CF\u540D\u79F0\u7684\u6700\u540E\u4E00\u90E8\u5206\u662F\u5C06\u5B57\u6BB5\u540D\u79F0\u8F6C\u6362\u4E3A\u5C0F\u5199\uFF0C\u5E76\u7528\u7834\u6298\u53F7\u66FF\u6362\u4E3A\u4E0B\u5212\u7EBF</p></li><li><p><code>$https</code></p><p>\u5982\u679C\u8FDE\u63A5\u4EE5 SSL \u6A21\u5F0F\u8FD0\u884C\uFF0C\u5219\u4E3A <code>on</code>\uFF0C\u5426\u5219\u4E3A\u7A7A\u5B57\u7B26\u4E32</p></li><li><p><code>$is_args</code></p><p>\u5982\u679C\u8BF7\u6C42\u884C\u6709\u53C2\u6570\u5219\u4E3A <code>?</code>\uFF0C\u5426\u5219\u4E3A\u7A7A\u5B57\u7B26\u4E32</p></li><li><p><code>$limit_rate</code></p><p>\u8BBE\u7F6E\u8FD9\u4E2A\u53D8\u91CF\u53EF\u4EE5\u5B9E\u73B0\u54CD\u5E94\u901F\u7387\u9650\u5236\uFF0C\u89C1 <a href="#limit_rate">limit_rate</a></p></li><li><p><code>$msec</code></p><p>\u5F53\u524D\u65F6\u95F4\u4EE5\u6BEB\u79D2\u4E3A\u5355\u4F4D\uFF081.3.9\u30011.2.6\uFF09</p></li><li><p><code>$nginx_version</code></p><p>nginx \u7248\u672C</p></li><li><p><code>$pid</code></p><p>\u5DE5\u4F5C\u8FDB\u7A0B\u7684 PID</p></li><li><p><code>$pipe</code></p><p>\u5982\u679C\u8BF7\u6C42\u662F\u7BA1\u9053\u6A21\u5F0F\u5219\u4E3A <code>p</code>\uFF0C\u5426\u5219\u4E3A <code>.</code>\uFF081.3.12\u30011.2.7\uFF09</p></li><li><p><code>$proxy_protocol_addr</code></p><p>\u6765\u81EA PROXY \u534F\u8BAE\u5934\u7684\u5BA2\u6237\u7AEF\u5730\u5740\uFF0C\u5426\u5219\u4E3A\u7A7A\u5B57\u7B26\u4E32\uFF081.5.12\uFF09</p><p>\u8981\u5728 <a href="#listen">listen</a> \u6307\u4EE4\u4E2D\u8BBE\u7F6E <code>proxy_protocol</code> \u53C2\u6570\uFF0C\u5FC5\u987B\u5148\u542F\u7528 PROXY \u534F\u8BAE\u3002</p></li><li><p><code>$proxy_protocol_port</code></p><p>PROXY \u534F\u8BAE\u5934\u4E2D\u7684\u5BA2\u6237\u7AEF\u53E3\uFF0C\u5426\u5219\u4E3A\u7A7A\u5B57\u7B26\u4E32\uFF081.11.0\uFF09</p><p>\u8981\u5728 <a href="#listen">listen</a> \u6307\u4EE4\u4E2D\u8BBE\u7F6E <code>proxy_protocol</code> \u53C2\u6570\uFF0C\u5FC5\u987B\u5148\u542F\u7528 PROXY \u534F\u8BAE\u3002</p></li><li><p><code>$query_string</code></p><p>\u4E0E <code>$args</code> \u76F8\u540C</p></li><li><p><code>$realpath_root</code></p><p>\u4E0E\u5F53\u524D\u8BF7\u6C42\u7684 <a href="#root">root</a> \u6216 <a href="#alias">alias</a> \u6307\u4EE4\u503C\u76F8\u5BF9\u5E94\u7684\u7EDD\u5BF9\u8DEF\u5F84\u540D\uFF0C\u6240\u6709\u7B26\u53F7\u94FE\u63A5\u90FD\u5C06\u89E3\u6790\u4E3A\u5B9E\u9645\u8DEF\u5F84</p></li><li><p><code>$remote_addr</code></p><p>\u5BA2\u6237\u7AEF\u5730\u5740</p></li><li><p><code>$remote_port</code></p><p>\u5BA2\u6237\u7AEF\u7AEF\u53E3</p></li><li><p><code>$remote_user</code></p><p>\u57FA\u672C\u8EAB\u4EFD\u9A8C\u8BC1\u63D0\u4F9B\u7684\u7528\u6237\u540D</p></li><li><p><code>$request</code></p><p>\u5B8C\u6574\u7684\u539F\u59CB\u8BF7\u6C42\u884C</p></li>',30),Ss=e("p",null,[e("code",null,"$request_body")],-1),Is=e("p",null,"\u8BF7\u6C42\u6B63\u6587",-1),Fs=t("\u5F53\u8BF7\u6C42\u6B63\u6587\u88AB\u8BFB\u53D6\u5230"),Ds=e("a",{href:"#client_body_buffer_size"},"\u5185\u5B58\u7F13\u51B2\u533A",-1),Ps=t("\u65F6\uFF0C\u53D8\u91CF\u7684\u503C\u5728\u7531"),Ts=t("proxy_pass"),Os=t("\u3001"),Cs=t("fastcgi_pass"),Ls=t("\u3001"),Rs=t("uwsgi_pass"),Ns=t(" \u548C "),Bs=t("scgi_pass"),Us=t(" \u6307\u4EE4\u5904\u7406\u7684 location \u4E2D\u53EF\u7528\u3002"),Ks=e("p",null,[e("code",null,"$request_body_file")],-1),Hs=e("p",null,"\u5E26\u6709\u8BF7\u6C42\u6B63\u6587\u7684\u4E34\u65F6\u6587\u4EF6\u7684\u540D\u79F0",-1),Ms=t("\u5728\u5904\u7406\u7ED3\u675F\u65F6\uFF0C\u6587\u4EF6\u9700\u8981\u88AB\u5220\u9664\u3002\u60F3\u59CB\u7EC8\u5C06\u8BF7\u6C42\u4E3B\u4F53\u5199\u5165\u6587\u4EF6\u4E2D\uFF0C\u9700\u8981\u542F\u7528 "),Vs=e("a",{href:"#client_body_in_file_only"},"client_body_in_file_only",-1),Gs=t("\u3002\u5F53\u4E34\u65F6\u6587\u4EF6\u7684\u540D\u79F0\u5728\u4EE3\u7406\u8BF7\u6C42\u4E2D\u6216\u5728\u5411 FastCGI/uwsgi/SCGI \u670D\u52A1\u5668\u7684\u8BF7\u6C42\u4E2D\u4F20\u9012\u65F6\uFF0C\u5E94\u8BE5\u5206\u522B\u901A\u8FC7 "),Xs=t("proxy_pass_request_body off"),Ys=t("\u3001"),js=t("fastcgi_pass_request_body off"),Ws=t("\u3001"),Qs=t("uwsgi_pass_request_body off"),Js=t(" \u6216 "),Zs=t("scgi_pass_request_body off"),ta=t(" \u6307\u4EE4\u7981\u7528\u4F20\u9012\u8BF7\u6C42\u6B63\u6587\u3002"),ea=l('<li><p><code>$request_completion</code></p><p>\u5982\u679C\u8BF7\u6C42\u5DF2\u7ECF\u5B8C\u6210\uFF0C\u5219\u8FD4\u56DE <code>OK</code>\uFF0C\u5426\u5219\u8FD4\u56DE\u7A7A\u5B57\u7B26\u4E32</p></li><li><p><code>$request_filename</code></p><p>\u5F53\u524D\u8BF7\u6C42\u7684\u6587\u4EF6\u8DEF\u5F84\uFF0C\u57FA\u4E8E <a href="#root">root</a> \u6216 <a href="#alias">alias</a> \u6307\u4EE4\u4EE5\u53CA\u8BF7\u6C42 URI</p></li><li><p><code>$request_id</code></p><p>\u7531 16 \u4E2A\u968F\u673A\u5B57\u8282\u751F\u6210\u7684\u552F\u4E00\u8BF7\u6C42\u6807\u8BC6\u7B26\uFF0C\u4EE5\u5341\u516D\u8FDB\u5236\u8868\u793A\uFF081.11.0\uFF09</p></li><li><p><code>$request_length</code></p><p>\u8BF7\u6C42\u957F\u5EA6\uFF08\u5305\u62EC\u8BF7\u6C42\u884C\u3001\u5934\u90E8\u548C\u8BF7\u6C42\u4F53\uFF09\uFF081.3.12\u30011.2.7\uFF09</p></li><li><p><code>$request_method</code></p><p>\u8BF7\u6C42\u65B9\u6CD5\uFF0C\u901A\u5E38\u4E3A <code>GET</code> \u6216 <code>POST</code></p></li><li><p><code>$request_time</code></p><p>\u8BF7\u6C42\u5904\u7406\u65F6\u95F4\u4EE5\u6BEB\u79D2\u4E3A\u5355\u4F4D\uFF081.3.9\u30011.2.6\uFF09\u3002\u81EA\u5BA2\u6237\u7AEF\u8BFB\u53D6\u7B2C\u4E00\u4E2A\u5B57\u8282\u7684\u65F6\u95F4\u8D77</p></li><li><p><code>$request_uri</code></p><p>\u5B8C\u6574\u7684\u539F\u59CB\u8BF7\u6C42 URI\uFF08\u5E26\u53C2\u6570\uFF09</p></li><li><p><code>$scheme</code></p><p>\u8BF7\u6C42\u6A21\u5F0F\uFF0C<code>http</code> \u6216 <code>https</code></p></li><li><p><code>$sent_http_name</code></p><p>\u4EFB\u610F\u54CD\u5E94\u5934\u5B57\u6BB5\u3002\u53D8\u91CF\u540D\u79F0\u7684\u6700\u540E\u4E00\u90E8\u5206\u662F\u5C06\u5B57\u6BB5\u540D\u79F0\u8F6C\u6362\u4E3A\u5C0F\u5199\uFF0C\u5E76\u7528\u7834\u6298\u53F7\u66FF\u6362\u4E3A\u4E0B\u5212\u7EBF</p></li><li><p><code>$sent_trailer_name</code></p><p>\u54CD\u5E94\u7ED3\u675F\u65F6\u53D1\u9001\u7684\u4EFB\u610F\u5B57\u6BB5\uFF081.13.2\uFF09\u3002\u53D8\u91CF\u540D\u79F0\u7684\u6700\u540E\u4E00\u90E8\u5206\u662F\u5C06\u5B57\u6BB5\u540D\u79F0\u8F6C\u6362\u4E3A\u5C0F\u5199\uFF0C\u5E76\u7528\u7834\u6298\u53F7\u66FF\u6362\u4E3A\u4E0B\u5212\u7EBF</p></li><li><p><code>$server_addr</code></p><p>\u63A5\u53D7\u8BF7\u6C42\u7684\u670D\u52A1\u5668\u5730\u5740</p><p>\u901A\u5E38\u9700\u8981\u4E00\u4E2A\u7CFB\u7EDF\u8C03\u7528\u6765\u8BA1\u7B97\u8FD9\u4E2A\u53D8\u91CF\u7684\u503C\u3002\u4E3A\u4E86\u907F\u514D\u7CFB\u7EDF\u8C03\u7528\uFF0C<a href="#listen">listen</a> \u6307\u4EE4\u5FC5\u987B\u6307\u5B9A\u5730\u5740\u5E76\u4F7F\u7528 <code>bind</code> \u53C2\u6570\u3002</p></li><li><p><code>$server_name</code></p><p>\u63A5\u53D7\u8BF7\u6C42\u7684\u670D\u52A1\u5668\u540D\u79F0</p></li><li><p><code>$server_port</code></p><p>\u63A5\u53D7\u8BF7\u6C42\u7684\u670D\u52A1\u5668\u7AEF\u53E3</p></li>',13),na=e("p",null,[e("code",null,"$server_protocol")],-1),sa=t("\u8BF7\u6C42\u534F\u8BAE\uFF0C\u901A\u5E38\u4E3A "),aa=e("code",null,"HTTP/1.0",-1),la=t("\u3001"),oa=e("code",null,"HTTP/1.1",-1),ra=t(" \u6216 "),ia=t("HTTP/2.0"),da=l('<li><p><code>$status</code></p><p>\u54CD\u5E94\u72B6\u6001\uFF081.3.2\u30011.2.2\uFF09</p></li><li><p><code>$tcpinfo_rtt</code>\u3001<code>$tcpinfo_rttvar</code>\u3001<code>$tcpinfo_snd_cwnd</code>\u3001<code>$tcpinfo_rcv_space</code></p><p>\u6709\u5173\u5BA2\u6237\u7AEF TCP \u8FDE\u63A5\u7684\u4FE1\u606F\u3002\u5728\u652F\u6301 <code>TCP_INFO</code> \u5957\u63A5\u5B57\u9009\u9879\u7684\u7CFB\u7EDF\u4E0A\u53EF\u7528</p></li><li><p><code>$time_iso8601</code></p><p>\u672C\u5730\u65F6\u95F4\u91C7\u7528 ISO 8601 \u6807\u51C6\u683C\u5F0F\uFF081.3.12\u30011.2.7\uFF09</p></li><li><p><code>$time_local</code></p><p>\u901A\u7528\u65E5\u5FD7\u683C\u5F0F\uFF08Common Log Format\uFF09\u4E2D\u7684\u672C\u5730\u65F6\u95F4\uFF081.3.12\u30011.2.7\uFF09</p></li><li><p><code>$uri</code></p><p><a href="#location">\u89C4\u8303\u5316</a>\u8FC7\u7684\u5F53\u524D\u8BF7\u6C42 URI</p><p><code>$uri</code> \u7684\u503C\u53EF\u80FD\u5728\u8BF7\u6C42\u671F\u95F4\u4F1A\u6539\u53D8</p></li>',5),ca=e("h2",{id:"\u539F\u6587\u6863",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u539F\u6587\u6863","aria-hidden":"true"},"#"),t(" \u539F\u6587\u6863")],-1),pa={href:"http://nginx.org/en/docs/http/ngx_http_core_module.html",target:"_blank",rel:"noopener noreferrer"},ga=t("http://nginx.org/en/docs/http/ngx_http_core_module.html");function ha(_a,ua){const o=r("OutboundLink"),s=r("RouterLink");return c(),i(d,null,[h,e("p",null,[_,u,f,e("a",b,[x,n(o)]),y,e("a",m,[k,n(o)]),v,e("a",E,[w,n(o)]),A]),z,e("p",null,[q,$,S,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_perl_module.html"},{default:a(()=>[I]),_:1}),F,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_perl_module.html#methods"},{default:a(()=>[D]),_:1}),P]),T,e("blockquote",null,[e("p",null,[n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_autoindex_module.html"},{default:a(()=>[O]),_:1}),C,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_random_index_module.html"},{default:a(()=>[L]),_:1}),R,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_dav_module.html"},{default:a(()=>[N]),_:1}),B])]),U,e("ul",null,[K,H,e("li",null,[M,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_ssi_module.html"},{default:a(()=>[V]),_:1}),G,X,Y,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_addition_module.html"},{default:a(()=>[j]),_:1}),W,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_auth_request_module.html#auth_request"},{default:a(()=>[Q]),_:1}),J,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_mirror_module.html#mirror"},{default:a(()=>[Z]),_:1}),tt]),e("li",null,[et,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_rewrite_module.html#rewrite"},{default:a(()=>[nt]),_:1}),st])]),at,e("p",null,[lt,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_access_module.html"},{default:a(()=>[ot]),_:1}),rt,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_auth_basic_module.html"},{default:a(()=>[it]),_:1}),dt]),ct,e("p",null,[pt,gt,ht,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_proxy_module.html#proxy_ignore_headers"},{default:a(()=>[_t]),_:1}),ut,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_fastcgi_module.html#fastcgi_ignore_headers"},{default:a(()=>[ft]),_:1}),bt,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_uwsgi_module.html#uwsgi_ignore_headers"},{default:a(()=>[xt]),_:1}),yt,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_scgi_module.html#scgi_ignore_headers"},{default:a(()=>[mt]),_:1}),kt]),vt,e("p",null,[Et,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_core_module.html#lingering_close"},{default:a(()=>[wt]),_:1}),At]),zt,e("p",null,[qt,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_core_module.html#lingering_close"},{default:a(()=>[$t]),_:1}),St,It,Ft,Dt,Pt]),Tt,e("p",null,[Ot,Ct,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/%E4%BB%8B%E7%BB%8D/%E9%85%8D%E7%BD%AEHTTPS%E6%9C%8D%E5%8A%A1%E5%99%A8.html#single_http_https_server"},{default:a(()=>[Lt]),_:1}),Rt]),e("p",null,[Nt,Bt,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_v2_module.html"},{default:a(()=>[Ut]),_:1}),Kt,Ht,Mt]),e("p",null,[Vt,Gt,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_spdy_module.html"},{default:a(()=>[Xt]),_:1}),Yt,jt,Wt]),e("p",null,[Qt,Jt,e("a",Zt,[te,n(o)]),ee]),ne,se,e("ul",null,[ae,e("li",null,[le,e("p",null,[oe,e("strong",null,[e("a",re,[ie,n(o)])]),de]),e("blockquote",null,[e("p",null,[ce,e("a",pe,[ge,n(o)]),he])])]),_e,e("li",null,[ue,e("p",null,[fe,be,xe,ye,me,e("a",ke,[ve,n(o)]),Ee,e("a",we,[Ae,n(o)]),ze])]),qe,e("li",null,[$e,Se,e("blockquote",null,[e("p",null,[Ie,e("a",Fe,[De,n(o)]),Pe])])]),Te]),Oe,e("p",null,[Ce,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_proxy_module.html#proxy_pass"},{default:a(()=>[Le]),_:1}),Re,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_fastcgi_module.html#fastcgi_pass"},{default:a(()=>[Ne]),_:1}),Be,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_uwsgi_module.html#uwsgi_pass"},{default:a(()=>[Ue]),_:1}),Ke,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_scgi_module.html#scgi_pass"},{default:a(()=>[He]),_:1}),Me,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_memcached_module.html#memcached_pass"},{default:a(()=>[Ve]),_:1}),Ge]),Xe,e("p",null,[Ye,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_log_module.html#access_log"},{default:a(()=>[je]),_:1}),We]),Qe,e("p",null,[Je,Ze,tn,en,nn,e("a",sn,[an,n(o)]),ln]),on,e("p",null,[rn,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_access_module.html"},{default:a(()=>[dn]),_:1}),cn,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_auth_basic_module.html"},{default:a(()=>[pn]),_:1}),gn,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_auth_request_module.html"},{default:a(()=>[hn]),_:1}),_n,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_auth_jwt_module.html"},{default:a(()=>[un]),_:1}),fn]),bn,e("p",null,[xn,e("a",yn,[mn,n(o)]),kn,vn,En,wn,An,zn,qn]),$n,e("p",null,[Sn,In,Fn,Dn,Pn,Tn,On,e("a",Cn,[Ln,n(o)]),Rn]),Nn,e("p",null,[Bn,e("a",Un,[Kn,n(o)]),Hn]),Mn,e("p",null,[Vn,e("a",Gn,[Xn,n(o)]),Yn]),jn,e("p",null,[Wn,e("a",Qn,[Jn,n(o)]),Zn,ts,es,ns,ss]),as,e("p",null,[ls,e("a",os,[rs,n(o)]),is]),ds,e("p",null,[cs,e("a",ps,[gs,n(o)]),hs]),_s,e("p",null,[us,e("a",fs,[bs,n(o)]),xs]),ys,e("p",null,[ms,e("a",ks,[vs,n(o)]),Es]),ws,As,zs,qs,e("ul",null,[$s,e("li",null,[Ss,Is,e("p",null,[Fs,Ds,Ps,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/gx_http_proxy_module.html#proxy_pass"},{default:a(()=>[Ts]),_:1}),Os,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_fastcgi_module.html#fastcgi_pass"},{default:a(()=>[Cs]),_:1}),Ls,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_uwsgi_module.html#uwsgi_pass"},{default:a(()=>[Rs]),_:1}),Ns,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_scgi_module.html#scgi_pass"},{default:a(()=>[Bs]),_:1}),Us])]),e("li",null,[Ks,Hs,e("p",null,[Ms,Vs,Gs,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_proxy_module.html#proxy_pass_request_body"},{default:a(()=>[Xs]),_:1}),Ys,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_fastcgi_module.html#fastcgi_pass_request_body"},{default:a(()=>[js]),_:1}),Ws,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_uwsgi_module.html#uwsgi_pass_request_body"},{default:a(()=>[Qs]),_:1}),Js,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_scgi_module.html#scgi_pass_request_body"},{default:a(()=>[Zs]),_:1}),ta])]),ea,e("li",null,[na,e("p",null,[sa,aa,la,oa,ra,n(s,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_v2_module.html"},{default:a(()=>[ia]),_:1})])]),da]),ca,e("p",null,[e("a",pa,[ga,n(o)])])],64)}var xa=p(g,[["render",ha]]);export{xa as default};
