import{r as s,c as i,a as t,b as n,F as o,d as r,e,o as l}from"./app.138b5321.js";import{_ as d}from"./plugin-vue_export-helper.5a098b48.js";const p={},g=r('<h1 id="ngx-http-image-filter-module" tabindex="-1"><a class="header-anchor" href="#ngx-http-image-filter-module" aria-hidden="true">#</a> ngx_http_image_filter_module</h1><ul><li><a href="#directives">\u6307\u4EE4</a><ul><li><a href="#image_filter">image_filter</a></li><li><a href="#image_filter_buffer">image_filter_buffer</a></li><li><a href="#image_filter_interlace">image_filter_interlace</a></li><li><a href="#image_filter_jpeg_quality">image_filter_jpeg_quality</a></li><li><a href="#image_filter_sharpen">image_filter_sharpen</a></li><li><a href="#image_filter_transparency">image_filter_transparency</a></li><li><a href="#image_filter_webp_quality">image_filter_webp_quality</a></li></ul></li></ul><p><code>ngx_http_image_filter_module</code> \u6A21\u5757\uFF080.7.54+\uFF09\u662F\u4E00\u4E2A\u53EF\u4EE5\u8F6C\u6362 JPEG\u3001GIF\u3001PNG \u548C WebP \u683C\u5F0F\u56FE\u50CF\u7684\u8FC7\u6EE4\u5668\u3002</p><p>\u6B64\u6A21\u5757\u4E0D\u662F\u9ED8\u8BA4\u6784\u5EFA\u7684\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>--with-http_image_filter_module</code> \u914D\u7F6E\u53C2\u6570\u542F\u7528\u3002</p>',4),c=e("\u8BE5\u6A21\u5757\u4F7F\u7528\u4E86 "),h={href:"http://libgd.org/",target:"_blank",rel:"noopener noreferrer"},_=e("libgd"),u=e(" \u5E93\u3002\u5EFA\u8BAE\u4F7F\u7528\u8BE5\u5E93\u7684\u6700\u65B0\u7248\u672C\u3002"),f=r(`<blockquote><p>WebP \u683C\u5F0F\u652F\u6301\u51FA\u73B0\u5728 1.11.6 \u7248\u672C\u4E2D\u3002\u8981\u8F6C\u6362\u6210\u6B64\u683C\u5F0F\u7684\u56FE\u50CF\uFF0C\u5FC5\u987B\u5728\u7F16\u8BD1 <code>libgd</code> \u5E93\u65F6\u542F\u7528 WebP \u652F\u6301\u3002</p></blockquote><p><a id="example_configuration"></a></p><h2 id="\u793A\u4F8B\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u793A\u4F8B\u914D\u7F6E" aria-hidden="true">#</a> \u793A\u4F8B\u914D\u7F6E</h2><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /img/</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span>   http://backend</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">image_filter</span> resize <span class="token number">150</span> <span class="token number">100</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">image_filter</span> rotate <span class="token number">90</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">error_page</span>   <span class="token number">415</span> = /empty</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> = /empty</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">empty_gif</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><a id="directives"></a></p><h2 id="\u6307\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u6307\u4EE4" aria-hidden="true">#</a> \u6307\u4EE4</h2><h3 id="image-filter" tabindex="-1"><a class="header-anchor" href="#image-filter" aria-hidden="true">#</a> image_filter</h3><table><thead><tr><th style="text-align:right;">-</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:right;"><strong>\u8BED\u6CD5</strong></td><td><strong>image_filter</strong> <code>off</code>; <br><strong>image_filter</strong> <code>test</code>;<br><strong>image_filter</strong> <code>size</code>;<br><strong>image_filter</strong> <code>rotate 90 &amp;#124; 180 &amp;#124; 270</code>;<br><strong>image_filter</strong> <code>resize width height</code>;<br><strong>image_filter</strong> <code>crop width height</code>;</td></tr><tr><td style="text-align:right;"><strong>\u9ED8\u8BA4</strong></td><td>image_filter off;</td></tr><tr><td style="text-align:right;"><strong>\u4E0A\u4E0B\u6587</strong></td><td>location</td></tr></tbody></table><p>\u8BBE\u7F6E\u56FE\u7247\u6267\u884C\u7684\u8F6C\u6362\u7C7B\u578B\uFF1A</p><ul><li><p><code>off</code></p><p>\u5173\u95ED\u5BF9 location \u6A21\u5757\u7684\u5904\u7406</p></li><li><p><code>test</code></p><p>\u786E\u4FDD\u54CD\u5E94\u662F JPEG\u3001GIF\u3001PNG \u6216 WebP \u683C\u5F0F\u7684\u56FE\u7247\u3002\u5426\u5219\uFF0C\u8FD4\u56DE 415\uFF08\u4E0D\u652F\u6301\u7684\u5A92\u4F53\u7C7B\u578B\uFF09\u9519\u8BEF\u3002</p></li><li><p><code>size</code></p><p>\u4EE5 JSON \u683C\u5F0F\u8F93\u51FA\u56FE\u7247\u7684\u4FE1\u606F\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span> <span class="token property">&quot;img&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;width&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;gif&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u53D1\u751F\u9519\u8BEF\u65F6\uFF0C\u8F93\u51FA\u5982\u4E0B\uFF1A</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p><code>rotate 90&amp;#124;180&amp;#124;270</code></p><p>\u5C06\u56FE\u7247\u9006\u65F6\u9488\u65CB\u8F6C\u6307\u5B9A\u7684\u5EA6\u6570\u3002\u53C2\u6570\u503C\u53EF\u4EE5\u5305\u542B\u53D8\u91CF\u3002\u6B64\u6A21\u5F0F\u53EF\u4EE5\u5355\u72EC\u4F7F\u7528\uFF0C\u4E5F\u53EF\u4EE5\u4E0E\u8C03\u6574\u5927\u5C0F\u548C\u88C1\u526A\u8F6C\u6362\u4E00\u8D77\u4F7F\u7528\u3002</p></li><li><p><code>resize width height</code></p><p>\u6309\u6BD4\u4F8B\u5C06\u56FE\u7247\u7F29\u5C0F\u5230\u6307\u5B9A\u7684\u5C3A\u5BF8\u3002\u8981\u53EA\u6307\u5B9A\u4E00\u4E2A\u7EF4\u5EA6\uFF0C\u53EF\u4EE5\u5C06\u53E6\u4E00\u4E2A\u7EF4\u5EA6\u6307\u5B9A\u4E3A <code>-</code>\u3002\u5F53\u53D1\u751F\u9519\u8BEF\uFF0C\u670D\u52A1\u5668\u5C06\u8FD4\u56DE 415 \u72B6\u6001\u7801\uFF08\u4E0D\u652F\u6301\u7684\u5A92\u4F53\u7C7B\u578B\uFF09\u3002\u53C2\u6570\u503C\u53EF\u4EE5\u5305\u542B\u53D8\u91CF\u3002\u5F53\u4E0E <code>rotate</code> \u53C2\u6570\u4E00\u8D77\u4F7F\u7528\u65F6\uFF0C\u65CB\u8F6C\u53D8\u6362\u5C06\u5728\u7F29\u5C0F\u53D8\u6362<strong>\u4E4B\u540E</strong>\u6267\u884C\u3002</p></li><li><p><code>crop width height</code></p><p>\u6309\u6BD4\u4F8B\u5C06\u56FE\u7247\u7F29\u5C0F\u5230\u8F83\u5927\u7684\u4E00\u8FB9\uFF0C\u5E76\u88C1\u526A\u53E6\u4E00\u8FB9\u591A\u4F59\u7684\u8FB9\u7F18\u3002\u8981\u53EA\u6307\u5B9A\u4E00\u4E2A\u7EF4\u5EA6\uFF0C\u53EF\u4EE5\u5C06\u53E6\u4E00\u4E2A\u7EF4\u5EA6\u6307\u5B9A\u4E3A <code>-</code>\u3002\u5F53\u53D1\u751F\u9519\u8BEF\uFF0C\u670D\u52A1\u5668\u5C06\u8FD4\u56DE 415 \u72B6\u6001\u7801\uFF08\u4E0D\u652F\u6301\u7684\u5A92\u4F53\u7C7B\u578B\uFF09\u3002\u53C2\u6570\u503C\u53EF\u4EE5\u5305\u542B\u53D8\u91CF\u3002\u5F53\u4E0E <code>rotate</code> \u53C2\u6570\u4E00\u8D77\u4F7F\u7528\u65F6\uFF0C\u65CB\u8F6C\u53D8\u6362\u5C06\u5728\u7F29\u5C0F\u53D8\u6362<strong>\u4E4B\u524D</strong>\u6267\u884C\u3002</p></li></ul><h3 id="image-filter-buffer" tabindex="-1"><a class="header-anchor" href="#image-filter-buffer" aria-hidden="true">#</a> image_filter_buffer</h3><table><thead><tr><th style="text-align:right;">-</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:right;"><strong>\u8BED\u6CD5</strong></td><td><strong>image_filter_buffer</strong> <code>size</code>;</td></tr><tr><td style="text-align:right;"><strong>\u9ED8\u8BA4</strong></td><td>image_filter_buffer 1M;</td></tr><tr><td style="text-align:right;"><strong>\u4E0A\u4E0B\u6587</strong></td><td>http\u3001server\u3001location</td></tr></tbody></table><p>\u8BBE\u7F6E\u7528\u4E8E\u8BFB\u53D6\u56FE\u7247\u7684\u7F13\u51B2\u533A\u7684\u6700\u5927\u5927\u5C0F\u3002\u5F53\u8D85\u8FC7\u6307\u5B9A\u5927\u5C0F\u65F6\uFF0C\u670D\u52A1\u5668\u8FD4\u56DE 415 \u9519\u8BEF\u72B6\u6001\u7801\uFF08\u4E0D\u652F\u6301\u7684\u5A92\u4F53\u7C7B\u578B\uFF09\u3002</p><h3 id="image-filter-interlace" tabindex="-1"><a class="header-anchor" href="#image-filter-interlace" aria-hidden="true">#</a> image_filter_interlace</h3><table><thead><tr><th style="text-align:right;">-</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:right;"><strong>\u8BED\u6CD5</strong></td><td><strong>image_filter_interlace</strong> <code>on</code> | <code>off</code>;</td></tr><tr><td style="text-align:right;"><strong>\u9ED8\u8BA4</strong></td><td>image_filter_interlace off;</td></tr><tr><td style="text-align:right;"><strong>\u4E0A\u4E0B\u6587</strong></td><td>http\u3001server\u3001location</td></tr><tr><td style="text-align:right;"><strong>\u63D0\u793A</strong></td><td>\u8BE5\u6307\u4EE4\u5728 1.3.15 \u7248\u672C\u4E2D\u51FA\u73B0</td></tr></tbody></table><p>\u5982\u679C\u542F\u7528\u6B64\u9009\u9879\uFF0C\u56FE\u7247\u6700\u540E\u5C06\u88AB\u9010\u884C\u626B\u63CF\u3002\u5BF9\u4E8E JPEG\uFF0C\u56FE\u7247\u6700\u7EC8\u5C06\u91C7\u7528<strong>\u9010\u884C JPEG</strong> \u683C\u5F0F\u3002</p><h3 id="image-filter-jpeg-quality" tabindex="-1"><a class="header-anchor" href="#image-filter-jpeg-quality" aria-hidden="true">#</a> image_filter_jpeg_quality</h3><table><thead><tr><th style="text-align:right;">-</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:right;"><strong>\u8BED\u6CD5</strong></td><td><strong>image_filter_jpeg_quality</strong> <code>quality</code>;</td></tr><tr><td style="text-align:right;"><strong>\u9ED8\u8BA4</strong></td><td>image_filter_jpeg_quality 75;</td></tr><tr><td style="text-align:right;"><strong>\u4E0A\u4E0B\u6587</strong></td><td>http\u3001server\u3001location</td></tr></tbody></table><p>\u8BBE\u7F6E JPEG \u56FE\u7247\u7684\u8F6C\u6362\u8D28\u91CF\u3002\u53EF\u63A5\u53D7\u7684\u503C\u8303\u56F4\u5728 1 \u5230 100 \u4E4B\u95F4\u3002\u8F83\u5C0F\u7684\u503C\u610F\u5473\u7740\u8F83\u4F4E\u7684\u56FE\u7247\u8D28\u91CF\u548C\u8F83\u5C11\u7684\u6570\u636E\u4F20\u8F93\u3002\u6700\u5927\u7684\u63A8\u8350\u503C\u662F 95\uFF0C\u53C2\u6570\u503C\u53EF\u4EE5\u5305\u542B\u53D8\u91CF\u3002</p><h3 id="image-filter-sharpen" tabindex="-1"><a class="header-anchor" href="#image-filter-sharpen" aria-hidden="true">#</a> image_filter_sharpen</h3><table><thead><tr><th style="text-align:right;">-</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:right;"><strong>\u8BED\u6CD5</strong></td><td><strong>image_filter_sharpen</strong> <code>percent</code>;</td></tr><tr><td style="text-align:right;"><strong>\u9ED8\u8BA4</strong></td><td>image_filter_sharpen 0;</td></tr><tr><td style="text-align:right;"><strong>\u4E0A\u4E0B\u6587</strong></td><td>http\u3001server\u3001location</td></tr></tbody></table><p>\u589E\u52A0\u6700\u7EC8\u56FE\u50CF\u7684\u6E05\u6670\u5EA6\u3002\u9510\u5EA6\u767E\u5206\u6BD4\u53EF\u4EE5\u8D85\u8FC7 100\u3002\u96F6\u503C\u5C06\u7981\u7528\u9510\u5316\u3002\u53C2\u6570\u503C\u53EF\u4EE5\u5305\u542B\u53D8\u91CF\u3002</p><h3 id="image-filter-transparency" tabindex="-1"><a class="header-anchor" href="#image-filter-transparency" aria-hidden="true">#</a> image_filter_transparency</h3><table><thead><tr><th style="text-align:right;">-</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:right;"><strong>\u8BED\u6CD5</strong></td><td><strong>image_filter_transparency</strong> <code>on</code> | <code>off</code>;</td></tr><tr><td style="text-align:right;"><strong>\u9ED8\u8BA4</strong></td><td>image_filter_transparency on;</td></tr><tr><td style="text-align:right;"><strong>\u4E0A\u4E0B\u6587</strong></td><td>http\u3001server\u3001location</td></tr></tbody></table><p>\u5B9A\u4E49\u5728\u4F7F\u7528\u8C03\u8272\u677F\u6307\u5B9A\u7684\u989C\u8272\u8F6C\u6362 GIF \u56FE\u50CF\u6216 PNG \u56FE\u50CF\u65F6\u662F\u5426\u4FDD\u7559\u900F\u660E\u5EA6\u3002\u900F\u660E\u5EA6\u7684\u4E27\u5931\u4F7F\u56FE\u50CF\u7684\u8D28\u91CF\u66F4\u597D\u7684\u3002PNG \u4E2D\u7684 alpha \u901A\u9053\u900F\u660E\u5EA6\u59CB\u7EC8\u4FDD\u7559\u3002</p><h3 id="image-filter-webp-quality" tabindex="-1"><a class="header-anchor" href="#image-filter-webp-quality" aria-hidden="true">#</a> image_filter_webp_quality</h3><table><thead><tr><th style="text-align:right;">-</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:right;"><strong>\u8BED\u6CD5</strong></td><td><strong>image_filter_webp_quality</strong> <code>quality</code>;</td></tr><tr><td style="text-align:right;"><strong>\u9ED8\u8BA4</strong></td><td>image_filter_webp_quality 80;</td></tr><tr><td style="text-align:right;"><strong>\u4E0A\u4E0B\u6587</strong></td><td>http\u3001server\u3001location</td></tr><tr><td style="text-align:right;"><strong>\u63D0\u793A</strong></td><td>\u8BE5\u6307\u4EE4\u5728 1.11.6 \u7248\u672C\u4E2D\u51FA\u73B0</td></tr></tbody></table><p>\u8BBE\u7F6E WebP \u56FE\u7247\u7684\u8F6C\u6362\u8D28\u91CF\u3002\u53EF\u63A5\u53D7\u7684\u503C\u5728 1 \u5230 100 \u4E4B\u95F4\u3002\u8F83\u5C0F\u7684\u503C\u610F\u5473\u7740\u8F83\u4F4E\u7684\u56FE\u7247\u8D28\u91CF\u548C\u8F83\u5C11\u7684\u6570\u636E\u4F20\u8F93\u3002\u53C2\u6570\u503C\u53EF\u4EE5\u5305\u542B\u53D8\u91CF\u3002</p><h2 id="\u539F\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u539F\u6587\u6863" aria-hidden="true">#</a> \u539F\u6587\u6863</h2>`,29),m={href:"http://nginx.org/en/docs/http/ngx_http_image_filter_module.html",target:"_blank",rel:"noopener noreferrer"},b=e("http://nginx.org/en/docs/http/ngx_http_image_filter_module.html");function y(k,x){const a=s("OutboundLink");return l(),i(o,null,[g,t("blockquote",null,[t("p",null,[c,t("a",h,[_,n(a)]),u])]),f,t("p",null,[t("a",m,[b,n(a)])])],64)}var w=d(p,[["render",y]]);export{w as default};
