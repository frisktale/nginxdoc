import{r as o,c as l,a as n,b as e,F as r,d as p,e as s,o as t}from"./app.138b5321.js";import{_ as c}from"./plugin-vue_export-helper.5a098b48.js";const i={},d=p(`<h1 id="\u8C03\u8BD5\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#\u8C03\u8BD5\u65E5\u5FD7" aria-hidden="true">#</a> \u8C03\u8BD5\u65E5\u5FD7</h1><ul><li><a href="#%E4%B8%BA%E6%8C%87%E5%AE%9A%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%81%9A%E8%B0%83%E8%AF%95%E6%97%A5%E5%BF%97">\u4E3A\u6307\u5B9A\u5BA2\u6237\u7AEF\u505A\u8C03\u8BD5\u65E5\u5FD7</a></li><li><a href="#%E8%AE%B0%E5%BD%95%E6%97%A5%E5%BF%97%E5%88%B0%E5%BE%AA%E7%8E%AF%E5%86%85%E5%AD%98%E7%BC%93%E5%86%B2%E5%8C%BA">\u8BB0\u5F55\u65E5\u5FD7\u5230\u5FAA\u73AF\u5185\u5B58\u7F13\u51B2\u533A</a></li></ul><p>\u8981\u5F00\u542F\u8C03\u8BD5\u65E5\u5FD7\uFF0C\u9700\u8981\u5728\u7F16\u8BD1 Nignx \u65F6\u589E\u52A0\u5982\u4E0B\u914D\u7F6E\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./configure --with-debug <span class="token punctuation">..</span>.
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>`,4),u=s("\u4E4B\u540E\u5E94\u8BE5\u4F7F\u7528 "),b={href:"http://nginx.org/en/docs/ngx_core_module.html#error_log",target:"_blank",rel:"noopener noreferrer"},g=s("error_log"),k=s(" \u6307\u4EE4\u8BBE\u7F6E\u8C03\u8BD5\u7EA7\u522B\uFF1A"),m=p(`<div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">error_log</span> /path/to/log debug</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u8981\u9A8C\u8BC1 nginx \u662F\u5426\u5DF2\u7ECF\u914D\u7F6E\u4E3A\u652F\u6301\u8C03\u8BD5\u529F\u80FD\uFF0C\u8BF7\u8FD0\u884C <code>nginx -V</code> \u547D\u4EE4\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>configure arguments: --with-debug <span class="token punctuation">..</span>.
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>`,3),h=s("\u9884\u6784\u5EFA "),_={href:"http://nginx.org/en/linux_packages.html",target:"_blank",rel:"noopener noreferrer"},v=s("Linux"),x=s(" \u5305\u4E3A nginx-debug \u4E8C\u8FDB\u5236\u6587\u4EF6\u7684\u8C03\u8BD5\u65E5\u5FD7\u63D0\u4F9B\u4E86\u5F00\u7BB1\u5373\u7528\u7684\u652F\u6301\uFF0C\u53EF\u4EE5\u4F7F\u7528\u547D\u4EE4\u8FD0\u884C\u3002"),E=p(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">service</span> nginx stop
<span class="token function">service</span> nginx-debug start
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u4E4B\u540E\u8BBE\u7F6E <code>debug</code> \u7EA7\u522B\u3002Windows \u7684 nginx \u5728\u7F16\u8BD1\u65F6\u5C31\u5DF2\u7ECF\u652F\u6301\u8C03\u8BD5\u65E5\u5FD7\uFF0C\u56E0\u6B64\u53EA\u9700\u8BBE\u7F6E <code>debug</code> \u7EA7\u522B\u5373\u53EF\u3002</p><p>\u8BF7\u6CE8\u610F\uFF0C\u91CD\u65B0\u5B9A\u4E49\u65E5\u5FD7\u800C\u4E0D\u6307\u5B9A <code>debug</code> \u7EA7\u522B\u5C06\u7981\u6B62\u8C03\u8BD5\u65E5\u5FD7\u3002\u5728\u4E0B\u9762\u7684\u793A\u4F8B\u4E2D\uFF0C\u91CD\u65B0\u5B9A\u4E49 <code>server</code> \u4E0A\u7684\u65E5\u5FD7\u7EA7\u522B\uFF0Cnginx \u5C06\u4E0D\u4F1A\u5728\u6B64\u670D\u52A1\u5668\u4E0A\u505A\u65E5\u5FD7\u8C03\u8BD5\u3002</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">error_log</span> /path/to/log debug</span><span class="token punctuation">;</span>

<span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">error_log</span> /path/to/log</span><span class="token punctuation">;</span>
        ...
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u4E3A\u4E86\u907F\u514D\u8FD9\u79CD\u60C5\u51B5\uFF0C\u91CD\u65B0\u5B9A\u4E49\u65E5\u5FD7\u7EA7\u522B\u5E94\u8BE5\u88AB\u6CE8\u91CA\u6389\uFF0C\u6216\u8005\u660E\u786E\u6307\u5B9A\u65E5\u5FD7\u4E3A <code>debug</code> \u7EA7\u522B\u3002</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">error_log</span> /path/to/log debug</span><span class="token punctuation">;</span>

<span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">error_log</span> /path/to/log debug</span><span class="token punctuation">;</span>
        ...
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="\u4E3A\u6307\u5B9A\u5BA2\u6237\u7AEF\u505A\u8C03\u8BD5\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#\u4E3A\u6307\u5B9A\u5BA2\u6237\u7AEF\u505A\u8C03\u8BD5\u65E5\u5FD7" aria-hidden="true">#</a> \u4E3A\u6307\u5B9A\u5BA2\u6237\u7AEF\u505A\u8C03\u8BD5\u65E5\u5FD7</h2><p>\u4E5F\u53EF\u4EE5\u4EC5\u4E3A\u9009\u5B9A\u7684\u5BA2\u6237\u7AEF\u5730\u5740\u542F\u7528\u8C03\u8BD5\u65E5\u5FD7\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">error_log</span> /path/to/log</span><span class="token punctuation">;</span>

<span class="token directive"><span class="token keyword">events</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">debug_connection</span> 192.168.1.1</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">debug_connection</span> 192.168.10.0/24</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="\u8BB0\u5F55\u65E5\u5FD7\u5230\u5FAA\u73AF\u5185\u5B58\u7F13\u51B2\u533A" tabindex="-1"><a class="header-anchor" href="#\u8BB0\u5F55\u65E5\u5FD7\u5230\u5FAA\u73AF\u5185\u5B58\u7F13\u51B2\u533A" aria-hidden="true">#</a> \u8BB0\u5F55\u65E5\u5FD7\u5230\u5FAA\u73AF\u5185\u5B58\u7F13\u51B2\u533A</h2><p>\u8C03\u8BD5\u65E5\u5FD7\u53EF\u4EE5\u88AB\u5199\u5165\u5230\u5FAA\u73AF\u5185\u5B58\u7F13\u51B2\u533A\u4E2D\uFF1A</p><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">error_log</span> memory:32m debug</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u5728 <code>debug</code> \u7EA7\u522B\u5C06\u65E5\u5FD7\u5199\u5165\u5230\u5185\u5B58\u7F13\u51B2\u533A\u4E2D\uFF0C\u5373\u4F7F\u5728\u9AD8\u8D1F\u8F7D\u60C5\u51B5\u4E0B\u4E5F\u4E0D\u4F1A\u5BF9\u6027\u80FD\u4EA7\u751F\u91CD\u5927\u7684\u5F71\u54CD\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u53EF\u4EE5\u4F7F\u7528\u5982\u4E0B <code>gdb</code> \u811A\u672C\u6765\u63D0\u53D6\u65E5\u5FD7\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">set</span> <span class="token variable">$log</span> <span class="token operator">=</span> ngx_cycle-<span class="token operator">&gt;</span>log

<span class="token keyword">while</span> <span class="token variable">$log</span>-<span class="token operator">&gt;</span>writer <span class="token operator">!=</span> ngx_log_memory_writer
    <span class="token builtin class-name">set</span> <span class="token variable">$log</span> <span class="token operator">=</span> <span class="token variable">$log</span>-<span class="token operator">&gt;</span>next
end

<span class="token builtin class-name">set</span> <span class="token variable">$buf</span> <span class="token operator">=</span> <span class="token punctuation">(</span>ngx_log_memory_buf_t *<span class="token punctuation">)</span> <span class="token variable">$log</span>-<span class="token operator">&gt;</span>wdata
dump binary memory debug_log.txt <span class="token variable">$buf</span>-<span class="token operator">&gt;</span>start <span class="token variable">$buf</span>-<span class="token operator">&gt;</span>end
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="\u539F\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u539F\u6587\u6863" aria-hidden="true">#</a> \u539F\u6587\u6863</h2>`,15),f={href:"http://nginx.org/en/docs/debugging_log.html",target:"_blank",rel:"noopener noreferrer"},w=s("http://nginx.org/en/docs/debugging_log.html");function y(A,B){const a=o("OutboundLink");return t(),l(r,null,[d,n("p",null,[u,n("a",b,[g,e(a)]),k]),m,n("p",null,[h,n("a",_,[v,e(a)]),x]),E,n("ul",null,[n("li",null,[n("a",f,[w,e(a)])])])],64)}var N=c(i,[["render",y]]);export{N as default};
