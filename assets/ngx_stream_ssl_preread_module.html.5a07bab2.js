import{r,c as p,a as n,b as e,w as l,F as c,d as a,e as s,o as i}from"./app.138b5321.js";import{_ as d}from"./plugin-vue_export-helper.5a098b48.js";const u={},_=a('<h1 id="ngx-stream-ssl-preread-module" tabindex="-1"><a class="header-anchor" href="#ngx-stream-ssl-preread-module" aria-hidden="true">#</a> ngx_stream_ssl_preread_module</h1><ul><li><a href="#example_configuration">\u793A\u4F8B\u914D\u7F6E</a></li><li><a href="#directives">\u6307\u4EE4</a><ul><li><a href="#ssl_preread">ssl_preread</a></li></ul></li><li><a href="#embedded_variables">\u5185\u5D4C\u53D8\u91CF</a></li></ul>',2),h=n("code",null,"ngx_stream_ssl_preread_module",-1),k=s(" \u6A21\u5757\uFF081.11.5\uFF09\u5141\u8BB8\u4ECE "),b=n("a",{href:"ClientHello"},"ClientHello",-1),m=s(" \u6D88\u606F\u4E2D\u63D0\u53D6\u4FE1\u606F\uFF0C\u800C\u4E0D\u4F1A\u7EC8\u6B62 SSL/TLS\uFF0C\u4F8B\u5982\u63D0\u53D6\u901A\u8FC7 "),g={href:"https://tools.ietf.org/html/rfc6066#section-3",target:"_blank",rel:"noopener noreferrer"},f=s("SNI"),v=s(" \u8BF7\u6C42\u7684\u670D\u52A1\u5668\u540D\u79F0\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u4E0D\u6784\u5EFA\u6B64\u6A21\u5757\uFF0C\u60A8\u53EF\u4EE5\u5728\u6784\u5EFA\u65F6\u4F7F\u7528 "),x=n("code",null,"--with-stream_ssl_preread_module",-1),y=s(" \u914D\u7F6E\u53C2\u6570\u542F\u7528\u6B64\u6A21\u5757\u3002"),w=a(`<p><a id="example_configuration"></a></p><h2 id="\u793A\u4F8B\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u793A\u4F8B\u914D\u7F6E" aria-hidden="true">#</a> \u793A\u4F8B\u914D\u7F6E</h2><div class="language-nginx ext-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">map</span> <span class="token variable">$ssl_preread_server_name</span> <span class="token variable">$name</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">backend.example.com</span>      backend</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">default</span>                  backend2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">upstream</span> backend</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server</span> 192.168.0.1:12345</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server</span> 192.168.0.2:12345</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">upstream</span> backend2</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">server</span> 192.168.0.3:12345</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server</span> 192.168.0.4:12345</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>      <span class="token number">12346</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span>  <span class="token variable">$name</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">ssl_preread</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><a id="directives"></a></p><h2 id="\u6307\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u6307\u4EE4" aria-hidden="true">#</a> \u6307\u4EE4</h2><h3 id="google-perftools-profiles" tabindex="-1"><a class="header-anchor" href="#google-perftools-profiles" aria-hidden="true">#</a> google_perftools_profiles</h3><table><thead><tr><th style="text-align:right;">-</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:right;"><strong>\u8BED\u6CD5</strong></td><td><strong>ssl_preread</strong> <code>on</code> | <code>off</code>;</td></tr><tr><td style="text-align:right;"><strong>\u9ED8\u8BA4</strong></td><td>ssl_preread off;</td></tr><tr><td style="text-align:right;"><strong>\u4E0A\u4E0B\u6587</strong></td><td>stream\u3001server</td></tr></tbody></table>`,7),L=s("\u542F\u7528\u5728"),N=s("\u9884\u8BFB\u9636\u6BB5"),S=s(" \u4ECE ClientHello \u6D88\u606F\u4E2D\u63D0\u53D6\u4FE1\u606F\u3002"),C=a('<p><a id="embedded_variables"></a></p><h2 id="\u5185\u5D4C\u53D8\u91CF" tabindex="-1"><a class="header-anchor" href="#\u5185\u5D4C\u53D8\u91CF" aria-hidden="true">#</a> \u5185\u5D4C\u53D8\u91CF</h2><ul><li><p><code>$ssl_preread_server_name</code></p><p>\u8FD4\u56DE\u901A\u8FC7 SNI \u8BF7\u6C42\u7684\u670D\u52A1\u5668\u540D\u79F0</p></li></ul><h2 id="\u539F\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u539F\u6587\u6863" aria-hidden="true">#</a> \u539F\u6587\u6863</h2>',4),E={href:"http://nginx.org/en/docs/ngx_google_perftools_module.html",target:"_blank",rel:"noopener noreferrer"},V=s("http://nginx.org/en/docs/ngx_google_perftools_module.html");function $(B,F){const t=r("OutboundLink"),o=r("RouterLink");return i(),p(c,null,[_,n("p",null,[h,k,b,m,n("a",g,[f,e(t)]),v,x,y]),w,n("p",null,[L,e(o,{to:"/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/stream/stream_processing.html#preread_phase"},{default:l(()=>[N]),_:1}),S]),C,n("p",null,[n("a",E,[V,e(t)])])],64)}var A=d(u,[["render",$]]);export{A as default};
